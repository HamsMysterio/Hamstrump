var xa=Object.defineProperty;var Sa=(r,t,e)=>t in r?xa(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var pe=(r,t,e)=>Sa(r,typeof t!="symbol"?t+"":t,e);import{s as Ea,n as Mi,o as _a,D as Ba,r as Aa}from"../chunks/scheduler.C97pc7KN.js";import{S as Ia,i as ka,e as zt,s as Ge,k as Ss,c as qt,a as je,y as sn,f as Ve,d as $t,o as Ct,g as $e,h as At,z as or,p as Es,E as Qs,t as En,b as _n,F as _s,G as Ma,j as Bs}from"../chunks/index.Ct8-QQ37.js";import{b as _r}from"../chunks/paths.BrmztheL.js";import{g as Ra}from"../chunks/entry.CEAwv57_.js";var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function $i(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var ft={},Or={};Or.byteLength=Ca;Or.toByteArray=Ua;Or.fromByteArray=Pa;var nn=[],Oe=[],Ta=typeof Uint8Array<"u"?Uint8Array:Array,di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dn=0,La=di.length;Dn<La;++Dn)nn[Dn]=di[Dn],Oe[di.charCodeAt(Dn)]=Dn;Oe[45]=62;Oe[95]=63;function to(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function Ca(r){var t=to(r),e=t[0],n=t[1];return(e+n)*3/4-n}function Na(r,t,e){return(t+e)*3/4-e}function Ua(r){var t,e=to(r),n=e[0],s=e[1],i=new Ta(Na(r,n,s)),o=0,a=s>0?n-4:n,h;for(h=0;h<a;h+=4)t=Oe[r.charCodeAt(h)]<<18|Oe[r.charCodeAt(h+1)]<<12|Oe[r.charCodeAt(h+2)]<<6|Oe[r.charCodeAt(h+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Oe[r.charCodeAt(h)]<<2|Oe[r.charCodeAt(h+1)]>>4,i[o++]=t&255),s===1&&(t=Oe[r.charCodeAt(h)]<<10|Oe[r.charCodeAt(h+1)]<<4|Oe[r.charCodeAt(h+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Oa(r){return nn[r>>18&63]+nn[r>>12&63]+nn[r>>6&63]+nn[r&63]}function Fa(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(Oa(n));return s.join("")}function Pa(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,a=e-n;o<a;o+=i)s.push(Fa(r,o,o+i>a?a:o+i));return n===1?(t=r[e-1],s.push(nn[t>>2]+nn[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(nn[t>>10]+nn[t>>4&63]+nn[t<<2&63]+"=")),s.join("")}var Wi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Wi.read=function(r,t,e,n,s){var i,o,a=s*8-n-1,h=(1<<a)-1,y=h>>1,w=-7,E=e?s-1:0,C=e?-1:1,k=r[t+E];for(E+=C,i=k&(1<<-w)-1,k>>=-w,w+=a;w>0;i=i*256+r[t+E],E+=C,w-=8);for(o=i&(1<<-w)-1,i>>=-w,w+=n;w>0;o=o*256+r[t+E],E+=C,w-=8);if(i===0)i=1-y;else{if(i===h)return o?NaN:(k?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-y}return(k?-1:1)*o*Math.pow(2,i-n)};Wi.write=function(r,t,e,n,s,i){var o,a,h,y=i*8-s-1,w=(1<<y)-1,E=w>>1,C=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=n?0:i-1,M=n?1:-1,A=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=w):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+E>=1?t+=C/h:t+=C*Math.pow(2,1-E),t*h>=2&&(o++,h/=2),o+E>=w?(a=0,o=w):o+E>=1?(a=(t*h-1)*Math.pow(2,s),o=o+E):(a=t*Math.pow(2,E-1)*Math.pow(2,s),o=0));s>=8;r[e+k]=a&255,k+=M,a/=256,s-=8);for(o=o<<s|a,y+=s;y>0;r[e+k]=o&255,k+=M,o/=256,y-=8);r[e+k-M]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=Or,e=Wi,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=P,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const p=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(p,u),p.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(p){if(p>s)throw new RangeError('The value "'+p+'" is invalid for option "size"');const u=new Uint8Array(p);return Object.setPrototypeOf(u,a.prototype),u}function a(p,u,f){if(typeof p=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(p)}return h(p,u,f)}a.poolSize=8192;function h(p,u,f){if(typeof p=="string")return C(p,u);if(ArrayBuffer.isView(p))return M(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(xe(p,ArrayBuffer)||p&&xe(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(p,SharedArrayBuffer)||p&&xe(p.buffer,SharedArrayBuffer)))return A(p,u,f);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=p.valueOf&&p.valueOf();if(v!=null&&v!==p)return a.from(v,u,f);const T=B(p);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return a.from(p[Symbol.toPrimitive]("string"),u,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}a.from=function(p,u,f){return h(p,u,f)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function y(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function w(p,u,f){return y(p),p<=0?o(p):u!==void 0?typeof f=="string"?o(p).fill(u,f):o(p).fill(u):o(p)}a.alloc=function(p,u,f){return w(p,u,f)};function E(p){return y(p),o(p<0?0:N(p)|0)}a.allocUnsafe=function(p){return E(p)},a.allocUnsafeSlow=function(p){return E(p)};function C(p,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const f=L(p,u)|0;let v=o(f);const T=v.write(p,u);return T!==f&&(v=v.slice(0,T)),v}function k(p){const u=p.length<0?0:N(p.length)|0,f=o(u);for(let v=0;v<u;v+=1)f[v]=p[v]&255;return f}function M(p){if(xe(p,Uint8Array)){const u=new Uint8Array(p);return A(u.buffer,u.byteOffset,u.byteLength)}return k(p)}function A(p,u,f){if(u<0||p.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<u+(f||0))throw new RangeError('"length" is outside of buffer bounds');let v;return u===void 0&&f===void 0?v=new Uint8Array(p):f===void 0?v=new Uint8Array(p,u):v=new Uint8Array(p,u,f),Object.setPrototypeOf(v,a.prototype),v}function B(p){if(a.isBuffer(p)){const u=N(p.length)|0,f=o(u);return f.length===0||p.copy(f,0,0,u),f}if(p.length!==void 0)return typeof p.length!="number"||Rt(p.length)?o(0):k(p);if(p.type==="Buffer"&&Array.isArray(p.data))return k(p.data)}function N(p){if(p>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return p|0}function P(p){return+p!=p&&(p=0),a.alloc(+p)}a.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==a.prototype},a.compare=function(u,f){if(xe(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),xe(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(u)||!a.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===f)return 0;let v=u.length,T=f.length;for(let U=0,D=Math.min(v,T);U<D;++U)if(u[U]!==f[U]){v=u[U],T=f[U];break}return v<T?-1:T<v?1:0},a.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(u,f){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return a.alloc(0);let v;if(f===void 0)for(f=0,v=0;v<u.length;++v)f+=u[v].length;const T=a.allocUnsafe(f);let U=0;for(v=0;v<u.length;++v){let D=u[v];if(xe(D,Uint8Array))U+D.length>T.length?(a.isBuffer(D)||(D=a.from(D)),D.copy(T,U)):Uint8Array.prototype.set.call(T,D,U);else if(a.isBuffer(D))D.copy(T,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=D.length}return T};function L(p,u){if(a.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||xe(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const f=p.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&f===0)return 0;let T=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return kt(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return Nt(p).length;default:if(T)return v?-1:kt(p).length;u=(""+u).toLowerCase(),T=!0}}a.byteLength=L;function W(p,u,f){let v=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,u>>>=0,f<=u))return"";for(p||(p="utf8");;)switch(p){case"hex":return x(this,u,f);case"utf8":case"utf-8":return c(this,u,f);case"ascii":return S(this,u,f);case"latin1":case"binary":return b(this,u,f);case"base64":return I(this,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,u,f);default:if(v)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),v=!0}}a.prototype._isBuffer=!0;function z(p,u,f){const v=p[u];p[u]=p[f],p[f]=v}a.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<u;f+=2)z(this,f,f+1);return this},a.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<u;f+=4)z(this,f,f+3),z(this,f+1,f+2);return this},a.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<u;f+=8)z(this,f,f+7),z(this,f+1,f+6),z(this,f+2,f+5),z(this,f+3,f+4);return this},a.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?c(this,0,u):W.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(u){if(!a.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:a.compare(this,u)===0},a.prototype.inspect=function(){let u="";const f=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(u+=" ... "),"<Buffer "+u+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(u,f,v,T,U){if(xe(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(f===void 0&&(f=0),v===void 0&&(v=u?u.length:0),T===void 0&&(T=0),U===void 0&&(U=this.length),f<0||v>u.length||T<0||U>this.length)throw new RangeError("out of range index");if(T>=U&&f>=v)return 0;if(T>=U)return-1;if(f>=v)return 1;if(f>>>=0,v>>>=0,T>>>=0,U>>>=0,this===u)return 0;let D=U-T,pt=v-f;const ht=Math.min(D,pt),ut=this.slice(T,U),Ot=u.slice(f,v);for(let ct=0;ct<ht;++ct)if(ut[ct]!==Ot[ct]){D=ut[ct],pt=Ot[ct];break}return D<pt?-1:pt<D?1:0};function q(p,u,f,v,T){if(p.length===0)return-1;if(typeof f=="string"?(v=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Rt(f)&&(f=T?0:p.length-1),f<0&&(f=p.length+f),f>=p.length){if(T)return-1;f=p.length-1}else if(f<0)if(T)f=0;else return-1;if(typeof u=="string"&&(u=a.from(u,v)),a.isBuffer(u))return u.length===0?-1:H(p,u,f,v,T);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(p,u,f):Uint8Array.prototype.lastIndexOf.call(p,u,f):H(p,[u],f,v,T);throw new TypeError("val must be string, number or Buffer")}function H(p,u,f,v,T){let U=1,D=p.length,pt=u.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(p.length<2||u.length<2)return-1;U=2,D/=2,pt/=2,f/=2}function ht(Ot,ct){return U===1?Ot[ct]:Ot.readUInt16BE(ct*U)}let ut;if(T){let Ot=-1;for(ut=f;ut<D;ut++)if(ht(p,ut)===ht(u,Ot===-1?0:ut-Ot)){if(Ot===-1&&(Ot=ut),ut-Ot+1===pt)return Ot*U}else Ot!==-1&&(ut-=ut-Ot),Ot=-1}else for(f+pt>D&&(f=D-pt),ut=f;ut>=0;ut--){let Ot=!0;for(let ct=0;ct<pt;ct++)if(ht(p,ut+ct)!==ht(u,ct)){Ot=!1;break}if(Ot)return ut}return-1}a.prototype.includes=function(u,f,v){return this.indexOf(u,f,v)!==-1},a.prototype.indexOf=function(u,f,v){return q(this,u,f,v,!0)},a.prototype.lastIndexOf=function(u,f,v){return q(this,u,f,v,!1)};function G(p,u,f,v){f=Number(f)||0;const T=p.length-f;v?(v=Number(v),v>T&&(v=T)):v=T;const U=u.length;v>U/2&&(v=U/2);let D;for(D=0;D<v;++D){const pt=parseInt(u.substr(D*2,2),16);if(Rt(pt))return D;p[f+D]=pt}return D}function vt(p,u,f,v){return Mt(kt(u,p.length-f),p,f,v)}function lt(p,u,f,v){return Mt(Ft(u),p,f,v)}function Q(p,u,f,v){return Mt(Nt(u),p,f,v)}function _t(p,u,f,v){return Mt(Pn(u,p.length-f),p,f,v)}a.prototype.write=function(u,f,v,T){if(f===void 0)T="utf8",v=this.length,f=0;else if(v===void 0&&typeof f=="string")T=f,v=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(v)?(v=v>>>0,T===void 0&&(T="utf8")):(T=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const U=this.length-f;if((v===void 0||v>U)&&(v=U),u.length>0&&(v<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");let D=!1;for(;;)switch(T){case"hex":return G(this,u,f,v);case"utf8":case"utf-8":return vt(this,u,f,v);case"ascii":case"latin1":case"binary":return lt(this,u,f,v);case"base64":return Q(this,u,f,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _t(this,u,f,v);default:if(D)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),D=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(p,u,f){return u===0&&f===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(u,f))}function c(p,u,f){f=Math.min(p.length,f);const v=[];let T=u;for(;T<f;){const U=p[T];let D=null,pt=U>239?4:U>223?3:U>191?2:1;if(T+pt<=f){let ht,ut,Ot,ct;switch(pt){case 1:U<128&&(D=U);break;case 2:ht=p[T+1],(ht&192)===128&&(ct=(U&31)<<6|ht&63,ct>127&&(D=ct));break;case 3:ht=p[T+1],ut=p[T+2],(ht&192)===128&&(ut&192)===128&&(ct=(U&15)<<12|(ht&63)<<6|ut&63,ct>2047&&(ct<55296||ct>57343)&&(D=ct));break;case 4:ht=p[T+1],ut=p[T+2],Ot=p[T+3],(ht&192)===128&&(ut&192)===128&&(Ot&192)===128&&(ct=(U&15)<<18|(ht&63)<<12|(ut&63)<<6|Ot&63,ct>65535&&ct<1114112&&(D=ct))}}D===null?(D=65533,pt=1):D>65535&&(D-=65536,v.push(D>>>10&1023|55296),D=56320|D&1023),v.push(D),T+=pt}return g(v)}const d=4096;function g(p){const u=p.length;if(u<=d)return String.fromCharCode.apply(String,p);let f="",v=0;for(;v<u;)f+=String.fromCharCode.apply(String,p.slice(v,v+=d));return f}function S(p,u,f){let v="";f=Math.min(p.length,f);for(let T=u;T<f;++T)v+=String.fromCharCode(p[T]&127);return v}function b(p,u,f){let v="";f=Math.min(p.length,f);for(let T=u;T<f;++T)v+=String.fromCharCode(p[T]);return v}function x(p,u,f){const v=p.length;(!u||u<0)&&(u=0),(!f||f<0||f>v)&&(f=v);let T="";for(let U=u;U<f;++U)T+=Tt[p[U]];return T}function R(p,u,f){const v=p.slice(u,f);let T="";for(let U=0;U<v.length-1;U+=2)T+=String.fromCharCode(v[U]+v[U+1]*256);return T}a.prototype.slice=function(u,f){const v=this.length;u=~~u,f=f===void 0?v:~~f,u<0?(u+=v,u<0&&(u=0)):u>v&&(u=v),f<0?(f+=v,f<0&&(f=0)):f>v&&(f=v),f<u&&(f=u);const T=this.subarray(u,f);return Object.setPrototypeOf(T,a.prototype),T};function m(p,u,f){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+u>f)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(u,f,v){u=u>>>0,f=f>>>0,v||m(u,f,this.length);let T=this[u],U=1,D=0;for(;++D<f&&(U*=256);)T+=this[u+D]*U;return T},a.prototype.readUintBE=a.prototype.readUIntBE=function(u,f,v){u=u>>>0,f=f>>>0,v||m(u,f,this.length);let T=this[u+--f],U=1;for(;f>0&&(U*=256);)T+=this[u+--f]*U;return T},a.prototype.readUint8=a.prototype.readUInt8=function(u,f){return u=u>>>0,f||m(u,1,this.length),this[u]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(u,f){return u=u>>>0,f||m(u,2,this.length),this[u]|this[u+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(u,f){return u=u>>>0,f||m(u,2,this.length),this[u]<<8|this[u+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(u,f){return u=u>>>0,f||m(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(u,f){return u=u>>>0,f||m(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},a.prototype.readBigUInt64LE=Me(function(u){u=u>>>0,St(u,"offset");const f=this[u],v=this[u+7];(f===void 0||v===void 0)&&wt(u,this.length-8);const T=f+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,U=this[++u]+this[++u]*2**8+this[++u]*2**16+v*2**24;return BigInt(T)+(BigInt(U)<<BigInt(32))}),a.prototype.readBigUInt64BE=Me(function(u){u=u>>>0,St(u,"offset");const f=this[u],v=this[u+7];(f===void 0||v===void 0)&&wt(u,this.length-8);const T=f*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],U=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v;return(BigInt(T)<<BigInt(32))+BigInt(U)}),a.prototype.readIntLE=function(u,f,v){u=u>>>0,f=f>>>0,v||m(u,f,this.length);let T=this[u],U=1,D=0;for(;++D<f&&(U*=256);)T+=this[u+D]*U;return U*=128,T>=U&&(T-=Math.pow(2,8*f)),T},a.prototype.readIntBE=function(u,f,v){u=u>>>0,f=f>>>0,v||m(u,f,this.length);let T=f,U=1,D=this[u+--T];for(;T>0&&(U*=256);)D+=this[u+--T]*U;return U*=128,D>=U&&(D-=Math.pow(2,8*f)),D},a.prototype.readInt8=function(u,f){return u=u>>>0,f||m(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},a.prototype.readInt16LE=function(u,f){u=u>>>0,f||m(u,2,this.length);const v=this[u]|this[u+1]<<8;return v&32768?v|4294901760:v},a.prototype.readInt16BE=function(u,f){u=u>>>0,f||m(u,2,this.length);const v=this[u+1]|this[u]<<8;return v&32768?v|4294901760:v},a.prototype.readInt32LE=function(u,f){return u=u>>>0,f||m(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},a.prototype.readInt32BE=function(u,f){return u=u>>>0,f||m(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},a.prototype.readBigInt64LE=Me(function(u){u=u>>>0,St(u,"offset");const f=this[u],v=this[u+7];(f===void 0||v===void 0)&&wt(u,this.length-8);const T=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(v<<24);return(BigInt(T)<<BigInt(32))+BigInt(f+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),a.prototype.readBigInt64BE=Me(function(u){u=u>>>0,St(u,"offset");const f=this[u],v=this[u+7];(f===void 0||v===void 0)&&wt(u,this.length-8);const T=(f<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(T)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v)}),a.prototype.readFloatLE=function(u,f){return u=u>>>0,f||m(u,4,this.length),e.read(this,u,!0,23,4)},a.prototype.readFloatBE=function(u,f){return u=u>>>0,f||m(u,4,this.length),e.read(this,u,!1,23,4)},a.prototype.readDoubleLE=function(u,f){return u=u>>>0,f||m(u,8,this.length),e.read(this,u,!0,52,8)},a.prototype.readDoubleBE=function(u,f){return u=u>>>0,f||m(u,8,this.length),e.read(this,u,!1,52,8)};function l(p,u,f,v,T,U){if(!a.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>T||u<U)throw new RangeError('"value" argument is out of bounds');if(f+v>p.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(u,f,v,T){if(u=+u,f=f>>>0,v=v>>>0,!T){const pt=Math.pow(2,8*v)-1;l(this,u,f,v,pt,0)}let U=1,D=0;for(this[f]=u&255;++D<v&&(U*=256);)this[f+D]=u/U&255;return f+v},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(u,f,v,T){if(u=+u,f=f>>>0,v=v>>>0,!T){const pt=Math.pow(2,8*v)-1;l(this,u,f,v,pt,0)}let U=v-1,D=1;for(this[f+U]=u&255;--U>=0&&(D*=256);)this[f+U]=u/D&255;return f+v},a.prototype.writeUint8=a.prototype.writeUInt8=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,1,255,0),this[f]=u&255,f+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,2,65535,0),this[f]=u&255,this[f+1]=u>>>8,f+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,2,65535,0),this[f]=u>>>8,this[f+1]=u&255,f+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,4,4294967295,0),this[f+3]=u>>>24,this[f+2]=u>>>16,this[f+1]=u>>>8,this[f]=u&255,f+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,4,4294967295,0),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=u&255,f+4};function _(p,u,f,v,T){mt(u,v,T,p,f,7);let U=Number(u&BigInt(4294967295));p[f++]=U,U=U>>8,p[f++]=U,U=U>>8,p[f++]=U,U=U>>8,p[f++]=U;let D=Number(u>>BigInt(32)&BigInt(4294967295));return p[f++]=D,D=D>>8,p[f++]=D,D=D>>8,p[f++]=D,D=D>>8,p[f++]=D,f}function K(p,u,f,v,T){mt(u,v,T,p,f,7);let U=Number(u&BigInt(4294967295));p[f+7]=U,U=U>>8,p[f+6]=U,U=U>>8,p[f+5]=U,U=U>>8,p[f+4]=U;let D=Number(u>>BigInt(32)&BigInt(4294967295));return p[f+3]=D,D=D>>8,p[f+2]=D,D=D>>8,p[f+1]=D,D=D>>8,p[f]=D,f+8}a.prototype.writeBigUInt64LE=Me(function(u,f=0){return _(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Me(function(u,f=0){return K(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(u,f,v,T){if(u=+u,f=f>>>0,!T){const ht=Math.pow(2,8*v-1);l(this,u,f,v,ht-1,-ht)}let U=0,D=1,pt=0;for(this[f]=u&255;++U<v&&(D*=256);)u<0&&pt===0&&this[f+U-1]!==0&&(pt=1),this[f+U]=(u/D>>0)-pt&255;return f+v},a.prototype.writeIntBE=function(u,f,v,T){if(u=+u,f=f>>>0,!T){const ht=Math.pow(2,8*v-1);l(this,u,f,v,ht-1,-ht)}let U=v-1,D=1,pt=0;for(this[f+U]=u&255;--U>=0&&(D*=256);)u<0&&pt===0&&this[f+U+1]!==0&&(pt=1),this[f+U]=(u/D>>0)-pt&255;return f+v},a.prototype.writeInt8=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,1,127,-128),u<0&&(u=255+u+1),this[f]=u&255,f+1},a.prototype.writeInt16LE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,2,32767,-32768),this[f]=u&255,this[f+1]=u>>>8,f+2},a.prototype.writeInt16BE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,2,32767,-32768),this[f]=u>>>8,this[f+1]=u&255,f+2},a.prototype.writeInt32LE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,4,2147483647,-2147483648),this[f]=u&255,this[f+1]=u>>>8,this[f+2]=u>>>16,this[f+3]=u>>>24,f+4},a.prototype.writeInt32BE=function(u,f,v){return u=+u,f=f>>>0,v||l(this,u,f,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=u&255,f+4},a.prototype.writeBigInt64LE=Me(function(u,f=0){return _(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Me(function(u,f=0){return K(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(p,u,f,v,T,U){if(f+v>p.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function Z(p,u,f,v,T){return u=+u,f=f>>>0,T||V(p,u,f,4),e.write(p,u,f,v,23,4),f+4}a.prototype.writeFloatLE=function(u,f,v){return Z(this,u,f,!0,v)},a.prototype.writeFloatBE=function(u,f,v){return Z(this,u,f,!1,v)};function it(p,u,f,v,T){return u=+u,f=f>>>0,T||V(p,u,f,8),e.write(p,u,f,v,52,8),f+8}a.prototype.writeDoubleLE=function(u,f,v){return it(this,u,f,!0,v)},a.prototype.writeDoubleBE=function(u,f,v){return it(this,u,f,!1,v)},a.prototype.copy=function(u,f,v,T){if(!a.isBuffer(u))throw new TypeError("argument should be a Buffer");if(v||(v=0),!T&&T!==0&&(T=this.length),f>=u.length&&(f=u.length),f||(f=0),T>0&&T<v&&(T=v),T===v||u.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),u.length-f<T-v&&(T=u.length-f+v);const U=T-v;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,v,T):Uint8Array.prototype.set.call(u,this.subarray(v,T),f),U},a.prototype.fill=function(u,f,v,T){if(typeof u=="string"){if(typeof f=="string"?(T=f,f=0,v=this.length):typeof v=="string"&&(T=v,v=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!a.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(u.length===1){const D=u.charCodeAt(0);(T==="utf8"&&D<128||T==="latin1")&&(u=D)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(f<0||this.length<f||this.length<v)throw new RangeError("Out of range index");if(v<=f)return this;f=f>>>0,v=v===void 0?this.length:v>>>0,u||(u=0);let U;if(typeof u=="number")for(U=f;U<v;++U)this[U]=u;else{const D=a.isBuffer(u)?u:a.from(u,T),pt=D.length;if(pt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(U=0;U<v-f;++U)this[U+f]=D[U%pt]}return this};const nt={};function at(p,u,f){nt[p]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(T){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:T,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}at("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),at("ERR_INVALID_ARG_TYPE",function(p,u){return`The "${p}" argument must be of type number. Received type ${typeof u}`},TypeError),at("ERR_OUT_OF_RANGE",function(p,u,f){let v=`The value of "${p}" is out of range.`,T=f;return Number.isInteger(f)&&Math.abs(f)>2**32?T=Dt(String(f)):typeof f=="bigint"&&(T=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(T=Dt(T)),T+="n"),v+=` It must be ${u}. Received ${T}`,v},RangeError);function Dt(p){let u="",f=p.length;const v=p[0]==="-"?1:0;for(;f>=v+4;f-=3)u=`_${p.slice(f-3,f)}${u}`;return`${p.slice(0,f)}${u}`}function dt(p,u,f){St(u,"offset"),(p[u]===void 0||p[u+f]===void 0)&&wt(u,p.length-(f+1))}function mt(p,u,f,v,T,U){if(p>f||p<u){const D=typeof u=="bigint"?"n":"";let pt;throw u===0||u===BigInt(0)?pt=`>= 0${D} and < 2${D} ** ${(U+1)*8}${D}`:pt=`>= -(2${D} ** ${(U+1)*8-1}${D}) and < 2 ** ${(U+1)*8-1}${D}`,new nt.ERR_OUT_OF_RANGE("value",pt,p)}dt(v,T,U)}function St(p,u){if(typeof p!="number")throw new nt.ERR_INVALID_ARG_TYPE(u,"number",p)}function wt(p,u,f){throw Math.floor(p)!==p?(St(p,f),new nt.ERR_OUT_OF_RANGE("offset","an integer",p)):u<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,p)}const Bt=/[^+/0-9A-Za-z-_]/g;function Qe(p){if(p=p.split("=")[0],p=p.trim().replace(Bt,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function kt(p,u){u=u||1/0;let f;const v=p.length;let T=null;const U=[];for(let D=0;D<v;++D){if(f=p.charCodeAt(D),f>55295&&f<57344){if(!T){if(f>56319){(u-=3)>-1&&U.push(239,191,189);continue}else if(D+1===v){(u-=3)>-1&&U.push(239,191,189);continue}T=f;continue}if(f<56320){(u-=3)>-1&&U.push(239,191,189),T=f;continue}f=(T-55296<<10|f-56320)+65536}else T&&(u-=3)>-1&&U.push(239,191,189);if(T=null,f<128){if((u-=1)<0)break;U.push(f)}else if(f<2048){if((u-=2)<0)break;U.push(f>>6|192,f&63|128)}else if(f<65536){if((u-=3)<0)break;U.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((u-=4)<0)break;U.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return U}function Ft(p){const u=[];for(let f=0;f<p.length;++f)u.push(p.charCodeAt(f)&255);return u}function Pn(p,u){let f,v,T;const U=[];for(let D=0;D<p.length&&!((u-=2)<0);++D)f=p.charCodeAt(D),v=f>>8,T=f%256,U.push(T),U.push(v);return U}function Nt(p){return t.toByteArray(Qe(p))}function Mt(p,u,f,v){let T;for(T=0;T<v&&!(T+f>=u.length||T>=p.length);++T)u[T+f]=p[T];return T}function xe(p,u){return p instanceof u||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===u.name}function Rt(p){return p!==p}const Tt=function(){const p="0123456789abcdef",u=new Array(256);for(let f=0;f<16;++f){const v=f*16;for(let T=0;T<16;++T)u[v+T]=p[f]+p[T]}return u}();function Me(p){return typeof BigInt>"u"?Ut:p}function Ut(){throw new Error("BigInt not supported")}})(ft);function As(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Da(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Fr(r,...t){if(!Da(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${r.length}`)}function za(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");As(r.outputLen),As(r.blockLen)}function Ar(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function qa(r,t){Fr(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const pi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gi=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),tn=(r,t)=>r<<32-t|r>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function $a(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Hi(r){return typeof r=="string"&&(r=$a(r)),Fr(r),r}function Wa(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Fr(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class eo{clone(){return this._cloneInto()}}function no(r){const t=n=>r().update(Hi(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function ro(r=32){if(pi&&typeof pi.getRandomValues=="function")return pi.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function Ha(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),h=n?4:0,y=n?0:4;r.setUint32(t+h,o,n),r.setUint32(t+y,a,n)}const Ka=(r,t,e)=>r&t^~r&e,ja=(r,t,e)=>r&t^r&e^t&e;class io extends eo{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gi(this.buffer)}update(t){Ar(this);const{view:e,buffer:n,blockLen:s}=this;t=Hi(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const h=gi(t);for(;s<=i-o;o+=s)this.process(h,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ar(this),qa(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let E=o;E<s;E++)e[E]=0;Ha(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=gi(t),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=h/4,w=this.get();if(y>w.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<y;E++)a.setUint32(4*E,w[E],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const wr=BigInt(2**32-1),Ri=BigInt(32);function so(r,t=!1){return t?{h:Number(r&wr),l:Number(r>>Ri&wr)}:{h:Number(r>>Ri&wr)|0,l:Number(r&wr)|0}}function Ga(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=so(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const Va=(r,t)=>BigInt(r>>>0)<<Ri|BigInt(t>>>0),Za=(r,t,e)=>r>>>e,Ya=(r,t,e)=>r<<32-e|t>>>e,Xa=(r,t,e)=>r>>>e|t<<32-e,Ja=(r,t,e)=>r<<32-e|t>>>e,Qa=(r,t,e)=>r<<64-e|t>>>e-32,tc=(r,t,e)=>r>>>e-32|t<<64-e,ec=(r,t)=>t,nc=(r,t)=>r,rc=(r,t,e)=>r<<e|t>>>32-e,ic=(r,t,e)=>t<<e|r>>>32-e,sc=(r,t,e)=>t<<e-32|r>>>64-e,oc=(r,t,e)=>r<<e-32|t>>>64-e;function ac(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const cc=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),uc=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,lc=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),fc=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,hc=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),dc=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,gt={fromBig:so,split:Ga,toBig:Va,shrSH:Za,shrSL:Ya,rotrSH:Xa,rotrSL:Ja,rotrBH:Qa,rotrBL:tc,rotr32H:ec,rotr32L:nc,rotlSH:rc,rotlSL:ic,rotlBH:sc,rotlBL:oc,add:ac,add3L:cc,add3H:uc,add4L:lc,add4H:fc,add5H:dc,add5L:hc},[pc,gc]=gt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),pn=new Uint32Array(80),gn=new Uint32Array(80);class yc extends io{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:h,Eh:y,El:w,Fh:E,Fl:C,Gh:k,Gl:M,Hh:A,Hl:B}=this;return[t,e,n,s,i,o,a,h,y,w,E,C,k,M,A,B]}set(t,e,n,s,i,o,a,h,y,w,E,C,k,M,A,B){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=h|0,this.Eh=y|0,this.El=w|0,this.Fh=E|0,this.Fl=C|0,this.Gh=k|0,this.Gl=M|0,this.Hh=A|0,this.Hl=B|0}process(t,e){for(let L=0;L<16;L++,e+=4)pn[L]=t.getUint32(e),gn[L]=t.getUint32(e+=4);for(let L=16;L<80;L++){const W=pn[L-15]|0,z=gn[L-15]|0,q=gt.rotrSH(W,z,1)^gt.rotrSH(W,z,8)^gt.shrSH(W,z,7),H=gt.rotrSL(W,z,1)^gt.rotrSL(W,z,8)^gt.shrSL(W,z,7),G=pn[L-2]|0,vt=gn[L-2]|0,lt=gt.rotrSH(G,vt,19)^gt.rotrBH(G,vt,61)^gt.shrSH(G,vt,6),Q=gt.rotrSL(G,vt,19)^gt.rotrBL(G,vt,61)^gt.shrSL(G,vt,6),_t=gt.add4L(H,Q,gn[L-7],gn[L-16]),I=gt.add4H(_t,q,lt,pn[L-7],pn[L-16]);pn[L]=I|0,gn[L]=_t|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:h,Dh:y,Dl:w,Eh:E,El:C,Fh:k,Fl:M,Gh:A,Gl:B,Hh:N,Hl:P}=this;for(let L=0;L<80;L++){const W=gt.rotrSH(E,C,14)^gt.rotrSH(E,C,18)^gt.rotrBH(E,C,41),z=gt.rotrSL(E,C,14)^gt.rotrSL(E,C,18)^gt.rotrBL(E,C,41),q=E&k^~E&A,H=C&M^~C&B,G=gt.add5L(P,z,H,gc[L],gn[L]),vt=gt.add5H(G,N,W,q,pc[L],pn[L]),lt=G|0,Q=gt.rotrSH(n,s,28)^gt.rotrBH(n,s,34)^gt.rotrBH(n,s,39),_t=gt.rotrSL(n,s,28)^gt.rotrBL(n,s,34)^gt.rotrBL(n,s,39),I=n&i^n&a^i&a,c=s&o^s&h^o&h;N=A|0,P=B|0,A=k|0,B=M|0,k=E|0,M=C|0,{h:E,l:C}=gt.add(y|0,w|0,vt|0,lt|0),y=a|0,w=h|0,a=i|0,h=o|0,i=n|0,o=s|0;const d=gt.add3L(lt,_t,c);n=gt.add3H(d,vt,Q,I),s=d|0}({h:n,l:s}=gt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=gt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:h}=gt.add(this.Ch|0,this.Cl|0,a|0,h|0),{h:y,l:w}=gt.add(this.Dh|0,this.Dl|0,y|0,w|0),{h:E,l:C}=gt.add(this.Eh|0,this.El|0,E|0,C|0),{h:k,l:M}=gt.add(this.Fh|0,this.Fl|0,k|0,M|0),{h:A,l:B}=gt.add(this.Gh|0,this.Gl|0,A|0,B|0),{h:N,l:P}=gt.add(this.Hh|0,this.Hl|0,N|0,P|0),this.set(n,s,i,o,a,h,y,w,E,C,k,M,A,B,N,P)}roundClean(){pn.fill(0),gn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const mc=no(()=>new yc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oo=BigInt(0),Pr=BigInt(1),wc=BigInt(2);function Tn(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function dr(r){if(!Tn(r))throw new Error("Uint8Array expected")}const bc=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Ln(r){dr(r);let t="";for(let e=0;e<r.length;e++)t+=bc[r[e]];return t}function ao(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function Ki(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const ln={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Is(r){if(r>=ln._0&&r<=ln._9)return r-ln._0;if(r>=ln._A&&r<=ln._F)return r-(ln._A-10);if(r>=ln._a&&r<=ln._f)return r-(ln._a-10)}function jn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Is(r.charCodeAt(i)),a=Is(r.charCodeAt(i+1));if(o===void 0||a===void 0){const h=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}n[s]=o*16+a}return n}function Mn(r){return Ki(Ln(r))}function Hn(r){return dr(r),Ki(Ln(Uint8Array.from(r).reverse()))}function Gn(r,t){return jn(r.toString(16).padStart(t*2,"0"))}function cr(r,t){return Gn(r,t).reverse()}function vc(r){return jn(ao(r))}function de(r,t,e){let n;if(typeof t=="string")try{n=jn(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Tn(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function Cn(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];dr(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}function xc(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function Sc(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Ec(r){let t;for(t=0;r>oo;r>>=Pr,t+=1);return t}function _c(r,t){return r>>BigInt(t)&Pr}function Bc(r,t,e){return r|(e?Pr:oo)<<BigInt(t)}const ji=r=>(wc<<BigInt(r-1))-Pr,yi=r=>new Uint8Array(r),ks=r=>Uint8Array.from(r);function co(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=yi(r),s=yi(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...E)=>e(s,n,...E),h=(E=yi())=>{s=a(ks([0]),E),n=a(),E.length!==0&&(s=a(ks([1]),E),n=a())},y=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const C=[];for(;E<t;){n=a();const k=n.slice();C.push(k),E+=n.length}return Cn(...C)};return(E,C)=>{o(),h(E);let k;for(;!(k=C(y()));)h();return o(),k}}const Ac={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Tn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Yn(r,t,e={}){const n=(s,i,o)=>{const a=Ac[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const h=r[s];if(!(o&&h===void 0)&&!a(h,r))throw new Error(`Invalid param ${String(s)}=${h} (${typeof h}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const Ic=Object.freeze(Object.defineProperty({__proto__:null,abytes:dr,bitGet:_c,bitLen:Ec,bitMask:ji,bitSet:Bc,bytesToHex:Ln,bytesToNumberBE:Mn,bytesToNumberLE:Hn,concatBytes:Cn,createHmacDrbg:co,ensureBytes:de,equalBytes:xc,hexToBytes:jn,hexToNumber:Ki,isBytes:Tn,numberToBytesBE:Gn,numberToBytesLE:cr,numberToHexUnpadded:ao,numberToVarBytesBE:vc,utf8ToBytes:Sc,validateObject:Yn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ge=BigInt(0),Ht=BigInt(1),Bn=BigInt(2),kc=BigInt(3),Ti=BigInt(4),Ms=BigInt(5),Rs=BigInt(8);BigInt(9);BigInt(16);function Pt(r,t){const e=r%t;return e>=ge?e:t+e}function Mc(r,t,e){if(e<=ge||t<ge)throw new Error("Expected power/modulo > 0");if(e===Ht)return ge;let n=Ht;for(;t>ge;)t&Ht&&(n=n*r%e),r=r*r%e,t>>=Ht;return n}function jt(r,t,e){let n=r;for(;t-- >ge;)n*=n,n%=e;return n}function Li(r,t){if(r===ge||t<=ge)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=Pt(r,t),n=t,s=ge,i=Ht;for(;e!==ge;){const a=n/e,h=n%e,y=s-i*a;n=e,e=h,s=i,i=y}if(n!==Ht)throw new Error("invert: does not exist");return Pt(s,t)}function Rc(r){const t=(r-Ht)/Bn;let e,n,s;for(e=r-Ht,n=0;e%Bn===ge;e/=Bn,n++);for(s=Bn;s<r&&Mc(s,t,r)!==r-Ht;s++);if(n===1){const o=(r+Ht)/Ti;return function(h,y){const w=h.pow(y,o);if(!h.eql(h.sqr(w),y))throw new Error("Cannot find square root");return w}}const i=(e+Ht)/Bn;return function(a,h){if(a.pow(h,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let y=n,w=a.pow(a.mul(a.ONE,s),e),E=a.pow(h,i),C=a.pow(h,e);for(;!a.eql(C,a.ONE);){if(a.eql(C,a.ZERO))return a.ZERO;let k=1;for(let A=a.sqr(C);k<y&&!a.eql(A,a.ONE);k++)A=a.sqr(A);const M=a.pow(w,Ht<<BigInt(y-k-1));w=a.sqr(M),E=a.mul(E,M),C=a.mul(C,w),y=k}return E}}function Tc(r){if(r%Ti===kc){const t=(r+Ht)/Ti;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Rs===Ms){const t=(r-Ms)/Rs;return function(n,s){const i=n.mul(s,Bn),o=n.pow(i,t),a=n.mul(s,o),h=n.mul(n.mul(a,Bn),o),y=n.mul(a,n.sub(h,n.ONE));if(!n.eql(n.sqr(y),s))throw new Error("Cannot find square root");return y}}return Rc(r)}const Lc=(r,t)=>(Pt(r,t)&Ht)===Ht,Cc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Nc(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Cc.reduce((n,s)=>(n[s]="function",n),t);return Yn(r,e)}function Uc(r,t,e){if(e<ge)throw new Error("Expected power > 0");if(e===ge)return r.ONE;if(e===Ht)return t;let n=r.ONE,s=t;for(;e>ge;)e&Ht&&(n=r.mul(n,s)),s=r.sqr(s),e>>=Ht;return n}function Oc(r,t){const e=new Array(t.length),n=t.reduce((i,o,a)=>r.is0(o)?i:(e[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,a)=>r.is0(o)?i:(e[a]=r.mul(i,e[a]),r.mul(i,o)),s),e}function uo(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function lo(r,t,e=!1,n={}){if(r<=ge)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=uo(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Tc(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:ji(s),ZERO:ge,ONE:Ht,create:h=>Pt(h,r),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return ge<=h&&h<r},is0:h=>h===ge,isOdd:h=>(h&Ht)===Ht,neg:h=>Pt(-h,r),eql:(h,y)=>h===y,sqr:h=>Pt(h*h,r),add:(h,y)=>Pt(h+y,r),sub:(h,y)=>Pt(h-y,r),mul:(h,y)=>Pt(h*y,r),pow:(h,y)=>Uc(a,h,y),div:(h,y)=>Pt(h*Li(y,r),r),sqrN:h=>h*h,addN:(h,y)=>h+y,subN:(h,y)=>h-y,mulN:(h,y)=>h*y,inv:h=>Li(h,r),sqrt:n.sqrt||(h=>o(a,h)),invertBatch:h=>Oc(a,h),cmov:(h,y,w)=>w?y:h,toBytes:h=>e?cr(h,i):Gn(h,i),fromBytes:h=>{if(h.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${h.length}`);return e?Hn(h):Mn(h)}});return Object.freeze(a)}function fo(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function ho(r){const t=fo(r);return t+Math.ceil(t/2)}function Fc(r,t,e=!1){const n=r.length,s=fo(t),i=ho(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=e?Mn(r):Hn(r),a=Pt(o,t-Ht)+Ht;return e?cr(a,s):Gn(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pc=BigInt(0),mi=BigInt(1);function po(r,t){const e=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>Pc;)i&mi&&(o=o.add(a)),a=a.double(),i>>=mi;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),h=[];let y=s,w=y;for(let E=0;E<o;E++){w=y,h.push(w);for(let C=1;C<a;C++)w=w.add(y),h.push(w);y=w.double()}return h},wNAF(s,i,o){const{windows:a,windowSize:h}=n(s);let y=r.ZERO,w=r.BASE;const E=BigInt(2**s-1),C=2**s,k=BigInt(s);for(let M=0;M<a;M++){const A=M*h;let B=Number(o&E);o>>=k,B>h&&(B-=C,o+=mi);const N=A,P=A+Math.abs(B)-1,L=M%2!==0,W=B<0;B===0?w=w.add(e(L,i[N])):y=y.add(e(W,i[P]))}return{p:y,f:w}},wNAFCached(s,i,o,a){const h=s._WINDOW_SIZE||1;let y=i.get(s);return y||(y=this.precomputeWindow(s,h),h!==1&&i.set(s,a(y))),this.wNAF(h,y,o)}}}function Gi(r){return Nc(r.Fp),Yn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uo(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const He=BigInt(0),Te=BigInt(1),br=BigInt(2),Dc=BigInt(8),zc={zip215:!0};function qc(r){const t=Gi(r);return Yn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function $c(r){const t=qc(r),{Fp:e,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h}=t,y=br<<BigInt(a*8)-Te,w=e.create,E=t.uvRatio||((b,x)=>{try{return{isValid:!0,value:e.sqrt(b*e.inv(x))}}catch{return{isValid:!1,value:He}}}),C=t.adjustScalarBytes||(b=>b),k=t.domain||((b,x,R)=>{if(x.length||R)throw new Error("Contexts/pre-hash are not supported");return b}),M=b=>typeof b=="bigint"&&He<b,A=(b,x)=>M(b)&&M(x)&&b<x,B=b=>b===He||A(b,y);function N(b,x){if(A(b,x))return b;throw new Error(`Expected valid scalar < ${x}, got ${typeof b} ${b}`)}function P(b){return b===He?b:N(b,n)}const L=new Map;function W(b){if(!(b instanceof z))throw new Error("ExtendedPoint expected")}class z{constructor(x,R,m,l){if(this.ex=x,this.ey=R,this.ez=m,this.et=l,!B(x))throw new Error("x required");if(!B(R))throw new Error("y required");if(!B(m))throw new Error("z required");if(!B(l))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof z)throw new Error("extended point not allowed");const{x:R,y:m}=x||{};if(!B(R)||!B(m))throw new Error("invalid affine point");return new z(R,m,Te,w(R*m))}static normalizeZ(x){const R=e.invertBatch(x.map(m=>m.ez));return x.map((m,l)=>m.toAffine(R[l])).map(z.fromAffine)}_setWindowSize(x){this._WINDOW_SIZE=x,L.delete(this)}assertValidity(){const{a:x,d:R}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:m,ey:l,ez:_,et:K}=this,V=w(m*m),Z=w(l*l),it=w(_*_),nt=w(it*it),at=w(V*x),Dt=w(it*w(at+Z)),dt=w(nt+w(R*w(V*Z)));if(Dt!==dt)throw new Error("bad point: equation left != right (1)");const mt=w(m*l),St=w(_*K);if(mt!==St)throw new Error("bad point: equation left != right (2)")}equals(x){W(x);const{ex:R,ey:m,ez:l}=this,{ex:_,ey:K,ez:V}=x,Z=w(R*V),it=w(_*l),nt=w(m*V),at=w(K*l);return Z===it&&nt===at}is0(){return this.equals(z.ZERO)}negate(){return new z(w(-this.ex),this.ey,this.ez,w(-this.et))}double(){const{a:x}=t,{ex:R,ey:m,ez:l}=this,_=w(R*R),K=w(m*m),V=w(br*w(l*l)),Z=w(x*_),it=R+m,nt=w(w(it*it)-_-K),at=Z+K,Dt=at-V,dt=Z-K,mt=w(nt*Dt),St=w(at*dt),wt=w(nt*dt),Bt=w(Dt*at);return new z(mt,St,Bt,wt)}add(x){W(x);const{a:R,d:m}=t,{ex:l,ey:_,ez:K,et:V}=this,{ex:Z,ey:it,ez:nt,et:at}=x;if(R===BigInt(-1)){const xe=w((_-l)*(it+Z)),Rt=w((_+l)*(it-Z)),Tt=w(Rt-xe);if(Tt===He)return this.double();const Me=w(K*br*at),Ut=w(V*br*nt),p=Ut+Me,u=Rt+xe,f=Ut-Me,v=w(p*Tt),T=w(u*f),U=w(p*f),D=w(Tt*u);return new z(v,T,D,U)}const Dt=w(l*Z),dt=w(_*it),mt=w(V*m*at),St=w(K*nt),wt=w((l+_)*(Z+it)-Dt-dt),Bt=St-mt,Qe=St+mt,kt=w(dt-R*Dt),Ft=w(wt*Bt),Pn=w(Qe*kt),Nt=w(wt*kt),Mt=w(Bt*Qe);return new z(Ft,Pn,Mt,Nt)}subtract(x){return this.add(x.negate())}wNAF(x){return G.wNAFCached(this,L,x,z.normalizeZ)}multiply(x){const{p:R,f:m}=this.wNAF(N(x,n));return z.normalizeZ([R,m])[0]}multiplyUnsafe(x){let R=P(x);return R===He?H:this.equals(H)||R===Te?this:this.equals(q)?this.wNAF(R).p:G.unsafeLadder(this,R)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return G.unsafeLadder(this,n).is0()}toAffine(x){const{ex:R,ey:m,ez:l}=this,_=this.is0();x==null&&(x=_?Dc:e.inv(l));const K=w(R*x),V=w(m*x),Z=w(l*x);if(_)return{x:He,y:Te};if(Z!==Te)throw new Error("invZ was invalid");return{x:K,y:V}}clearCofactor(){const{h:x}=t;return x===Te?this:this.multiplyUnsafe(x)}static fromHex(x,R=!1){const{d:m,a:l}=t,_=e.BYTES;x=de("pointHex",x,_);const K=x.slice(),V=x[_-1];K[_-1]=V&-129;const Z=Hn(K);Z===He||(R?N(Z,y):N(Z,e.ORDER));const it=w(Z*Z),nt=w(it-Te),at=w(m*it-l);let{isValid:Dt,value:dt}=E(nt,at);if(!Dt)throw new Error("Point.fromHex: invalid y coordinate");const mt=(dt&Te)===Te,St=(V&128)!==0;if(!R&&dt===He&&St)throw new Error("Point.fromHex: x=0 and x_0=1");return St!==mt&&(dt=w(-dt)),z.fromAffine({x:dt,y:Z})}static fromPrivateKey(x){return Q(x).point}toRawBytes(){const{x,y:R}=this.toAffine(),m=cr(R,e.BYTES);return m[m.length-1]|=x&Te?128:0,m}toHex(){return Ln(this.toRawBytes())}}z.BASE=new z(t.Gx,t.Gy,Te,w(t.Gx*t.Gy)),z.ZERO=new z(He,Te,Te,He);const{BASE:q,ZERO:H}=z,G=po(z,a*8);function vt(b){return Pt(b,n)}function lt(b){return vt(Hn(b))}function Q(b){const x=a;b=de("private key",b,x);const R=de("hashed private key",i(b),2*x),m=C(R.slice(0,x)),l=R.slice(x,2*x),_=lt(m),K=q.multiply(_),V=K.toRawBytes();return{head:m,prefix:l,scalar:_,point:K,pointBytes:V}}function _t(b){return Q(b).pointBytes}function I(b=new Uint8Array,...x){const R=Cn(...x);return lt(i(k(R,de("context",b),!!s)))}function c(b,x,R={}){b=de("message",b),s&&(b=s(b));const{prefix:m,scalar:l,pointBytes:_}=Q(x),K=I(R.context,m,b),V=q.multiply(K).toRawBytes(),Z=I(R.context,V,_,b),it=vt(K+Z*l);P(it);const nt=Cn(V,cr(it,e.BYTES));return de("result",nt,a*2)}const d=zc;function g(b,x,R,m=d){const{context:l,zip215:_}=m,K=e.BYTES;b=de("signature",b,2*K),x=de("message",x),s&&(x=s(x));const V=Hn(b.slice(K,2*K));let Z,it,nt;try{Z=z.fromHex(R,_),it=z.fromHex(b.slice(0,K),_),nt=q.multiplyUnsafe(V)}catch{return!1}if(!_&&Z.isSmallOrder())return!1;const at=I(l,it.toRawBytes(),Z.toRawBytes(),x);return it.add(Z.multiplyUnsafe(at)).subtract(nt).clearCofactor().equals(z.ZERO)}return q._setWindowSize(8),{CURVE:t,getPublicKey:_t,sign:c,verify:g,ExtendedPoint:z,utils:{getExtendedPublicKey:Q,randomPrivateKey:()=>o(e.BYTES),precompute(b=8,x=z.BASE){return x._setWindowSize(b),x.multiply(BigInt(3)),x}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ts=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Wc=BigInt(1),Ls=BigInt(2);BigInt(3);const Hc=BigInt(5),Kc=BigInt(8);function jc(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=Vi,a=r*r%i*r%i,h=jt(a,Ls,i)*a%i,y=jt(h,Wc,i)*r%i,w=jt(y,Hc,i)*y%i,E=jt(w,t,i)*w%i,C=jt(E,e,i)*E%i,k=jt(C,n,i)*C%i,M=jt(k,s,i)*k%i,A=jt(M,s,i)*k%i,B=jt(A,t,i)*w%i;return{pow_p_5_8:jt(B,Ls,i)*r%i,b2:a}}function Gc(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Vc(r,t){const e=Vi,n=Pt(t*t*t,e),s=Pt(n*n*t,e),i=jc(r*s).pow_p_5_8;let o=Pt(r*n*i,e);const a=Pt(t*o*o,e),h=o,y=Pt(o*Ts,e),w=a===r,E=a===Pt(-r,e),C=a===Pt(-r*Ts,e);return w&&(o=h),(E||C)&&(o=y),Lc(o,e)&&(o=Pt(-o,e)),{isValid:w||E,value:o}}const Zc=lo(Vi,void 0,!0),Yc={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Zc,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Kc,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:mc,randomBytes:ro,adjustScalarBytes:Gc,uvRatio:Vc},Zi=$c(Yc);var Yi={exports:{}};const Xc={},Jc=Object.freeze(Object.defineProperty({__proto__:null,default:Xc},Symbol.toStringTag,{value:"Module"})),Qc=$i(Jc);Yi.exports;(function(r){(function(t,e){function n(I,c){if(!I)throw new Error(c||"Assertion failed")}function s(I,c){I.super_=c;var d=function(){};d.prototype=c.prototype,I.prototype=new d,I.prototype.constructor=I}function i(I,c,d){if(i.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(I||0,c||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Qc.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,d){return c.cmp(d)>0?c:d},i.min=function(c,d){return c.cmp(d)<0?c:d},i.prototype._init=function(c,d,g){if(typeof c=="number")return this._initNumber(c,d,g);if(typeof c=="object")return this._initArray(c,d,g);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var S=0;c[0]==="-"&&(S++,this.negative=1),S<c.length&&(d===16?this._parseHex(c,S,g):(this._parseBase(c,d,S),g==="le"&&this._initArray(this.toArray(),d,g)))},i.prototype._initNumber=function(c,d,g){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},i.prototype._initArray=function(c,d,g){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var b,x,R=0;if(g==="be")for(S=c.length-1,b=0;S>=0;S-=3)x=c[S]|c[S-1]<<8|c[S-2]<<16,this.words[b]|=x<<R&67108863,this.words[b+1]=x>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(g==="le")for(S=0,b=0;S<c.length;S+=3)x=c[S]|c[S+1]<<8|c[S+2]<<16,this.words[b]|=x<<R&67108863,this.words[b+1]=x>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this._strip()};function a(I,c){var d=I.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+I)}function h(I,c,d){var g=a(I,d);return d-1>=c&&(g|=a(I,d-1)<<4),g}i.prototype._parseHex=function(c,d,g){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var b=0,x=0,R;if(g==="be")for(S=c.length-1;S>=d;S-=2)R=h(c,d,S)<<b,this.words[x]|=R&67108863,b>=18?(b-=18,x+=1,this.words[x]|=R>>>26):b+=8;else{var m=c.length-d;for(S=m%2===0?d+1:d;S<c.length;S+=2)R=h(c,d,S)<<b,this.words[x]|=R&67108863,b>=18?(b-=18,x+=1,this.words[x]|=R>>>26):b+=8}this._strip()};function y(I,c,d,g){for(var S=0,b=0,x=Math.min(I.length,d),R=c;R<x;R++){var m=I.charCodeAt(R)-48;S*=g,m>=49?b=m-49+10:m>=17?b=m-17+10:b=m,n(m>=0&&b<g,"Invalid character"),S+=b}return S}i.prototype._parseBase=function(c,d,g){this.words=[0],this.length=1;for(var S=0,b=1;b<=67108863;b*=d)S++;S--,b=b/d|0;for(var x=c.length-g,R=x%S,m=Math.min(x,x-R)+g,l=0,_=g;_<m;_+=S)l=y(c,_,_+S,d),this.imuln(b),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(R!==0){var K=1;for(l=y(c,_,c.length,d),_=0;_<R;_++)K*=d;this.imuln(K),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function w(I,c){I.words=c.words,I.length=c.length,I.negative=c.negative,I.red=c.red}if(i.prototype._move=function(c){w(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,d){c=c||10,d=d|0||1;var g;if(c===16||c==="hex"){g="";for(var S=0,b=0,x=0;x<this.length;x++){var R=this.words[x],m=((R<<S|b)&16777215).toString(16);b=R>>>24-S&16777215,S+=2,S>=26&&(S-=26,x--),b!==0||x!==this.length-1?g=C[6-m.length]+m+g:g=m+g}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(c===(c|0)&&c>=2&&c<=36){var l=k[c],_=M[c];g="";var K=this.clone();for(K.negative=0;!K.isZero();){var V=K.modrn(_).toString(c);K=K.idivn(_),K.isZero()?g=V+g:g=C[l-V.length]+V+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),i.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var A=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};i.prototype.toArrayLike=function(c,d,g){this._strip();var S=this.byteLength(),b=g||Math.max(1,S);n(S<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0");var x=A(c,b),R=d==="le"?"LE":"BE";return this["_toArrayLike"+R](x,S),x},i.prototype._toArrayLikeLE=function(c,d){for(var g=0,S=0,b=0,x=0;b<this.length;b++){var R=this.words[b]<<x|S;c[g++]=R&255,g<c.length&&(c[g++]=R>>8&255),g<c.length&&(c[g++]=R>>16&255),x===6?(g<c.length&&(c[g++]=R>>24&255),S=0,x=0):(S=R>>>24,x+=2)}if(g<c.length)for(c[g++]=S;g<c.length;)c[g++]=0},i.prototype._toArrayLikeBE=function(c,d){for(var g=c.length-1,S=0,b=0,x=0;b<this.length;b++){var R=this.words[b]<<x|S;c[g--]=R&255,g>=0&&(c[g--]=R>>8&255),g>=0&&(c[g--]=R>>16&255),x===6?(g>=0&&(c[g--]=R>>24&255),S=0,x=0):(S=R>>>24,x+=2)}if(g>=0)for(c[g--]=S;g>=0;)c[g--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var d=c,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},i.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,g=0;return d&8191||(g+=13,d>>>=13),d&127||(g+=7,d>>>=7),d&15||(g+=4,d>>>=4),d&3||(g+=2,d>>>=2),d&1||g++,g},i.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function B(I){for(var c=new Array(I.bitLength()),d=0;d<c.length;d++){var g=d/26|0,S=d%26;c[d]=I.words[g]>>>S&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(c+=g,g!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&c.words[g];return this.length=d.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var d,g;this.length>c.length?(d=this,g=c):(d=c,g=this);for(var S=0;S<g.length;S++)this.words[S]=d.words[S]^g.words[S];if(this!==d)for(;S<d.length;S++)this.words[S]=d.words[S];return this.length=d.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,g=c%26;this._expand(d),g>0&&d--;for(var S=0;S<d;S++)this.words[S]=~this.words[S]&67108863;return g>0&&(this.words[S]=~this.words[S]&67108863>>26-g),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,d){n(typeof c=="number"&&c>=0);var g=c/26|0,S=c%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<S:this.words[g]=this.words[g]&~(1<<S),this._strip()},i.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var g,S;this.length>c.length?(g=this,S=c):(g=c,S=this);for(var b=0,x=0;x<S.length;x++)d=(g.words[x]|0)+(S.words[x]|0)+b,this.words[x]=d&67108863,b=d>>>26;for(;b!==0&&x<g.length;x++)d=(g.words[x]|0)+b,this.words[x]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;x<g.length;x++)this.words[x]=g.words[x];return this},i.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var g=this.cmp(c);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,b;g>0?(S=this,b=c):(S=c,b=this);for(var x=0,R=0;R<b.length;R++)d=(S.words[R]|0)-(b.words[R]|0)+x,x=d>>26,this.words[R]=d&67108863;for(;x!==0&&R<S.length;R++)d=(S.words[R]|0)+x,x=d>>26,this.words[R]=d&67108863;if(x===0&&R<S.length&&S!==this)for(;R<S.length;R++)this.words[R]=S.words[R];return this.length=Math.max(this.length,R),S!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function N(I,c,d){d.negative=c.negative^I.negative;var g=I.length+c.length|0;d.length=g,g=g-1|0;var S=I.words[0]|0,b=c.words[0]|0,x=S*b,R=x&67108863,m=x/67108864|0;d.words[0]=R;for(var l=1;l<g;l++){for(var _=m>>>26,K=m&67108863,V=Math.min(l,c.length-1),Z=Math.max(0,l-I.length+1);Z<=V;Z++){var it=l-Z|0;S=I.words[it]|0,b=c.words[Z]|0,x=S*b+K,_+=x/67108864|0,K=x&67108863}d.words[l]=K|0,m=_|0}return m!==0?d.words[l]=m|0:d.length--,d._strip()}var P=function(c,d,g){var S=c.words,b=d.words,x=g.words,R=0,m,l,_,K=S[0]|0,V=K&8191,Z=K>>>13,it=S[1]|0,nt=it&8191,at=it>>>13,Dt=S[2]|0,dt=Dt&8191,mt=Dt>>>13,St=S[3]|0,wt=St&8191,Bt=St>>>13,Qe=S[4]|0,kt=Qe&8191,Ft=Qe>>>13,Pn=S[5]|0,Nt=Pn&8191,Mt=Pn>>>13,xe=S[6]|0,Rt=xe&8191,Tt=xe>>>13,Me=S[7]|0,Ut=Me&8191,p=Me>>>13,u=S[8]|0,f=u&8191,v=u>>>13,T=S[9]|0,U=T&8191,D=T>>>13,pt=b[0]|0,ht=pt&8191,ut=pt>>>13,Ot=b[1]|0,ct=Ot&8191,Zt=Ot>>>13,ps=b[2]|0,Yt=ps&8191,Xt=ps>>>13,gs=b[3]|0,Jt=gs&8191,Qt=gs>>>13,ys=b[4]|0,te=ys&8191,ee=ys>>>13,ms=b[5]|0,ne=ms&8191,re=ms>>>13,ws=b[6]|0,ie=ws&8191,se=ws>>>13,bs=b[7]|0,oe=bs&8191,ae=bs>>>13,vs=b[8]|0,ce=vs&8191,ue=vs>>>13,xs=b[9]|0,le=xs&8191,fe=xs>>>13;g.negative=c.negative^d.negative,g.length=19,m=Math.imul(V,ht),l=Math.imul(V,ut),l=l+Math.imul(Z,ht)|0,_=Math.imul(Z,ut);var Vr=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,m=Math.imul(nt,ht),l=Math.imul(nt,ut),l=l+Math.imul(at,ht)|0,_=Math.imul(at,ut),m=m+Math.imul(V,ct)|0,l=l+Math.imul(V,Zt)|0,l=l+Math.imul(Z,ct)|0,_=_+Math.imul(Z,Zt)|0;var Zr=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,m=Math.imul(dt,ht),l=Math.imul(dt,ut),l=l+Math.imul(mt,ht)|0,_=Math.imul(mt,ut),m=m+Math.imul(nt,ct)|0,l=l+Math.imul(nt,Zt)|0,l=l+Math.imul(at,ct)|0,_=_+Math.imul(at,Zt)|0,m=m+Math.imul(V,Yt)|0,l=l+Math.imul(V,Xt)|0,l=l+Math.imul(Z,Yt)|0,_=_+Math.imul(Z,Xt)|0;var Yr=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(wt,ht),l=Math.imul(wt,ut),l=l+Math.imul(Bt,ht)|0,_=Math.imul(Bt,ut),m=m+Math.imul(dt,ct)|0,l=l+Math.imul(dt,Zt)|0,l=l+Math.imul(mt,ct)|0,_=_+Math.imul(mt,Zt)|0,m=m+Math.imul(nt,Yt)|0,l=l+Math.imul(nt,Xt)|0,l=l+Math.imul(at,Yt)|0,_=_+Math.imul(at,Xt)|0,m=m+Math.imul(V,Jt)|0,l=l+Math.imul(V,Qt)|0,l=l+Math.imul(Z,Jt)|0,_=_+Math.imul(Z,Qt)|0;var Xr=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,m=Math.imul(kt,ht),l=Math.imul(kt,ut),l=l+Math.imul(Ft,ht)|0,_=Math.imul(Ft,ut),m=m+Math.imul(wt,ct)|0,l=l+Math.imul(wt,Zt)|0,l=l+Math.imul(Bt,ct)|0,_=_+Math.imul(Bt,Zt)|0,m=m+Math.imul(dt,Yt)|0,l=l+Math.imul(dt,Xt)|0,l=l+Math.imul(mt,Yt)|0,_=_+Math.imul(mt,Xt)|0,m=m+Math.imul(nt,Jt)|0,l=l+Math.imul(nt,Qt)|0,l=l+Math.imul(at,Jt)|0,_=_+Math.imul(at,Qt)|0,m=m+Math.imul(V,te)|0,l=l+Math.imul(V,ee)|0,l=l+Math.imul(Z,te)|0,_=_+Math.imul(Z,ee)|0;var Jr=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,m=Math.imul(Nt,ht),l=Math.imul(Nt,ut),l=l+Math.imul(Mt,ht)|0,_=Math.imul(Mt,ut),m=m+Math.imul(kt,ct)|0,l=l+Math.imul(kt,Zt)|0,l=l+Math.imul(Ft,ct)|0,_=_+Math.imul(Ft,Zt)|0,m=m+Math.imul(wt,Yt)|0,l=l+Math.imul(wt,Xt)|0,l=l+Math.imul(Bt,Yt)|0,_=_+Math.imul(Bt,Xt)|0,m=m+Math.imul(dt,Jt)|0,l=l+Math.imul(dt,Qt)|0,l=l+Math.imul(mt,Jt)|0,_=_+Math.imul(mt,Qt)|0,m=m+Math.imul(nt,te)|0,l=l+Math.imul(nt,ee)|0,l=l+Math.imul(at,te)|0,_=_+Math.imul(at,ee)|0,m=m+Math.imul(V,ne)|0,l=l+Math.imul(V,re)|0,l=l+Math.imul(Z,ne)|0,_=_+Math.imul(Z,re)|0;var Qr=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,m=Math.imul(Rt,ht),l=Math.imul(Rt,ut),l=l+Math.imul(Tt,ht)|0,_=Math.imul(Tt,ut),m=m+Math.imul(Nt,ct)|0,l=l+Math.imul(Nt,Zt)|0,l=l+Math.imul(Mt,ct)|0,_=_+Math.imul(Mt,Zt)|0,m=m+Math.imul(kt,Yt)|0,l=l+Math.imul(kt,Xt)|0,l=l+Math.imul(Ft,Yt)|0,_=_+Math.imul(Ft,Xt)|0,m=m+Math.imul(wt,Jt)|0,l=l+Math.imul(wt,Qt)|0,l=l+Math.imul(Bt,Jt)|0,_=_+Math.imul(Bt,Qt)|0,m=m+Math.imul(dt,te)|0,l=l+Math.imul(dt,ee)|0,l=l+Math.imul(mt,te)|0,_=_+Math.imul(mt,ee)|0,m=m+Math.imul(nt,ne)|0,l=l+Math.imul(nt,re)|0,l=l+Math.imul(at,ne)|0,_=_+Math.imul(at,re)|0,m=m+Math.imul(V,ie)|0,l=l+Math.imul(V,se)|0,l=l+Math.imul(Z,ie)|0,_=_+Math.imul(Z,se)|0;var ti=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ti>>>26)|0,ti&=67108863,m=Math.imul(Ut,ht),l=Math.imul(Ut,ut),l=l+Math.imul(p,ht)|0,_=Math.imul(p,ut),m=m+Math.imul(Rt,ct)|0,l=l+Math.imul(Rt,Zt)|0,l=l+Math.imul(Tt,ct)|0,_=_+Math.imul(Tt,Zt)|0,m=m+Math.imul(Nt,Yt)|0,l=l+Math.imul(Nt,Xt)|0,l=l+Math.imul(Mt,Yt)|0,_=_+Math.imul(Mt,Xt)|0,m=m+Math.imul(kt,Jt)|0,l=l+Math.imul(kt,Qt)|0,l=l+Math.imul(Ft,Jt)|0,_=_+Math.imul(Ft,Qt)|0,m=m+Math.imul(wt,te)|0,l=l+Math.imul(wt,ee)|0,l=l+Math.imul(Bt,te)|0,_=_+Math.imul(Bt,ee)|0,m=m+Math.imul(dt,ne)|0,l=l+Math.imul(dt,re)|0,l=l+Math.imul(mt,ne)|0,_=_+Math.imul(mt,re)|0,m=m+Math.imul(nt,ie)|0,l=l+Math.imul(nt,se)|0,l=l+Math.imul(at,ie)|0,_=_+Math.imul(at,se)|0,m=m+Math.imul(V,oe)|0,l=l+Math.imul(V,ae)|0,l=l+Math.imul(Z,oe)|0,_=_+Math.imul(Z,ae)|0;var ei=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ei>>>26)|0,ei&=67108863,m=Math.imul(f,ht),l=Math.imul(f,ut),l=l+Math.imul(v,ht)|0,_=Math.imul(v,ut),m=m+Math.imul(Ut,ct)|0,l=l+Math.imul(Ut,Zt)|0,l=l+Math.imul(p,ct)|0,_=_+Math.imul(p,Zt)|0,m=m+Math.imul(Rt,Yt)|0,l=l+Math.imul(Rt,Xt)|0,l=l+Math.imul(Tt,Yt)|0,_=_+Math.imul(Tt,Xt)|0,m=m+Math.imul(Nt,Jt)|0,l=l+Math.imul(Nt,Qt)|0,l=l+Math.imul(Mt,Jt)|0,_=_+Math.imul(Mt,Qt)|0,m=m+Math.imul(kt,te)|0,l=l+Math.imul(kt,ee)|0,l=l+Math.imul(Ft,te)|0,_=_+Math.imul(Ft,ee)|0,m=m+Math.imul(wt,ne)|0,l=l+Math.imul(wt,re)|0,l=l+Math.imul(Bt,ne)|0,_=_+Math.imul(Bt,re)|0,m=m+Math.imul(dt,ie)|0,l=l+Math.imul(dt,se)|0,l=l+Math.imul(mt,ie)|0,_=_+Math.imul(mt,se)|0,m=m+Math.imul(nt,oe)|0,l=l+Math.imul(nt,ae)|0,l=l+Math.imul(at,oe)|0,_=_+Math.imul(at,ae)|0,m=m+Math.imul(V,ce)|0,l=l+Math.imul(V,ue)|0,l=l+Math.imul(Z,ce)|0,_=_+Math.imul(Z,ue)|0;var ni=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ni>>>26)|0,ni&=67108863,m=Math.imul(U,ht),l=Math.imul(U,ut),l=l+Math.imul(D,ht)|0,_=Math.imul(D,ut),m=m+Math.imul(f,ct)|0,l=l+Math.imul(f,Zt)|0,l=l+Math.imul(v,ct)|0,_=_+Math.imul(v,Zt)|0,m=m+Math.imul(Ut,Yt)|0,l=l+Math.imul(Ut,Xt)|0,l=l+Math.imul(p,Yt)|0,_=_+Math.imul(p,Xt)|0,m=m+Math.imul(Rt,Jt)|0,l=l+Math.imul(Rt,Qt)|0,l=l+Math.imul(Tt,Jt)|0,_=_+Math.imul(Tt,Qt)|0,m=m+Math.imul(Nt,te)|0,l=l+Math.imul(Nt,ee)|0,l=l+Math.imul(Mt,te)|0,_=_+Math.imul(Mt,ee)|0,m=m+Math.imul(kt,ne)|0,l=l+Math.imul(kt,re)|0,l=l+Math.imul(Ft,ne)|0,_=_+Math.imul(Ft,re)|0,m=m+Math.imul(wt,ie)|0,l=l+Math.imul(wt,se)|0,l=l+Math.imul(Bt,ie)|0,_=_+Math.imul(Bt,se)|0,m=m+Math.imul(dt,oe)|0,l=l+Math.imul(dt,ae)|0,l=l+Math.imul(mt,oe)|0,_=_+Math.imul(mt,ae)|0,m=m+Math.imul(nt,ce)|0,l=l+Math.imul(nt,ue)|0,l=l+Math.imul(at,ce)|0,_=_+Math.imul(at,ue)|0,m=m+Math.imul(V,le)|0,l=l+Math.imul(V,fe)|0,l=l+Math.imul(Z,le)|0,_=_+Math.imul(Z,fe)|0;var ri=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ri>>>26)|0,ri&=67108863,m=Math.imul(U,ct),l=Math.imul(U,Zt),l=l+Math.imul(D,ct)|0,_=Math.imul(D,Zt),m=m+Math.imul(f,Yt)|0,l=l+Math.imul(f,Xt)|0,l=l+Math.imul(v,Yt)|0,_=_+Math.imul(v,Xt)|0,m=m+Math.imul(Ut,Jt)|0,l=l+Math.imul(Ut,Qt)|0,l=l+Math.imul(p,Jt)|0,_=_+Math.imul(p,Qt)|0,m=m+Math.imul(Rt,te)|0,l=l+Math.imul(Rt,ee)|0,l=l+Math.imul(Tt,te)|0,_=_+Math.imul(Tt,ee)|0,m=m+Math.imul(Nt,ne)|0,l=l+Math.imul(Nt,re)|0,l=l+Math.imul(Mt,ne)|0,_=_+Math.imul(Mt,re)|0,m=m+Math.imul(kt,ie)|0,l=l+Math.imul(kt,se)|0,l=l+Math.imul(Ft,ie)|0,_=_+Math.imul(Ft,se)|0,m=m+Math.imul(wt,oe)|0,l=l+Math.imul(wt,ae)|0,l=l+Math.imul(Bt,oe)|0,_=_+Math.imul(Bt,ae)|0,m=m+Math.imul(dt,ce)|0,l=l+Math.imul(dt,ue)|0,l=l+Math.imul(mt,ce)|0,_=_+Math.imul(mt,ue)|0,m=m+Math.imul(nt,le)|0,l=l+Math.imul(nt,fe)|0,l=l+Math.imul(at,le)|0,_=_+Math.imul(at,fe)|0;var ii=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ii>>>26)|0,ii&=67108863,m=Math.imul(U,Yt),l=Math.imul(U,Xt),l=l+Math.imul(D,Yt)|0,_=Math.imul(D,Xt),m=m+Math.imul(f,Jt)|0,l=l+Math.imul(f,Qt)|0,l=l+Math.imul(v,Jt)|0,_=_+Math.imul(v,Qt)|0,m=m+Math.imul(Ut,te)|0,l=l+Math.imul(Ut,ee)|0,l=l+Math.imul(p,te)|0,_=_+Math.imul(p,ee)|0,m=m+Math.imul(Rt,ne)|0,l=l+Math.imul(Rt,re)|0,l=l+Math.imul(Tt,ne)|0,_=_+Math.imul(Tt,re)|0,m=m+Math.imul(Nt,ie)|0,l=l+Math.imul(Nt,se)|0,l=l+Math.imul(Mt,ie)|0,_=_+Math.imul(Mt,se)|0,m=m+Math.imul(kt,oe)|0,l=l+Math.imul(kt,ae)|0,l=l+Math.imul(Ft,oe)|0,_=_+Math.imul(Ft,ae)|0,m=m+Math.imul(wt,ce)|0,l=l+Math.imul(wt,ue)|0,l=l+Math.imul(Bt,ce)|0,_=_+Math.imul(Bt,ue)|0,m=m+Math.imul(dt,le)|0,l=l+Math.imul(dt,fe)|0,l=l+Math.imul(mt,le)|0,_=_+Math.imul(mt,fe)|0;var si=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(si>>>26)|0,si&=67108863,m=Math.imul(U,Jt),l=Math.imul(U,Qt),l=l+Math.imul(D,Jt)|0,_=Math.imul(D,Qt),m=m+Math.imul(f,te)|0,l=l+Math.imul(f,ee)|0,l=l+Math.imul(v,te)|0,_=_+Math.imul(v,ee)|0,m=m+Math.imul(Ut,ne)|0,l=l+Math.imul(Ut,re)|0,l=l+Math.imul(p,ne)|0,_=_+Math.imul(p,re)|0,m=m+Math.imul(Rt,ie)|0,l=l+Math.imul(Rt,se)|0,l=l+Math.imul(Tt,ie)|0,_=_+Math.imul(Tt,se)|0,m=m+Math.imul(Nt,oe)|0,l=l+Math.imul(Nt,ae)|0,l=l+Math.imul(Mt,oe)|0,_=_+Math.imul(Mt,ae)|0,m=m+Math.imul(kt,ce)|0,l=l+Math.imul(kt,ue)|0,l=l+Math.imul(Ft,ce)|0,_=_+Math.imul(Ft,ue)|0,m=m+Math.imul(wt,le)|0,l=l+Math.imul(wt,fe)|0,l=l+Math.imul(Bt,le)|0,_=_+Math.imul(Bt,fe)|0;var oi=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(oi>>>26)|0,oi&=67108863,m=Math.imul(U,te),l=Math.imul(U,ee),l=l+Math.imul(D,te)|0,_=Math.imul(D,ee),m=m+Math.imul(f,ne)|0,l=l+Math.imul(f,re)|0,l=l+Math.imul(v,ne)|0,_=_+Math.imul(v,re)|0,m=m+Math.imul(Ut,ie)|0,l=l+Math.imul(Ut,se)|0,l=l+Math.imul(p,ie)|0,_=_+Math.imul(p,se)|0,m=m+Math.imul(Rt,oe)|0,l=l+Math.imul(Rt,ae)|0,l=l+Math.imul(Tt,oe)|0,_=_+Math.imul(Tt,ae)|0,m=m+Math.imul(Nt,ce)|0,l=l+Math.imul(Nt,ue)|0,l=l+Math.imul(Mt,ce)|0,_=_+Math.imul(Mt,ue)|0,m=m+Math.imul(kt,le)|0,l=l+Math.imul(kt,fe)|0,l=l+Math.imul(Ft,le)|0,_=_+Math.imul(Ft,fe)|0;var ai=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ai>>>26)|0,ai&=67108863,m=Math.imul(U,ne),l=Math.imul(U,re),l=l+Math.imul(D,ne)|0,_=Math.imul(D,re),m=m+Math.imul(f,ie)|0,l=l+Math.imul(f,se)|0,l=l+Math.imul(v,ie)|0,_=_+Math.imul(v,se)|0,m=m+Math.imul(Ut,oe)|0,l=l+Math.imul(Ut,ae)|0,l=l+Math.imul(p,oe)|0,_=_+Math.imul(p,ae)|0,m=m+Math.imul(Rt,ce)|0,l=l+Math.imul(Rt,ue)|0,l=l+Math.imul(Tt,ce)|0,_=_+Math.imul(Tt,ue)|0,m=m+Math.imul(Nt,le)|0,l=l+Math.imul(Nt,fe)|0,l=l+Math.imul(Mt,le)|0,_=_+Math.imul(Mt,fe)|0;var ci=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ci>>>26)|0,ci&=67108863,m=Math.imul(U,ie),l=Math.imul(U,se),l=l+Math.imul(D,ie)|0,_=Math.imul(D,se),m=m+Math.imul(f,oe)|0,l=l+Math.imul(f,ae)|0,l=l+Math.imul(v,oe)|0,_=_+Math.imul(v,ae)|0,m=m+Math.imul(Ut,ce)|0,l=l+Math.imul(Ut,ue)|0,l=l+Math.imul(p,ce)|0,_=_+Math.imul(p,ue)|0,m=m+Math.imul(Rt,le)|0,l=l+Math.imul(Rt,fe)|0,l=l+Math.imul(Tt,le)|0,_=_+Math.imul(Tt,fe)|0;var ui=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(ui>>>26)|0,ui&=67108863,m=Math.imul(U,oe),l=Math.imul(U,ae),l=l+Math.imul(D,oe)|0,_=Math.imul(D,ae),m=m+Math.imul(f,ce)|0,l=l+Math.imul(f,ue)|0,l=l+Math.imul(v,ce)|0,_=_+Math.imul(v,ue)|0,m=m+Math.imul(Ut,le)|0,l=l+Math.imul(Ut,fe)|0,l=l+Math.imul(p,le)|0,_=_+Math.imul(p,fe)|0;var li=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(li>>>26)|0,li&=67108863,m=Math.imul(U,ce),l=Math.imul(U,ue),l=l+Math.imul(D,ce)|0,_=Math.imul(D,ue),m=m+Math.imul(f,le)|0,l=l+Math.imul(f,fe)|0,l=l+Math.imul(v,le)|0,_=_+Math.imul(v,fe)|0;var fi=(R+m|0)+((l&8191)<<13)|0;R=(_+(l>>>13)|0)+(fi>>>26)|0,fi&=67108863,m=Math.imul(U,le),l=Math.imul(U,fe),l=l+Math.imul(D,le)|0,_=Math.imul(D,fe);var hi=(R+m|0)+((l&8191)<<13)|0;return R=(_+(l>>>13)|0)+(hi>>>26)|0,hi&=67108863,x[0]=Vr,x[1]=Zr,x[2]=Yr,x[3]=Xr,x[4]=Jr,x[5]=Qr,x[6]=ti,x[7]=ei,x[8]=ni,x[9]=ri,x[10]=ii,x[11]=si,x[12]=oi,x[13]=ai,x[14]=ci,x[15]=ui,x[16]=li,x[17]=fi,x[18]=hi,R!==0&&(x[19]=R,g.length++),g};Math.imul||(P=N);function L(I,c,d){d.negative=c.negative^I.negative,d.length=I.length+c.length;for(var g=0,S=0,b=0;b<d.length-1;b++){var x=S;S=0;for(var R=g&67108863,m=Math.min(b,c.length-1),l=Math.max(0,b-I.length+1);l<=m;l++){var _=b-l,K=I.words[_]|0,V=c.words[l]|0,Z=K*V,it=Z&67108863;x=x+(Z/67108864|0)|0,it=it+R|0,R=it&67108863,x=x+(it>>>26)|0,S+=x>>>26,x&=67108863}d.words[b]=R,g=x,x=S}return g!==0?d.words[b]=g:d.length--,d._strip()}function W(I,c,d){return L(I,c,d)}i.prototype.mulTo=function(c,d){var g,S=this.length+c.length;return this.length===10&&c.length===10?g=P(this,c,d):S<63?g=N(this,c,d):S<1024?g=L(this,c,d):g=W(this,c,d),g},i.prototype.mul=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},i.prototype.mulf=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),W(this,c,d)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var d=c<0;d&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var g=0,S=0;S<this.length;S++){var b=(this.words[S]|0)*c,x=(b&67108863)+(g&67108863);g>>=26,g+=b/67108864|0,g+=x>>>26,this.words[S]=x&67108863}return g!==0&&(this.words[S]=g,this.length++),d?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var d=B(c);if(d.length===0)return new i(1);for(var g=this,S=0;S<d.length&&d[S]===0;S++,g=g.sqr());if(++S<d.length)for(var b=g.sqr();S<d.length;S++,b=b.sqr())d[S]!==0&&(g=g.mul(b));return g},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var d=c%26,g=(c-d)/26,S=67108863>>>26-d<<26-d,b;if(d!==0){var x=0;for(b=0;b<this.length;b++){var R=this.words[b]&S,m=(this.words[b]|0)-R<<d;this.words[b]=m|x,x=R>>>26-d}x&&(this.words[b]=x,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,d,g){n(typeof c=="number"&&c>=0);var S;d?S=(d-d%26)/26:S=0;var b=c%26,x=Math.min((c-b)/26,this.length),R=67108863^67108863>>>b<<b,m=g;if(S-=x,S=Math.max(0,S),m){for(var l=0;l<x;l++)m.words[l]=this.words[l];m.length=x}if(x!==0)if(this.length>x)for(this.length-=x,l=0;l<this.length;l++)this.words[l]=this.words[l+x];else this.words[0]=0,this.length=1;var _=0;for(l=this.length-1;l>=0&&(_!==0||l>=S);l--){var K=this.words[l]|0;this.words[l]=_<<26-b|K>>>b,_=K&R}return m&&_!==0&&(m.words[m.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,d,g){return n(this.negative===0),this.iushrn(c,d,g)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,g=(c-d)/26,S=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&S)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,g=(c-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var S=67108863^67108863>>>d<<d;this.words[this.length-1]&=S}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,d,g){var S=c.length+g,b;this._expand(S);var x,R=0;for(b=0;b<c.length;b++){x=(this.words[b+g]|0)+R;var m=(c.words[b]|0)*d;x-=m&67108863,R=(x>>26)-(m/67108864|0),this.words[b+g]=x&67108863}for(;b<this.length-g;b++)x=(this.words[b+g]|0)+R,R=x>>26,this.words[b+g]=x&67108863;if(R===0)return this._strip();for(n(R===-1),R=0,b=0;b<this.length;b++)x=-(this.words[b]|0)+R,R=x>>26,this.words[b]=x&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,d){var g=this.length-c.length,S=this.clone(),b=c,x=b.words[b.length-1]|0,R=this._countBits(x);g=26-R,g!==0&&(b=b.ushln(g),S.iushln(g),x=b.words[b.length-1]|0);var m=S.length-b.length,l;if(d!=="mod"){l=new i(null),l.length=m+1,l.words=new Array(l.length);for(var _=0;_<l.length;_++)l.words[_]=0}var K=S.clone()._ishlnsubmul(b,1,m);K.negative===0&&(S=K,l&&(l.words[m]=1));for(var V=m-1;V>=0;V--){var Z=(S.words[b.length+V]|0)*67108864+(S.words[b.length+V-1]|0);for(Z=Math.min(Z/x|0,67108863),S._ishlnsubmul(b,Z,V);S.negative!==0;)Z--,S.negative=0,S._ishlnsubmul(b,1,V),S.isZero()||(S.negative^=1);l&&(l.words[V]=Z)}return l&&l._strip(),S._strip(),d!=="div"&&g!==0&&S.iushrn(g),{div:l||null,mod:S}},i.prototype.divmod=function(c,d,g){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var S,b,x;return this.negative!==0&&c.negative===0?(x=this.neg().divmod(c,d),d!=="mod"&&(S=x.div.neg()),d!=="div"&&(b=x.mod.neg(),g&&b.negative!==0&&b.iadd(c)),{div:S,mod:b}):this.negative===0&&c.negative!==0?(x=this.divmod(c.neg(),d),d!=="mod"&&(S=x.div.neg()),{div:S,mod:x.mod}):this.negative&c.negative?(x=this.neg().divmod(c.neg(),d),d!=="div"&&(b=x.mod.neg(),g&&b.negative!==0&&b.isub(c)),{div:x.div,mod:b}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,d)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(c):d.mod,S=c.ushrn(1),b=c.andln(1),x=g.cmp(S);return x<0||b===1&&x===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var g=(1<<26)%c,S=0,b=this.length-1;b>=0;b--)S=(g*S+(this.words[b]|0))%c;return d?-S:S},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var g=0,S=this.length-1;S>=0;S--){var b=(this.words[S]|0)+g*67108864;this.words[S]=b/c|0,g=b%c}return this._strip(),d?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var d=this,g=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var S=new i(1),b=new i(0),x=new i(0),R=new i(1),m=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++m;for(var l=g.clone(),_=d.clone();!d.isZero();){for(var K=0,V=1;!(d.words[0]&V)&&K<26;++K,V<<=1);if(K>0)for(d.iushrn(K);K-- >0;)(S.isOdd()||b.isOdd())&&(S.iadd(l),b.isub(_)),S.iushrn(1),b.iushrn(1);for(var Z=0,it=1;!(g.words[0]&it)&&Z<26;++Z,it<<=1);if(Z>0)for(g.iushrn(Z);Z-- >0;)(x.isOdd()||R.isOdd())&&(x.iadd(l),R.isub(_)),x.iushrn(1),R.iushrn(1);d.cmp(g)>=0?(d.isub(g),S.isub(x),b.isub(R)):(g.isub(d),x.isub(S),R.isub(b))}return{a:x,b:R,gcd:g.iushln(m)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var d=this,g=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var S=new i(1),b=new i(0),x=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var R=0,m=1;!(d.words[0]&m)&&R<26;++R,m<<=1);if(R>0)for(d.iushrn(R);R-- >0;)S.isOdd()&&S.iadd(x),S.iushrn(1);for(var l=0,_=1;!(g.words[0]&_)&&l<26;++l,_<<=1);if(l>0)for(g.iushrn(l);l-- >0;)b.isOdd()&&b.iadd(x),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),S.isub(b)):(g.isub(d),b.isub(S))}var K;return d.cmpn(1)===0?K=S:K=b,K.cmpn(0)<0&&K.iadd(c),K},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),g=c.clone();d.negative=0,g.negative=0;for(var S=0;d.isEven()&&g.isEven();S++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var x=d;d=g,g=x}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(S)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var d=c%26,g=(c-d)/26,S=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=S,this;for(var b=S,x=g;b!==0&&x<this.length;x++){var R=this.words[x]|0;R+=b,b=R>>>26,R&=67108863,this.words[x]=R}return b!==0&&(this.words[x]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var g;if(this.length>1)g=1;else{d&&(c=-c),n(c<=67108863,"Number is too big");var S=this.words[0]|0;g=S===c?0:S<c?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var S=this.words[g]|0,b=c.words[g]|0;if(S!==b){S<b?d=-1:S>b&&(d=1);break}}return d},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new Q(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var z={k256:null,p224:null,p192:null,p25519:null};function q(I,c){this.name=I,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},q.prototype.ireduce=function(c){var d=c,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var S=g<this.n?-1:d.ucmp(this.p);return S===0?(d.words[0]=0,d.length=1):S>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},q.prototype.split=function(c,d){c.iushrn(this.n,0,d)},q.prototype.imulK=function(c){return c.imul(this.k)};function H(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(H,q),H.prototype.split=function(c,d){for(var g=4194303,S=Math.min(c.length,9),b=0;b<S;b++)d.words[b]=c.words[b];if(d.length=S,c.length<=9){c.words[0]=0,c.length=1;return}var x=c.words[9];for(d.words[d.length++]=x&g,b=10;b<c.length;b++){var R=c.words[b]|0;c.words[b-10]=(R&g)<<4|x>>>22,x=R}x>>>=22,c.words[b-10]=x,x===0&&c.length>10?c.length-=10:c.length-=9},H.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,g=0;g<c.length;g++){var S=c.words[g]|0;d+=S*977,c.words[g]=d&67108863,d=S*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function G(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(G,q);function vt(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(vt,q);function lt(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(lt,q),lt.prototype.imulK=function(c){for(var d=0,g=0;g<c.length;g++){var S=(c.words[g]|0)*19+d,b=S&67108863;S>>>=26,c.words[g]=b,d=S}return d!==0&&(c.words[c.length++]=d),c},i._prime=function(c){if(z[c])return z[c];var d;if(c==="k256")d=new H;else if(c==="p224")d=new G;else if(c==="p192")d=new vt;else if(c==="p25519")d=new lt;else throw new Error("Unknown prime "+c);return z[c]=d,d};function Q(I){if(typeof I=="string"){var c=i._prime(I);this.m=c.p,this.prime=c}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}Q.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},Q.prototype._verify2=function(c,d){n((c.negative|d.negative)===0,"red works only with positives"),n(c.red&&c.red===d.red,"red works only with red numbers")},Q.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(w(c,c.umod(this.m)._forceRed(this)),c)},Q.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},Q.prototype.add=function(c,d){this._verify2(c,d);var g=c.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},Q.prototype.iadd=function(c,d){this._verify2(c,d);var g=c.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},Q.prototype.sub=function(c,d){this._verify2(c,d);var g=c.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},Q.prototype.isub=function(c,d){this._verify2(c,d);var g=c.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},Q.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},Q.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},Q.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},Q.prototype.isqr=function(c){return this.imul(c,c.clone())},Q.prototype.sqr=function(c){return this.mul(c,c)},Q.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(c,g)}for(var S=this.m.subn(1),b=0;!S.isZero()&&S.andln(1)===0;)b++,S.iushrn(1);n(!S.isZero());var x=new i(1).toRed(this),R=x.redNeg(),m=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,m).cmp(R)!==0;)l.redIAdd(R);for(var _=this.pow(l,S),K=this.pow(c,S.addn(1).iushrn(1)),V=this.pow(c,S),Z=b;V.cmp(x)!==0;){for(var it=V,nt=0;it.cmp(x)!==0;nt++)it=it.redSqr();n(nt<Z);var at=this.pow(_,new i(1).iushln(Z-nt-1));K=K.redMul(at),_=at.redSqr(),V=V.redMul(_),Z=nt}return K},Q.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},Q.prototype.pow=function(c,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var g=4,S=new Array(1<<g);S[0]=new i(1).toRed(this),S[1]=c;for(var b=2;b<S.length;b++)S[b]=this.mul(S[b-1],c);var x=S[0],R=0,m=0,l=d.bitLength()%26;for(l===0&&(l=26),b=d.length-1;b>=0;b--){for(var _=d.words[b],K=l-1;K>=0;K--){var V=_>>K&1;if(x!==S[0]&&(x=this.sqr(x)),V===0&&R===0){m=0;continue}R<<=1,R|=V,m++,!(m!==g&&(b!==0||K!==0))&&(x=this.mul(x,S[R]),m=0,R=0)}l=26}return x},Q.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},Q.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},i.mont=function(c){return new _t(c)};function _t(I){Q.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(_t,Q),_t.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},_t.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},_t.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var g=c.imul(d),S=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(S).iushrn(this.shift),x=b;return b.cmp(this.m)>=0?x=b.isub(this.m):b.cmpn(0)<0&&(x=b.iadd(this.m)),x._forceRed(this)},_t.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new i(0)._forceRed(this);var g=c.mul(d),S=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(S).iushrn(this.shift),x=b;return b.cmp(this.m)>=0?x=b.isub(this.m):b.cmpn(0)<0&&(x=b.iadd(this.m)),x._forceRed(this)},_t.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,Ye)})(Yi);var go=Yi.exports;const Cs=hr(go);var Ci={exports:{}};(function(r,t){var e=ft,n=e.Buffer;function s(o,a){for(var h in o)a[h]=o[h]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,a,h){return n(o,a,h)}s(n,i),i.from=function(o,a,h){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,h)},i.alloc=function(o,a,h){if(typeof o!="number")throw new TypeError("Argument must be a number");var y=n(o);return a!==void 0?typeof h=="string"?y.fill(a,h):y.fill(a):y.fill(0),y},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Ci,Ci.exports);var yo=Ci.exports,vr=yo.Buffer;function tu(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),h=Math.log(o)/Math.log(256),y=Math.log(256)/Math.log(o);function w(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=vr.from(k)),!vr.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var M=0,A=0,B=0,N=k.length;B!==N&&k[B]===0;)B++,M++;for(var P=(N-B)*y+1>>>0,L=new Uint8Array(P);B!==N;){for(var W=k[B],z=0,q=P-1;(W!==0||z<A)&&q!==-1;q--,z++)W+=256*L[q]>>>0,L[q]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");A=z,B++}for(var H=P-A;H!==P&&L[H]===0;)H++;for(var G=a.repeat(M);H<P;++H)G+=r.charAt(L[H]);return G}function E(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return vr.alloc(0);for(var M=0,A=0,B=0;k[M]===a;)A++,M++;for(var N=(k.length-M)*h+1>>>0,P=new Uint8Array(N);M<k.length;){var L=t[k.charCodeAt(M)];if(L===255)return;for(var W=0,z=N-1;(L!==0||W<B)&&z!==-1;z--,W++)L+=o*P[z]>>>0,P[z]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");B=W,M++}for(var q=N-B;q!==N&&P[q]===0;)q++;var H=vr.allocUnsafe(A+(N-q));H.fill(0,0,A);for(var G=A;q!==N;)H[G++]=P[q++];return H}function C(k){var M=E(k);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:w,decodeUnsafe:E,decode:C}}var eu=tu,nu=eu,ru="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",iu=nu(ru);const ve=hr(iu),su=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mn=new Uint32Array(64);class ou extends io{constructor(){super(64,32,8,!1),this.A=yn[0]|0,this.B=yn[1]|0,this.C=yn[2]|0,this.D=yn[3]|0,this.E=yn[4]|0,this.F=yn[5]|0,this.G=yn[6]|0,this.H=yn[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:h}=this;return[t,e,n,s,i,o,a,h]}set(t,e,n,s,i,o,a,h){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=h|0}process(t,e){for(let E=0;E<16;E++,e+=4)mn[E]=t.getUint32(e,!1);for(let E=16;E<64;E++){const C=mn[E-15],k=mn[E-2],M=tn(C,7)^tn(C,18)^C>>>3,A=tn(k,17)^tn(k,19)^k>>>10;mn[E]=A+mn[E-7]+M+mn[E-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:h,G:y,H:w}=this;for(let E=0;E<64;E++){const C=tn(a,6)^tn(a,11)^tn(a,25),k=w+C+Ka(a,h,y)+su[E]+mn[E]|0,A=(tn(n,2)^tn(n,13)^tn(n,22))+ja(n,s,i)|0;w=y,y=h,h=a,a=o+k|0,o=i,i=s,s=n,n=k+A|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,h=h+this.F|0,y=y+this.G|0,w=w+this.H|0,this.set(n,s,i,o,a,h,y,w)}roundClean(){mn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ni=no(()=>new ou);var be={},xr=yo.Buffer;function au(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),h=Math.log(o)/Math.log(256),y=Math.log(256)/Math.log(o);function w(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=xr.from(k)),!xr.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var M=0,A=0,B=0,N=k.length;B!==N&&k[B]===0;)B++,M++;for(var P=(N-B)*y+1>>>0,L=new Uint8Array(P);B!==N;){for(var W=k[B],z=0,q=P-1;(W!==0||z<A)&&q!==-1;q--,z++)W+=256*L[q]>>>0,L[q]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");A=z,B++}for(var H=P-A;H!==P&&L[H]===0;)H++;for(var G=a.repeat(M);H<P;++H)G+=r.charAt(L[H]);return G}function E(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return xr.alloc(0);for(var M=0,A=0,B=0;k[M]===a;)A++,M++;for(var N=(k.length-M)*h+1>>>0,P=new Uint8Array(N);M<k.length;){var L=t[k.charCodeAt(M)];if(L===255)return;for(var W=0,z=N-1;(L!==0||W<B)&&z!==-1;z--,W++)L+=o*P[z]>>>0,P[z]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");B=W,M++}for(var q=N-B;q!==N&&P[q]===0;)q++;var H=xr.allocUnsafe(A+(N-q));H.fill(0,0,A);for(var G=A;q!==N;)H[G++]=P[q++];return H}function C(k){var M=E(k);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:w,decodeUnsafe:E,decode:C}}var cu=au,uu=cu,lu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",fu=uu(lu);function fn(r,t,e){return t<=r&&r<=e}function Dr(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function hu(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,h=o&1023;s.push(65536+(a<<10)+h),n+=1}else s.push(65533)}n+=1}return s}function du(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Ir=-1;function Xi(r){this.tokens=[].slice.call(r)}Xi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ir},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Vn=-1;function wi(r,t){if(r)throw TypeError("Decoder error");return t||65533}var kr="utf-8";function Mr(r,t){if(!(this instanceof Mr))return new Mr(r,t);if(r=r!==void 0?String(r).toLowerCase():kr,r!==kr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Dr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Mr.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Dr(e),this._streaming||(this._decoder=new pu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Xi(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Vn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Vn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),du(i)}};function Rr(r,t){if(!(this instanceof Rr))return new Rr(r,t);if(r=r!==void 0?String(r).toLowerCase():kr,r!==kr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Dr(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Rr.prototype={encode:function(t,e){t=t?String(t):"",e=Dr(e),this._streaming||(this._encoder=new gu(this._options)),this._streaming=!!e.stream;for(var n=[],s=new Xi(hu(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Vn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Vn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function pu(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(a,h){if(h===Ir&&s!==0)return s=0,wi(t);if(h===Ir)return Vn;if(s===0){if(fn(h,0,127))return h;if(fn(h,194,223))s=1,e=h-192;else if(fn(h,224,239))h===224&&(i=160),h===237&&(o=159),s=2,e=h-224;else if(fn(h,240,244))h===240&&(i=144),h===244&&(o=143),s=3,e=h-240;else return wi(t);return e=e<<6*s,null}if(!fn(h,i,o))return e=s=n=0,i=128,o=191,a.prepend(h),wi(t);if(i=128,o=191,n+=1,e+=h-128<<6*(s-n),n!==s)return null;var y=e;return e=s=n=0,y}}function gu(r){r.fatal,this.handler=function(t,e){if(e===Ir)return Vn;if(fn(e,0,127))return e;var n,s;fn(e,128,2047)?(n=1,s=192):fn(e,2048,65535)?(n=2,s=224):fn(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const yu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Mr,TextEncoder:Rr},Symbol.toStringTag,{value:"Module"})),mu=$i(yu);var wu=Ye&&Ye.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),bu=Ye&&Ye.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),an=Ye&&Ye.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},vu=Ye&&Ye.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&wu(t,r,e);return bu(t,r),t},mo=Ye&&Ye.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});var wo=be.deserializeUnchecked=_o=be.deserialize=Eo=be.serialize=be.BinaryReader=be.BinaryWriter=be.BorshError=be.baseDecode=be.baseEncode=void 0;const bn=mo(go),bo=mo(fu),xu=vu(mu),Su=typeof TextDecoder!="function"?xu.TextDecoder:TextDecoder,Eu=new Su("utf-8",{fatal:!0});function _u(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),bo.default.encode(Buffer.from(r))}be.baseEncode=_u;function Bu(r){return Buffer.from(bo.default.decode(r))}be.baseDecode=Bu;const bi=1024;class Ae extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}be.BorshError=Ae;class vo{constructor(){this.buf=Buffer.alloc(bi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(bi)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(bi)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}be.BinaryWriter=vo;function cn(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Ae("Reached the end of buffer when deserializing")}throw i}}}class Ce{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new bn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new bn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new bn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new bn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Ae(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Eu.decode(e)}catch(n){throw new Ae(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}an([cn],Ce.prototype,"readU8",null);an([cn],Ce.prototype,"readU16",null);an([cn],Ce.prototype,"readU32",null);an([cn],Ce.prototype,"readU64",null);an([cn],Ce.prototype,"readU128",null);an([cn],Ce.prototype,"readU256",null);an([cn],Ce.prototype,"readU512",null);an([cn],Ce.prototype,"readString",null);an([cn],Ce.prototype,"readFixedArray",null);an([cn],Ce.prototype,"readArray",null);be.BinaryReader=Ce;function xo(r){return r.charAt(0).toUpperCase()+r.slice(1)}function An(r,t,e,n,s){try{if(typeof n=="string")s[`write${xo(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new Ae(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new Ae(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)An(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{An(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),An(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{An(r,t,o,n.key,s),An(r,t,i,n.value,s)});break}default:throw new Ae(`FieldType ${n} unrecognized`)}else So(r,e,s)}catch(i){throw i instanceof Ae&&i.addToFieldPath(t),i}}function So(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new Ae(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{An(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,a]=n.values[i];if(o===s){e.writeU8(i),An(r,o,t[o],a,e);break}}}else throw new Ae(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Au(r,t,e=vo){const n=new e;return So(r,t,n),n.toArray()}var Eo=be.serialize=Au;function In(r,t,e,n){try{if(typeof e=="string")return n[`read${xo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(In(r,null,e[0],n));return s}else return n.readArray(()=>In(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?In(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const a=In(r,t,e.key,n),h=In(r,t,e.value,n);s.set(a,h)}return s}return Ji(r,e,n)}catch(s){throw s instanceof Ae&&s.addToFieldPath(t),s}}function Ji(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new Ae(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(t).fields)s[i]=In(r,i,o,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new Ae(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],a=In(r,i,o,e);return new t({[i]:a})}throw new Ae(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Iu(r,t,e,n=Ce){const s=new n(e),i=Ji(r,t,s);if(s.offset<e.length)throw new Ae(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var _o=be.deserialize=Iu;function ku(r,t,e,n=Ce){const s=new n(e);return Ji(r,t,s)}wo=be.deserializeUnchecked=ku;var F={};Object.defineProperty(F,"__esModule",{value:!0});F.s16=F.s8=F.nu64be=F.u48be=F.u40be=F.u32be=F.u24be=F.u16be=me=F.nu64=F.u48=F.u40=rt=F.u32=F.u24=Pe=F.u16=Et=F.u8=Rn=F.offset=F.greedy=F.Constant=F.UTF8=F.CString=F.Blob=F.Boolean=F.BitField=F.BitStructure=F.VariantLayout=F.Union=F.UnionLayoutDiscriminator=F.UnionDiscriminator=F.Structure=F.Sequence=F.DoubleBE=F.Double=F.FloatBE=F.Float=F.NearInt64BE=F.NearInt64=F.NearUInt64BE=F.NearUInt64=F.IntBE=F.Int=F.UIntBE=F.UInt=F.OffsetLayout=F.GreedyCount=F.ExternalLayout=F.bindConstructorLayout=F.nameWithProperty=F.Layout=F.uint8ArrayToBuffer=F.checkUint8Array=void 0;F.constant=F.utf8=F.cstr=Gt=F.blob=F.unionLayoutDiscriminator=F.union=Ie=F.seq=F.bits=tt=F.struct=F.f64be=F.f64=F.f32be=F.f32=F.ns64be=F.s48be=F.s40be=F.s32be=F.s24be=F.s16be=Le=F.ns64=F.s48=F.s40=F.s32=F.s24=void 0;const Qi=ft;function Xn(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}F.checkUint8Array=Xn;function xt(r){return Xn(r),Qi.Buffer.from(r.buffer,r.byteOffset,r.length)}F.uint8ArrayToBuffer=xt;class It{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}F.Layout=It;function ts(r,t){return t.property?r+"["+t.property+"]":r}F.nameWithProperty=ts;function Mu(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof It))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}F.bindConstructorLayout=Mu;class Re extends It{isCount(){throw new Error("ExternalLayout is abstract")}}F.ExternalLayout=Re;class Bo extends Re{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Xn(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}F.GreedyCount=Bo;class es extends Re{constructor(t,e=0,n){if(!(t instanceof It))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof We||this.layout instanceof Ze}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}F.OffsetLayout=es;class We extends It{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readUIntLE(e,this.span)}encode(t,e,n=0){return xt(e).writeUIntLE(t,n,this.span),this.span}}F.UInt=We;class Ze extends It{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readUIntBE(e,this.span)}encode(t,e,n=0){return xt(e).writeUIntBE(t,n,this.span),this.span}}F.UIntBE=Ze;class Nn extends It{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readIntLE(e,this.span)}encode(t,e,n=0){return xt(e).writeIntLE(t,n,this.span),this.span}}F.Int=Nn;class Jn extends It{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readIntBE(e,this.span)}encode(t,e,n=0){return xt(e).writeIntBE(t,n,this.span),this.span}}F.IntBE=Jn;const Ui=Math.pow(2,32);function zr(r){const t=Math.floor(r/Ui),e=r-t*Ui;return{hi32:t,lo32:e}}function qr(r,t){return r*Ui+t}class Ao extends It{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return qr(i,s)}encode(t,e,n=0){const s=zr(t),i=xt(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}F.NearUInt64=Ao;class Io extends It{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return qr(s,i)}encode(t,e,n=0){const s=zr(t),i=xt(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}F.NearUInt64BE=Io;class ko extends It{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return qr(i,s)}encode(t,e,n=0){const s=zr(t),i=xt(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}F.NearInt64=ko;class Mo extends It{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return qr(s,i)}encode(t,e,n=0){const s=zr(t),i=xt(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}F.NearInt64BE=Mo;class Ro extends It{constructor(t){super(4,t)}decode(t,e=0){return xt(t).readFloatLE(e)}encode(t,e,n=0){return xt(e).writeFloatLE(t,n),4}}F.Float=Ro;class To extends It{constructor(t){super(4,t)}decode(t,e=0){return xt(t).readFloatBE(e)}encode(t,e,n=0){return xt(e).writeFloatBE(t,n),4}}F.FloatBE=To;class Lo extends It{constructor(t){super(8,t)}decode(t,e=0){return xt(t).readDoubleLE(e)}encode(t,e,n=0){return xt(e).writeDoubleLE(t,n),8}}F.Double=Lo;class Co extends It{constructor(t){super(8,t)}decode(t,e=0){return xt(t).readDoubleBE(e)}encode(t,e,n=0){return xt(e).writeDoubleBE(t,n),8}}F.DoubleBE=Co;class No extends It{constructor(t,e,n){if(!(t instanceof It))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Re&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Re)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Re&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof Re&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((o,a)=>o+s.encode(a,e,n+o),0);return this.count instanceof Re&&this.count.encode(t.length,e,n),i}}F.Sequence=No;class Uo extends It{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof It,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){Xn(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,o=0;for(const a of this.fields){let h=a.span;if(o=0<h?h:0,a.property!==void 0){const y=t[a.property];y!==void 0&&(o=a.encode(y,e,n),0>h&&(h=a.getSpan(e,n)))}i=n,n+=h}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}F.Structure=Uo;class ns{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}F.UnionDiscriminator=ns;class Tr extends ns{constructor(t,e){if(!(t instanceof Re&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}F.UnionLayoutDiscriminator=Tr;class rs extends It{constructor(t,e,n){let s;if(t instanceof We||t instanceof Ze)s=new Tr(new es(t));else if(t instanceof Re&&t.isCount())s=new Tr(t);else if(t instanceof ns)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof It))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof We||t instanceof Ze)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof We||t instanceof Ze,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let h=0;this.usesPrefixDiscriminator&&(h=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[a.property]=a.decode(t,e+h)}else n=o.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(t[i.property],e,n),a+o.encode(t[o.property],e,n+a)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new Oo(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}F.Union=rs;class Oo extends It{constructor(t,e,n,s){if(!(t instanceof rs))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof It))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}F.VariantLayout=Oo;function zn(r){return 0>r&&(r+=4294967296),r}class is extends It{constructor(t,e,n){if(!(t instanceof We||t instanceof Ze))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=zn(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new ss(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Fo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}F.BitStructure=is;class ss{constructor(t,e,n){if(!(t instanceof is))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,a)=>o+a.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=zn(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return zn(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==zn(t&this.valueMask))throw new TypeError(ts("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=zn(t<<this.start);this.container._packedSetValue(zn(e&~this.wordMask)|n)}}F.BitField=ss;let Fo=class extends ss{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};F.Boolean=Fo;class Po extends It{constructor(t,e){if(!(t instanceof Re&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Re||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),xt(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof Re&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(ts("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=xt(t);return xt(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof Re&&this.length.encode(s,e,n),s}}F.Blob=Po;class Do extends It{constructor(t){super(-1,t)}getSpan(t,e=0){Xn(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return xt(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Qi.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=xt(e);return s.copy(o,n),o[n+i]=0,i+1}}F.CString=Do;class zo extends It{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Xn(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return xt(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Qi.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(xt(e),n),i}}F.UTF8=zo;class qo extends It{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}F.Constant=qo;F.greedy=(r,t)=>new Bo(r,t);var Rn=F.offset=(r,t,e)=>new es(r,t,e),Et=F.u8=r=>new We(1,r),Pe=F.u16=r=>new We(2,r);F.u24=r=>new We(3,r);var rt=F.u32=r=>new We(4,r);F.u40=r=>new We(5,r);F.u48=r=>new We(6,r);var me=F.nu64=r=>new Ao(r);F.u16be=r=>new Ze(2,r);F.u24be=r=>new Ze(3,r);F.u32be=r=>new Ze(4,r);F.u40be=r=>new Ze(5,r);F.u48be=r=>new Ze(6,r);F.nu64be=r=>new Io(r);F.s8=r=>new Nn(1,r);F.s16=r=>new Nn(2,r);F.s24=r=>new Nn(3,r);F.s32=r=>new Nn(4,r);F.s40=r=>new Nn(5,r);F.s48=r=>new Nn(6,r);var Le=F.ns64=r=>new ko(r);F.s16be=r=>new Jn(2,r);F.s24be=r=>new Jn(3,r);F.s32be=r=>new Jn(4,r);F.s40be=r=>new Jn(5,r);F.s48be=r=>new Jn(6,r);F.ns64be=r=>new Mo(r);F.f32=r=>new Ro(r);F.f32be=r=>new To(r);F.f64=r=>new Lo(r);F.f64be=r=>new Co(r);var tt=F.struct=(r,t,e)=>new Uo(r,t,e);F.bits=(r,t,e)=>new is(r,t,e);var Ie=F.seq=(r,t,e)=>new No(r,t,e);F.union=(r,t,e)=>new rs(r,t,e);F.unionLayoutDiscriminator=(r,t)=>new Tr(r,t);var Gt=F.blob=(r,t)=>new Po(r,t);F.cstr=r=>new Do(r);F.utf8=(r,t)=>new zo(r,t);F.constant=(r,t)=>new qo(r,t);var pr={};Object.defineProperty(pr,"__esModule",{value:!0});function Ru(r){{const t=Buffer.from(r);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Tu=pr.toBigIntLE=Ru;function Lu(r){{const t=r.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}pr.toBigIntBE=Lu;function Cu(r,t){{const e=r.toString(16),n=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}}var Nu=pr.toBufferLE=Cu;function Uu(r,t){{const e=r.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}pr.toBufferBE=Uu;class Ou extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,h=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??h),i!=null&&(this.cause=h),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function Fu(r){return gr(r)&&typeof r[Symbol.iterator]=="function"}function gr(r){return typeof r=="object"&&r!=null}function Lr(r){return gr(r)&&!Array.isArray(r)}function Xe(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Pu(r){const{done:t,value:e}=r.next();return t?void 0:e}function Du(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:a,message:h=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Xe(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:h}}function*Ns(r,t,e,n){Fu(r)||(r=[r]);for(const s of r){const i=Du(s,t,e,n);i&&(yield i)}}function*os(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,a={path:n,branch:s,mask:o};i&&(r=t.coercer(r,a));let h="valid";for(const y of t.validator(r,a))y.explanation=e.message,h="not_valid",yield[y,void 0];for(let[y,w,E]of t.entries(r,a)){const C=os(w,E,{path:y===void 0?n:[...n,y],branch:y===void 0?s:[...s,w],coerce:i,mask:o,message:e.message});for(const k of C)k[0]?(h=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):i&&(w=k[1],y===void 0?r=w:r instanceof Map?r.set(y,w):r instanceof Set?r.add(w):gr(r)&&(w!==void 0||y in r)&&(r[y]=w))}if(h!=="not_valid")for(const y of t.refiner(r,a))y.explanation=e.message,h="not_refined",yield[y,void 0];h==="valid"&&(yield[void 0,r])}let un=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=h=>h,entries:a=function*(){}}=t;this.type=e,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(h,y)=>{const w=s(h,y);return Ns(w,y,this,h)}:this.validator=()=>[],i?this.refiner=(h,y)=>{const w=i(h,y);return Ns(w,y,this,h)}:this.refiner=()=>[]}assert(t,e){return zu(t,this,e)}create(t,e){return Y(t,this,e)}is(t){return $o(t,this)}mask(t,e){return qu(t,this,e)}validate(t,e={}){return yr(t,this,e)}};function zu(r,t,e){const n=yr(r,t,{message:e});if(n[0])throw n[0]}function Y(r,t,e){const n=yr(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function qu(r,t,e){const n=yr(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function $o(r,t){return!yr(r,t)[0]}function yr(r,t,e={}){const n=os(r,t,e),s=Pu(n);return s[0]?[new Ou(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Un(r,t){return new un({type:r,schema:null,validator:t})}function $u(){return Un("any",()=>!0)}function X(r){return new un({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Xe(t)}`}})}function on(){return Un("boolean",r=>typeof r=="boolean")}function as(r){return Un("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${Xe(t)}`)}function Wt(r){const t=Xe(r),e=typeof r;return new un({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${Xe(n)}`}})}function Wu(){return Un("never",()=>!1)}function J(r){return new un({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function O(){return Un("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Xe(r)}`)}function st(r){return new un({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Wo(r,t){return new un({type:"record",schema:null,*entries(e){if(gr(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return Lr(e)||`Expected an object, but received: ${Xe(e)}`},coercer(e){return Lr(e)?{...e}:e}})}function j(){return Un("string",r=>typeof r=="string"||`Expected a string, but received: ${Xe(r)}`)}function cs(r){const t=Wu();return new un({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Xe(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function $(r){const t=Object.keys(r);return new un({type:"type",schema:r,*entries(e){if(gr(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return Lr(e)||`Expected an object, but received: ${Xe(e)}`},coercer(e){return Lr(e)?{...e}:e}})}function ke(r){const t=r.map(e=>e.type).join(" | ");return new un({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=os(e,i,n),[a]=o;if(a[0])for(const[h]of o)h&&s.push(h);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Xe(e)}`,...s]}})}function Qn(){return Un("unknown",()=>!0)}function mr(r,t,e){return new un({...r,coercer:(n,s)=>$o(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var Sr,Hu=new Uint8Array(16);function Ho(){if(!Sr&&(Sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sr(Hu)}const Ku=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $r(r){return typeof r=="string"&&Ku.test(r)}var ye=[];for(var vi=0;vi<256;++vi)ye.push((vi+256).toString(16).substr(1));function Wr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ye[r[t+0]]+ye[r[t+1]]+ye[r[t+2]]+ye[r[t+3]]+"-"+ye[r[t+4]]+ye[r[t+5]]+"-"+ye[r[t+6]]+ye[r[t+7]]+"-"+ye[r[t+8]]+ye[r[t+9]]+"-"+ye[r[t+10]]+ye[r[t+11]]+ye[r[t+12]]+ye[r[t+13]]+ye[r[t+14]]+ye[r[t+15]]).toLowerCase();if(!$r(e))throw TypeError("Stringified UUID is invalid");return e}var Us,xi,Si=0,Ei=0;function ju(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||Us,o=r.clockseq!==void 0?r.clockseq:xi;if(i==null||o==null){var a=r.random||(r.rng||Ho)();i==null&&(i=Us=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=xi=(a[6]<<8|a[7])&16383)}var h=r.msecs!==void 0?r.msecs:Date.now(),y=r.nsecs!==void 0?r.nsecs:Ei+1,w=h-Si+(y-Ei)/1e4;if(w<0&&r.clockseq===void 0&&(o=o+1&16383),(w<0||h>Si)&&r.nsecs===void 0&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Si=h,Ei=y,xi=o,h+=122192928e5;var E=((h&268435455)*1e4+y)%4294967296;s[n++]=E>>>24&255,s[n++]=E>>>16&255,s[n++]=E>>>8&255,s[n++]=E&255;var C=h/4294967296*1e4&268435455;s[n++]=C>>>8&255,s[n++]=C&255,s[n++]=C>>>24&15|16,s[n++]=C>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var k=0;k<6;++k)s[n+k]=i[k];return t||Wr(s)}function Ko(r){if(!$r(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Gu(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var Vu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Zu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function jo(r,t,e){function n(s,i,o,a){if(typeof s=="string"&&(s=Gu(s)),typeof i=="string"&&(i=Ko(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(i),h.set(s,i.length),h=e(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,o){a=a||0;for(var y=0;y<16;++y)o[a+y]=h[y];return o}return Wr(h)}try{n.name=r}catch{}return n.DNS=Vu,n.URL=Zu,n}function Yu(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Xu(Ju(Qu(r),r.length*8))}function Xu(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Go(r){return(r+64>>>9<<4)+14+1}function Ju(r,t){r[t>>5]|=128<<t%32,r[Go(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=e,h=n,y=s,w=i;e=Se(e,n,s,i,r[o],7,-680876936),i=Se(i,e,n,s,r[o+1],12,-389564586),s=Se(s,i,e,n,r[o+2],17,606105819),n=Se(n,s,i,e,r[o+3],22,-1044525330),e=Se(e,n,s,i,r[o+4],7,-176418897),i=Se(i,e,n,s,r[o+5],12,1200080426),s=Se(s,i,e,n,r[o+6],17,-1473231341),n=Se(n,s,i,e,r[o+7],22,-45705983),e=Se(e,n,s,i,r[o+8],7,1770035416),i=Se(i,e,n,s,r[o+9],12,-1958414417),s=Se(s,i,e,n,r[o+10],17,-42063),n=Se(n,s,i,e,r[o+11],22,-1990404162),e=Se(e,n,s,i,r[o+12],7,1804603682),i=Se(i,e,n,s,r[o+13],12,-40341101),s=Se(s,i,e,n,r[o+14],17,-1502002290),n=Se(n,s,i,e,r[o+15],22,1236535329),e=Ee(e,n,s,i,r[o+1],5,-165796510),i=Ee(i,e,n,s,r[o+6],9,-1069501632),s=Ee(s,i,e,n,r[o+11],14,643717713),n=Ee(n,s,i,e,r[o],20,-373897302),e=Ee(e,n,s,i,r[o+5],5,-701558691),i=Ee(i,e,n,s,r[o+10],9,38016083),s=Ee(s,i,e,n,r[o+15],14,-660478335),n=Ee(n,s,i,e,r[o+4],20,-405537848),e=Ee(e,n,s,i,r[o+9],5,568446438),i=Ee(i,e,n,s,r[o+14],9,-1019803690),s=Ee(s,i,e,n,r[o+3],14,-187363961),n=Ee(n,s,i,e,r[o+8],20,1163531501),e=Ee(e,n,s,i,r[o+13],5,-1444681467),i=Ee(i,e,n,s,r[o+2],9,-51403784),s=Ee(s,i,e,n,r[o+7],14,1735328473),n=Ee(n,s,i,e,r[o+12],20,-1926607734),e=_e(e,n,s,i,r[o+5],4,-378558),i=_e(i,e,n,s,r[o+8],11,-2022574463),s=_e(s,i,e,n,r[o+11],16,1839030562),n=_e(n,s,i,e,r[o+14],23,-35309556),e=_e(e,n,s,i,r[o+1],4,-1530992060),i=_e(i,e,n,s,r[o+4],11,1272893353),s=_e(s,i,e,n,r[o+7],16,-155497632),n=_e(n,s,i,e,r[o+10],23,-1094730640),e=_e(e,n,s,i,r[o+13],4,681279174),i=_e(i,e,n,s,r[o],11,-358537222),s=_e(s,i,e,n,r[o+3],16,-722521979),n=_e(n,s,i,e,r[o+6],23,76029189),e=_e(e,n,s,i,r[o+9],4,-640364487),i=_e(i,e,n,s,r[o+12],11,-421815835),s=_e(s,i,e,n,r[o+15],16,530742520),n=_e(n,s,i,e,r[o+2],23,-995338651),e=Be(e,n,s,i,r[o],6,-198630844),i=Be(i,e,n,s,r[o+7],10,1126891415),s=Be(s,i,e,n,r[o+14],15,-1416354905),n=Be(n,s,i,e,r[o+5],21,-57434055),e=Be(e,n,s,i,r[o+12],6,1700485571),i=Be(i,e,n,s,r[o+3],10,-1894986606),s=Be(s,i,e,n,r[o+10],15,-1051523),n=Be(n,s,i,e,r[o+1],21,-2054922799),e=Be(e,n,s,i,r[o+8],6,1873313359),i=Be(i,e,n,s,r[o+15],10,-30611744),s=Be(s,i,e,n,r[o+6],15,-1560198380),n=Be(n,s,i,e,r[o+13],21,1309151649),e=Be(e,n,s,i,r[o+4],6,-145523070),i=Be(i,e,n,s,r[o+11],10,-1120210379),s=Be(s,i,e,n,r[o+2],15,718787259),n=Be(n,s,i,e,r[o+9],21,-343485551),e=vn(e,a),n=vn(n,h),s=vn(s,y),i=vn(i,w)}return[e,n,s,i]}function Qu(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Go(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function vn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function tl(r,t){return r<<t|r>>>32-t}function Hr(r,t,e,n,s,i){return vn(tl(vn(vn(t,r),vn(n,i)),s),e)}function Se(r,t,e,n,s,i,o){return Hr(t&e|~t&n,r,t,s,i,o)}function Ee(r,t,e,n,s,i,o){return Hr(t&n|e&~n,r,t,s,i,o)}function _e(r,t,e,n,s,i,o){return Hr(t^e^n,r,t,s,i,o)}function Be(r,t,e,n,s,i,o){return Hr(e^(t|~n),r,t,s,i,o)}var el=jo("v3",48,Yu);const nl=el;function rl(r,t,e){r=r||{};var n=r.random||(r.rng||Ho)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Wr(n)}function il(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function _i(r,t){return r<<t|r>>>32-t}function sl(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),h=0;h<o;++h){for(var y=new Uint32Array(16),w=0;w<16;++w)y[w]=r[h*64+w*4]<<24|r[h*64+w*4+1]<<16|r[h*64+w*4+2]<<8|r[h*64+w*4+3];a[h]=y}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var E=0;E<o;++E){for(var C=new Uint32Array(80),k=0;k<16;++k)C[k]=a[E][k];for(var M=16;M<80;++M)C[M]=_i(C[M-3]^C[M-8]^C[M-14]^C[M-16],1);for(var A=e[0],B=e[1],N=e[2],P=e[3],L=e[4],W=0;W<80;++W){var z=Math.floor(W/20),q=_i(A,5)+il(z,B,N,P)+L+t[z]+C[W]>>>0;L=P,P=N,N=_i(B,30)>>>0,B=A,A=q}e[0]=e[0]+A>>>0,e[1]=e[1]+B>>>0,e[2]=e[2]+N>>>0,e[3]=e[3]+P>>>0,e[4]=e[4]+L>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var ol=jo("v5",80,sl);const al=ol,cl="00000000-0000-0000-0000-000000000000";function ul(r){if(!$r(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const ll=Object.freeze(Object.defineProperty({__proto__:null,NIL:cl,parse:Ko,stringify:Wr,v1:ju,v3:nl,v4:rl,v5:al,validate:$r,version:ul},Symbol.toStringTag,{value:"Module"})),Vo=$i(ll),fl=Vo.v4,hl=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return fl()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};var dl=hl;const pl=Vo.v4,gl=dl,ur=function(r,t){if(!(this instanceof ur))return new ur(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return pl()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var yl=ur;ur.prototype.request=function(r,t,e,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const y=typeof n=="function";try{i=gl(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(w){if(y)return n(w);throw w}if(!y)return i}let h;try{h=JSON.stringify(i,this.options.replacer)}catch(y){return n(y)}return this.callServer(h,function(y,w){s._parseResponse(y,w,n)}),i};ur.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};const ml=hr(yl);var Zo={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(h,y,w){this.fn=h,this.context=y,this.once=w||!1}function i(h,y,w,E,C){if(typeof w!="function")throw new TypeError("The listener must be a function");var k=new s(w,E||h,C),M=e?e+y:y;return h._events[M]?h._events[M].fn?h._events[M]=[h._events[M],k]:h._events[M].push(k):(h._events[M]=k,h._eventsCount++),h}function o(h,y){--h._eventsCount===0?h._events=new n:delete h._events[y]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var y=[],w,E;if(this._eventsCount===0)return y;for(E in w=this._events)t.call(w,E)&&y.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(w)):y},a.prototype.listeners=function(y){var w=e?e+y:y,E=this._events[w];if(!E)return[];if(E.fn)return[E.fn];for(var C=0,k=E.length,M=new Array(k);C<k;C++)M[C]=E[C].fn;return M},a.prototype.listenerCount=function(y){var w=e?e+y:y,E=this._events[w];return E?E.fn?1:E.length:0},a.prototype.emit=function(y,w,E,C,k,M){var A=e?e+y:y;if(!this._events[A])return!1;var B=this._events[A],N=arguments.length,P,L;if(B.fn){switch(B.once&&this.removeListener(y,B.fn,void 0,!0),N){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,w),!0;case 3:return B.fn.call(B.context,w,E),!0;case 4:return B.fn.call(B.context,w,E,C),!0;case 5:return B.fn.call(B.context,w,E,C,k),!0;case 6:return B.fn.call(B.context,w,E,C,k,M),!0}for(L=1,P=new Array(N-1);L<N;L++)P[L-1]=arguments[L];B.fn.apply(B.context,P)}else{var W=B.length,z;for(L=0;L<W;L++)switch(B[L].once&&this.removeListener(y,B[L].fn,void 0,!0),N){case 1:B[L].fn.call(B[L].context);break;case 2:B[L].fn.call(B[L].context,w);break;case 3:B[L].fn.call(B[L].context,w,E);break;case 4:B[L].fn.call(B[L].context,w,E,C);break;default:if(!P)for(z=1,P=new Array(N-1);z<N;z++)P[z-1]=arguments[z];B[L].fn.apply(B[L].context,P)}}return!0},a.prototype.on=function(y,w,E){return i(this,y,w,E,!1)},a.prototype.once=function(y,w,E){return i(this,y,w,E,!0)},a.prototype.removeListener=function(y,w,E,C){var k=e?e+y:y;if(!this._events[k])return this;if(!w)return o(this,k),this;var M=this._events[k];if(M.fn)M.fn===w&&(!C||M.once)&&(!E||M.context===E)&&o(this,k);else{for(var A=0,B=[],N=M.length;A<N;A++)(M[A].fn!==w||C&&!M[A].once||E&&M[A].context!==E)&&B.push(M[A]);B.length?this._events[k]=B.length===1?B[0]:B:o(this,k)}return this},a.prototype.removeAllListeners=function(y){var w;return y?(w=e?e+y:y,this._events[w]&&o(this,w)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(Zo);var wl=Zo.exports;const Yo=hr(wl);var bl=class extends Yo{constructor(t,e,n){super();pe(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function vl(r,t){return new bl(r,t)}var xl=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Sl=class extends Yo{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},h,y){super();pe(this,"address");pe(this,"rpc_id");pe(this,"queue");pe(this,"options");pe(this,"autoconnect");pe(this,"ready");pe(this,"reconnect");pe(this,"reconnect_timer_id");pe(this,"reconnect_interval");pe(this,"max_reconnects");pe(this,"rest_options");pe(this,"current_reconnects");pe(this,"generate_request_id");pe(this,"socket");pe(this,"webSocketFactory");pe(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=h||(()=>++this.rpc_id),y?this.dataPack=y:this.dataPack=new xl,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),h={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(h),s,y=>{if(y)return o(y);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=ft.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class Xo extends eo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,za(t);const n=Hi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Ar(this),this.iHash.update(t),this}digestInto(t){Ar(this),Fr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Jo=(r,t,e)=>new Xo(r,t).update(e).digest();Jo.create=(r,t)=>new Xo(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function El(r){const t=Gi(r);Yn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:_l,hexToBytes:Bl}=Ic,kn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=kn;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:_l(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=kn,e=typeof r=="string"?Bl(r):r;dr(e);let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=kn._parseInt(e.subarray(2)),{d:o,l:a}=kn._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const t=y=>Number.parseInt(y[0],16)&8?"00"+y:y,e=y=>{const w=y.toString(16);return w.length&1?`0${w}`:w},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,o=s.length/2,a=e(i),h=e(o);return`30${e(o+i+4)}02${h}${s}02${a}${n}`}},hn=BigInt(0),Fe=BigInt(1);BigInt(2);const Os=BigInt(3);BigInt(4);function Al(r){const t=El(r),{Fp:e}=t,n=t.toBytes||((M,A,B)=>{const N=A.toAffine();return Cn(Uint8Array.from([4]),e.toBytes(N.x),e.toBytes(N.y))}),s=t.fromBytes||(M=>{const A=M.subarray(1),B=e.fromBytes(A.subarray(0,e.BYTES)),N=e.fromBytes(A.subarray(e.BYTES,2*e.BYTES));return{x:B,y:N}});function i(M){const{a:A,b:B}=t,N=e.sqr(M),P=e.mul(N,M);return e.add(e.add(P,e.mul(M,A)),B)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(M){return typeof M=="bigint"&&hn<M&&M<t.n}function a(M){if(!o(M))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(M){const{allowedPrivateKeyLengths:A,nByteLength:B,wrapPrivateKey:N,n:P}=t;if(A&&typeof M!="bigint"){if(Tn(M)&&(M=Ln(M)),typeof M!="string"||!A.includes(M.length))throw new Error("Invalid key");M=M.padStart(B*2,"0")}let L;try{L=typeof M=="bigint"?M:Mn(de("private key",M,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof M}`)}return N&&(L=Pt(L,P)),a(L),L}const y=new Map;function w(M){if(!(M instanceof E))throw new Error("ProjectivePoint expected")}class E{constructor(A,B,N){if(this.px=A,this.py=B,this.pz=N,A==null||!e.isValid(A))throw new Error("x required");if(B==null||!e.isValid(B))throw new Error("y required");if(N==null||!e.isValid(N))throw new Error("z required")}static fromAffine(A){const{x:B,y:N}=A||{};if(!A||!e.isValid(B)||!e.isValid(N))throw new Error("invalid affine point");if(A instanceof E)throw new Error("projective point not allowed");const P=L=>e.eql(L,e.ZERO);return P(B)&&P(N)?E.ZERO:new E(B,N,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const B=e.invertBatch(A.map(N=>N.pz));return A.map((N,P)=>N.toAffine(B[P])).map(E.fromAffine)}static fromHex(A){const B=E.fromAffine(s(de("pointHex",A)));return B.assertValidity(),B}static fromPrivateKey(A){return E.BASE.multiply(h(A))}_setWindowSize(A){this._WINDOW_SIZE=A,y.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:B}=this.toAffine();if(!e.isValid(A)||!e.isValid(B))throw new Error("bad point: x or y not FE");const N=e.sqr(B),P=i(A);if(!e.eql(N,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(e.isOdd)return!e.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){w(A);const{px:B,py:N,pz:P}=this,{px:L,py:W,pz:z}=A,q=e.eql(e.mul(B,z),e.mul(L,P)),H=e.eql(e.mul(N,z),e.mul(W,P));return q&&H}negate(){return new E(this.px,e.neg(this.py),this.pz)}double(){const{a:A,b:B}=t,N=e.mul(B,Os),{px:P,py:L,pz:W}=this;let z=e.ZERO,q=e.ZERO,H=e.ZERO,G=e.mul(P,P),vt=e.mul(L,L),lt=e.mul(W,W),Q=e.mul(P,L);return Q=e.add(Q,Q),H=e.mul(P,W),H=e.add(H,H),z=e.mul(A,H),q=e.mul(N,lt),q=e.add(z,q),z=e.sub(vt,q),q=e.add(vt,q),q=e.mul(z,q),z=e.mul(Q,z),H=e.mul(N,H),lt=e.mul(A,lt),Q=e.sub(G,lt),Q=e.mul(A,Q),Q=e.add(Q,H),H=e.add(G,G),G=e.add(H,G),G=e.add(G,lt),G=e.mul(G,Q),q=e.add(q,G),lt=e.mul(L,W),lt=e.add(lt,lt),G=e.mul(lt,Q),z=e.sub(z,G),H=e.mul(lt,vt),H=e.add(H,H),H=e.add(H,H),new E(z,q,H)}add(A){w(A);const{px:B,py:N,pz:P}=this,{px:L,py:W,pz:z}=A;let q=e.ZERO,H=e.ZERO,G=e.ZERO;const vt=t.a,lt=e.mul(t.b,Os);let Q=e.mul(B,L),_t=e.mul(N,W),I=e.mul(P,z),c=e.add(B,N),d=e.add(L,W);c=e.mul(c,d),d=e.add(Q,_t),c=e.sub(c,d),d=e.add(B,P);let g=e.add(L,z);return d=e.mul(d,g),g=e.add(Q,I),d=e.sub(d,g),g=e.add(N,P),q=e.add(W,z),g=e.mul(g,q),q=e.add(_t,I),g=e.sub(g,q),G=e.mul(vt,d),q=e.mul(lt,I),G=e.add(q,G),q=e.sub(_t,G),G=e.add(_t,G),H=e.mul(q,G),_t=e.add(Q,Q),_t=e.add(_t,Q),I=e.mul(vt,I),d=e.mul(lt,d),_t=e.add(_t,I),I=e.sub(Q,I),I=e.mul(vt,I),d=e.add(d,I),Q=e.mul(_t,d),H=e.add(H,Q),Q=e.mul(g,d),q=e.mul(c,q),q=e.sub(q,Q),Q=e.mul(c,_t),G=e.mul(g,G),G=e.add(G,Q),new E(q,H,G)}subtract(A){return this.add(A.negate())}is0(){return this.equals(E.ZERO)}wNAF(A){return k.wNAFCached(this,y,A,B=>{const N=e.invertBatch(B.map(P=>P.pz));return B.map((P,L)=>P.toAffine(N[L])).map(E.fromAffine)})}multiplyUnsafe(A){const B=E.ZERO;if(A===hn)return B;if(a(A),A===Fe)return this;const{endo:N}=t;if(!N)return k.unsafeLadder(this,A);let{k1neg:P,k1:L,k2neg:W,k2:z}=N.splitScalar(A),q=B,H=B,G=this;for(;L>hn||z>hn;)L&Fe&&(q=q.add(G)),z&Fe&&(H=H.add(G)),G=G.double(),L>>=Fe,z>>=Fe;return P&&(q=q.negate()),W&&(H=H.negate()),H=new E(e.mul(H.px,N.beta),H.py,H.pz),q.add(H)}multiply(A){a(A);let B=A,N,P;const{endo:L}=t;if(L){const{k1neg:W,k1:z,k2neg:q,k2:H}=L.splitScalar(B);let{p:G,f:vt}=this.wNAF(z),{p:lt,f:Q}=this.wNAF(H);G=k.constTimeNegate(W,G),lt=k.constTimeNegate(q,lt),lt=new E(e.mul(lt.px,L.beta),lt.py,lt.pz),N=G.add(lt),P=vt.add(Q)}else{const{p:W,f:z}=this.wNAF(B);N=W,P=z}return E.normalizeZ([N,P])[0]}multiplyAndAddUnsafe(A,B,N){const P=E.BASE,L=(z,q)=>q===hn||q===Fe||!z.equals(P)?z.multiplyUnsafe(q):z.multiply(q),W=L(this,B).add(L(A,N));return W.is0()?void 0:W}toAffine(A){const{px:B,py:N,pz:P}=this,L=this.is0();A==null&&(A=L?e.ONE:e.inv(P));const W=e.mul(B,A),z=e.mul(N,A),q=e.mul(P,A);if(L)return{x:e.ZERO,y:e.ZERO};if(!e.eql(q,e.ONE))throw new Error("invZ was invalid");return{x:W,y:z}}isTorsionFree(){const{h:A,isTorsionFree:B}=t;if(A===Fe)return!0;if(B)return B(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:B}=t;return A===Fe?this:B?B(E,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),n(E,this,A)}toHex(A=!0){return Ln(this.toRawBytes(A))}}E.BASE=new E(t.Gx,t.Gy,e.ONE),E.ZERO=new E(e.ZERO,e.ONE,e.ZERO);const C=t.nBitLength,k=po(E,t.endo?Math.ceil(C/2):C);return{CURVE:t,ProjectivePoint:E,normPrivateKeyToScalar:h,weierstrassEquation:i,isWithinCurveOrder:o}}function Il(r){const t=Gi(r);return Yn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function kl(r){const t=Il(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(d){return hn<d&&d<e.ORDER}function a(d){return Pt(d,n)}function h(d){return Li(d,n)}const{ProjectivePoint:y,normPrivateKeyToScalar:w,weierstrassEquation:E,isWithinCurveOrder:C}=Al({...t,toBytes(d,g,S){const b=g.toAffine(),x=e.toBytes(b.x),R=Cn;return S?R(Uint8Array.from([g.hasEvenY()?2:3]),x):R(Uint8Array.from([4]),x,e.toBytes(b.y))},fromBytes(d){const g=d.length,S=d[0],b=d.subarray(1);if(g===s&&(S===2||S===3)){const x=Mn(b);if(!o(x))throw new Error("Point is not on curve");const R=E(x);let m;try{m=e.sqrt(R)}catch(K){const V=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+V)}const l=(m&Fe)===Fe;return(S&1)===1!==l&&(m=e.neg(m)),{x,y:m}}else if(g===i&&S===4){const x=e.fromBytes(b.subarray(0,e.BYTES)),R=e.fromBytes(b.subarray(e.BYTES,2*e.BYTES));return{x,y:R}}else throw new Error(`Point of length ${g} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),k=d=>Ln(Gn(d,t.nByteLength));function M(d){const g=n>>Fe;return d>g}function A(d){return M(d)?a(-d):d}const B=(d,g,S)=>Mn(d.slice(g,S));class N{constructor(g,S,b){this.r=g,this.s=S,this.recovery=b,this.assertValidity()}static fromCompact(g){const S=t.nByteLength;return g=de("compactSignature",g,S*2),new N(B(g,0,S),B(g,S,2*S))}static fromDER(g){const{r:S,s:b}=kn.toSig(de("DER",g));return new N(S,b)}assertValidity(){if(!C(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!C(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(g){return new N(this.r,this.s,g)}recoverPublicKey(g){const{r:S,s:b,recovery:x}=this,R=H(de("msgHash",g));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const m=x===2||x===3?S+t.n:S;if(m>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=x&1?"03":"02",_=y.fromHex(l+k(m)),K=h(m),V=a(-R*K),Z=a(b*K),it=y.BASE.multiplyAndAddUnsafe(_,V,Z);if(!it)throw new Error("point at infinify");return it.assertValidity(),it}hasHighS(){return M(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return jn(this.toDERHex())}toDERHex(){return kn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return jn(this.toCompactHex())}toCompactHex(){return k(this.r)+k(this.s)}}const P={isValidPrivateKey(d){try{return w(d),!0}catch{return!1}},normPrivateKeyToScalar:w,randomPrivateKey:()=>{const d=ho(t.n);return Fc(t.randomBytes(d),t.n)},precompute(d=8,g=y.BASE){return g._setWindowSize(d),g.multiply(BigInt(3)),g}};function L(d,g=!0){return y.fromPrivateKey(d).toRawBytes(g)}function W(d){const g=Tn(d),S=typeof d=="string",b=(g||S)&&d.length;return g?b===s||b===i:S?b===2*s||b===2*i:d instanceof y}function z(d,g,S=!0){if(W(d))throw new Error("first arg must be private key");if(!W(g))throw new Error("second arg must be public key");return y.fromHex(g).multiply(w(d)).toRawBytes(S)}const q=t.bits2int||function(d){const g=Mn(d),S=d.length*8-t.nBitLength;return S>0?g>>BigInt(S):g},H=t.bits2int_modN||function(d){return a(q(d))},G=ji(t.nBitLength);function vt(d){if(typeof d!="bigint")throw new Error("bigint expected");if(!(hn<=d&&d<G))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Gn(d,t.nByteLength)}function lt(d,g,S=Q){if(["recovered","canonical"].some(at=>at in S))throw new Error("sign() legacy options not supported");const{hash:b,randomBytes:x}=t;let{lowS:R,prehash:m,extraEntropy:l}=S;R==null&&(R=!0),d=de("msgHash",d),m&&(d=de("prehashed msgHash",b(d)));const _=H(d),K=w(g),V=[vt(K),vt(_)];if(l!=null&&l!==!1){const at=l===!0?x(e.BYTES):l;V.push(de("extraEntropy",at))}const Z=Cn(...V),it=_;function nt(at){const Dt=q(at);if(!C(Dt))return;const dt=h(Dt),mt=y.BASE.multiply(Dt).toAffine(),St=a(mt.x);if(St===hn)return;const wt=a(dt*a(it+St*K));if(wt===hn)return;let Bt=(mt.x===St?0:2)|Number(mt.y&Fe),Qe=wt;return R&&M(wt)&&(Qe=A(wt),Bt^=1),new N(St,Qe,Bt)}return{seed:Z,k2sig:nt}}const Q={lowS:t.lowS,prehash:!1},_t={lowS:t.lowS,prehash:!1};function I(d,g,S=Q){const{seed:b,k2sig:x}=lt(d,g,S),R=t;return co(R.hash.outputLen,R.nByteLength,R.hmac)(b,x)}y.BASE._setWindowSize(8);function c(d,g,S,b=_t){var mt;const x=d;if(g=de("msgHash",g),S=de("publicKey",S),"strict"in b)throw new Error("options.strict was renamed to lowS");const{lowS:R,prehash:m}=b;let l,_;try{if(typeof x=="string"||Tn(x))try{l=N.fromDER(x)}catch(St){if(!(St instanceof kn.Err))throw St;l=N.fromCompact(x)}else if(typeof x=="object"&&typeof x.r=="bigint"&&typeof x.s=="bigint"){const{r:St,s:wt}=x;l=new N(St,wt)}else throw new Error("PARSE");_=y.fromHex(S)}catch(St){if(St.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(R&&l.hasHighS())return!1;m&&(g=t.hash(g));const{r:K,s:V}=l,Z=H(g),it=h(V),nt=a(Z*it),at=a(K*it),Dt=(mt=y.BASE.multiplyAndAddUnsafe(_,nt,at))==null?void 0:mt.toAffine();return Dt?a(Dt.x)===K:!1}return{CURVE:t,getPublicKey:L,getSharedSecret:z,sign:I,verify:c,ProjectivePoint:y,Signature:N,utils:P}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ml(r){return{hash:r,hmac:(t,...e)=>Jo(r,t,Wa(...e)),randomBytes:ro}}function Rl(r,t){const e=n=>kl({...r,...Ml(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Fs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Tl=BigInt(1),Oi=BigInt(2),Ps=(r,t)=>(r+t/Oi)/t;function Ll(r){const t=Qo,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),h=BigInt(88),y=r*r*r%t,w=y*y*r%t,E=jt(w,e,t)*w%t,C=jt(E,e,t)*w%t,k=jt(C,Oi,t)*y%t,M=jt(k,s,t)*k%t,A=jt(M,i,t)*M%t,B=jt(A,a,t)*A%t,N=jt(B,h,t)*B%t,P=jt(N,a,t)*A%t,L=jt(P,e,t)*w%t,W=jt(L,o,t)*M%t,z=jt(W,n,t)*y%t,q=jt(z,Oi,t);if(!Fi.eql(Fi.sqr(q),r))throw new Error("Cannot find square root");return q}const Fi=lo(Qo,void 0,void 0,{sqrt:Ll}),us=Rl({a:BigInt(0),b:BigInt(7),Fp:Fi,n:Fs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Fs,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Tl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=Ps(i*r,t),h=Ps(-n*r,t);let y=Pt(r-a*e-h*s,t),w=Pt(-a*n-h*i,t);const E=y>o,C=w>o;if(E&&(y=t-y),C&&(w=t-w),y>o||w>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:E,k1:y,k2neg:C,k2:w}}}},Ni);BigInt(0);us.ProjectivePoint;function Ds(r){try{return Zi.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Cl=(r,t)=>Zi.sign(r,t.slice(0,32)),Nl=Zi.verify,we=r=>ft.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ft.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ft.Buffer.from(r);class Ul{constructor(t){Object.assign(this,t)}encode(){return ft.Buffer.from(Eo(Br,this))}static decode(t){return _o(Br,this,t)}static decodeUnchecked(t){return wo(Br,this,t)}}const Br=new Map;var ta;const Ol=32,xn=32;function Fl(r){return r._bn!==void 0}let zs=1;class ot extends Ul{constructor(t){if(super({}),this._bn=void 0,Fl(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ve.decode(t);if(e.length!=xn)throw new Error("Invalid public key input");this._bn=new Cs(e)}else this._bn=new Cs(t);if(this._bn.byteLength()>xn)throw new Error("Invalid public key input")}}static unique(){const t=new ot(zs);return zs+=1,new ot(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ve.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(ft.Buffer);if(t.length===xn)return t;const e=ft.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=ft.Buffer.concat([t.toBuffer(),ft.Buffer.from(e),n.toBuffer()]),i=Ni(s);return new ot(i)}static createProgramAddressSync(t,e){let n=ft.Buffer.alloc(0);t.forEach(function(i){if(i.length>Ol)throw new TypeError("Max seed length exceeded");n=ft.Buffer.concat([n,we(i)])}),n=ft.Buffer.concat([n,e.toBuffer(),ft.Buffer.from("ProgramDerivedAddress")]);const s=Ni(n);if(Ds(s))throw new Error("Invalid seeds, address must fall off the curve");return new ot(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(ft.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ot(t);return Ds(e.toBytes())}}ta=ot;ot.default=new ta("11111111111111111111111111111111");Br.set(ot,{kind:"struct",fields:[["_bn","u256"]]});new ot("BPFLoader1111111111111111111111111111111111");const Kn=1232,ea=127,na=64;class ra extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ra.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ia extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ia.prototype,"name",{value:"TransactionExpiredTimeoutError"});class nr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(nr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Cr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const bt=(r="publicKey")=>Gt(32,r),$n=(r="string")=>{const t=tt([rt("length"),rt("lengthPadding"),Gt(Rn(rt(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,a)=>{const h={chars:ft.Buffer.from(i,"utf8")};return n(h,o,a)},s.alloc=i=>rt().span+rt().span+ft.Buffer.from(i,"utf8").length,s},Pl=(r="authorized")=>tt([bt("staker"),bt("withdrawer")],r),Dl=(r="lockup")=>tt([Le("unixTimestamp"),Le("epoch"),bt("custodian")],r),zl=(r="voteInit")=>tt([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),Et("commission")],r),ql=(r="voteAuthorizeWithSeedArgs")=>tt([rt("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),$n("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],r);function sa(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return sa({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function De(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function ze(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function he(r,t){if(!r)throw new Error(t||"Assertion failed")}class Kr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const a=o.toBase58();let h=n.get(a);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,h)),h},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const h=s(a.pubkey);h.isSigner||(h.isSigner=a.isSigner),h.isWritable||(h.isWritable=a.isWritable)}}return new Kr(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];he(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,h])=>h.isSigner&&h.isWritable),n=t.filter(([,h])=>h.isSigner&&!h.isWritable),s=t.filter(([,h])=>!h.isSigner&&h.isWritable),i=t.filter(([,h])=>!h.isSigner&&!h.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{he(e.length>0,"Expected at least one writable signer key");const[h]=e[0];he(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([h])=>new ot(h)),...n.map(([h])=>new ot(h)),...s.map(([h])=>new ot(h)),...i.map(([h])=>new ot(h))];return[o,a]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const a=new ot(i),h=t.findIndex(y=>y.equals(a));h>=0&&(he(h<256,"Max lookup table index exceeded"),n.push(h),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const oa="Reached end of buffer unexpectedly";function dn(r){if(r.length===0)throw new Error(oa);return r.shift()}function qe(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(oa);return r.splice(...t)}class Sn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ot(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ve.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Cr(this.staticAccountKeys)}static compile(t){const e=Kr.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new Cr(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:ve.encode(a.data)}));return new Sn({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ze(e,t);const n=this.instructions.map(E=>{const{accounts:C,programIdIndex:k}=E,M=Array.from(ve.decode(E.data));let A=[];ze(A,C.length);let B=[];return ze(B,M.length),{programIdIndex:k,keyIndicesCount:ft.Buffer.from(A),keyIndices:C,dataLength:ft.Buffer.from(B),data:M}});let s=[];ze(s,n.length);let i=ft.Buffer.alloc(Kn);ft.Buffer.from(s).copy(i);let o=s.length;n.forEach(E=>{const k=tt([Et("programIdIndex"),Gt(E.keyIndicesCount.length,"keyIndicesCount"),Ie(Et("keyIndex"),E.keyIndices.length,"keyIndices"),Gt(E.dataLength.length,"dataLength"),Ie(Et("userdatum"),E.data.length,"data")]).encode(E,i,o);o+=k}),i=i.slice(0,o);const a=tt([Gt(1,"numRequiredSignatures"),Gt(1,"numReadonlySignedAccounts"),Gt(1,"numReadonlyUnsignedAccounts"),Gt(e.length,"keyCount"),Ie(bt("key"),t,"keys"),bt("recentBlockhash")]),h={numRequiredSignatures:ft.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ft.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ft.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ft.Buffer.from(e),keys:this.accountKeys.map(E=>we(E.toBytes())),recentBlockhash:ve.decode(this.recentBlockhash)};let y=ft.Buffer.alloc(2048);const w=a.encode(h,y);return i.copy(y,w),y.slice(0,w+i.length)}static from(t){let e=[...t];const n=dn(e);if(n!==(n&ea))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=dn(e),i=dn(e),o=De(e);let a=[];for(let C=0;C<o;C++){const k=qe(e,0,xn);a.push(new ot(ft.Buffer.from(k)))}const h=qe(e,0,xn),y=De(e);let w=[];for(let C=0;C<y;C++){const k=dn(e),M=De(e),A=qe(e,0,M),B=De(e),N=qe(e,0,B),P=ve.encode(ft.Buffer.from(N));w.push({programIdIndex:k,accounts:A,data:P})}const E={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:ve.encode(ft.Buffer.from(h)),accountKeys:a,instructions:w};return new Sn(E)}}class Nr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Cr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Kr.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const w of i){const E=e.extractTableLookup(w);if(E!==void 0){const[C,{writable:k,readonly:M}]=E;n.push(C),s.writable.push(...k),s.readonly.push(...M)}}const[o,a]=e.getMessageComponents(),y=new Cr(a,s).compileInstructions(t.instructions);return new Nr({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:y,addressTableLookups:n})}serialize(){const t=Array();ze(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();ze(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();ze(i,this.addressTableLookups.length);const o=tt([Et("prefix"),tt([Et("numRequiredSignatures"),Et("numReadonlySignedAccounts"),Et("numReadonlyUnsignedAccounts")],"header"),Gt(t.length,"staticAccountKeysLength"),Ie(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),Gt(n.length,"instructionsLength"),Gt(e.length,"serializedInstructions"),Gt(i.length,"addressTableLookupsLength"),Gt(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Kn),y=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(w=>w.toBytes()),recentBlockhash:ve.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,y)}serializeInstructions(){let t=0;const e=new Uint8Array(Kn);for(const n of this.compiledInstructions){const s=Array();ze(s,n.accountKeyIndexes.length);const i=Array();ze(i,n.data.length);const o=tt([Et("programIdIndex"),Gt(s.length,"encodedAccountKeyIndexesLength"),Ie(Et(),n.accountKeyIndexes.length,"accountKeyIndexes"),Gt(i.length,"encodedDataLength"),Gt(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Kn);for(const n of this.addressTableLookups){const s=Array();ze(s,n.writableIndexes.length);const i=Array();ze(i,n.readonlyIndexes.length);const o=tt([bt("accountKey"),Gt(s.length,"encodedWritableIndexesLength"),Ie(Et(),n.writableIndexes.length,"writableIndexes"),Gt(i.length,"encodedReadonlyIndexesLength"),Ie(Et(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=dn(e),s=n&ea;he(n!==s,"Expected versioned message but received legacy message");const i=s;he(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:dn(e),numReadonlySignedAccounts:dn(e),numReadonlyUnsignedAccounts:dn(e)},a=[],h=De(e);for(let M=0;M<h;M++)a.push(new ot(qe(e,0,xn)));const y=ve.encode(qe(e,0,xn)),w=De(e),E=[];for(let M=0;M<w;M++){const A=dn(e),B=De(e),N=qe(e,0,B),P=De(e),L=new Uint8Array(qe(e,0,P));E.push({programIdIndex:A,accountKeyIndexes:N,data:L})}const C=De(e),k=[];for(let M=0;M<C;M++){const A=new ot(qe(e,0,xn)),B=De(e),N=qe(e,0,B),P=De(e),L=qe(e,0,P);k.push({accountKey:A,writableIndexes:N,readonlyIndexes:L})}return new Nr({header:o,staticAccountKeys:a,recentBlockhash:y,compiledInstructions:E,addressTableLookups:k})}}let wn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const $l=ft.Buffer.alloc(na).fill(0);class Ke{constructor(t){this.keys=void 0,this.programId=void 0,this.data=ft.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class rn{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ke(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<e.length;A++)if(e[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const s=[],i=[];e.forEach(A=>{A.keys.forEach(N=>{i.push({...N})});const B=A.programId.toString();s.includes(B)||s.push(B)}),s.forEach(A=>{i.push({pubkey:new ot(A),isSigner:!1,isWritable:!1})});const o=[];i.forEach(A=>{const B=A.pubkey.toString(),N=o.findIndex(P=>P.pubkey.toString()===B);N>-1?(o[N].isWritable=o[N].isWritable||A.isWritable,o[N].isSigner=o[N].isSigner||A.isSigner):o.push(A)}),o.sort(function(A,B){if(A.isSigner!==B.isSigner)return A.isSigner?-1:1;if(A.isWritable!==B.isWritable)return A.isWritable?-1:1;const N={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(B.pubkey.toBase58(),"en",N)});const a=o.findIndex(A=>A.pubkey.equals(n));if(a>-1){const[A]=o.splice(a,1);A.isSigner=!0,A.isWritable=!0,o.unshift(A)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const B=o.findIndex(N=>N.pubkey.equals(A.publicKey));if(B>-1)o[B].isSigner||(o[B].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let h=0,y=0,w=0;const E=[],C=[];o.forEach(({pubkey:A,isSigner:B,isWritable:N})=>{B?(E.push(A.toString()),h+=1,N||(y+=1)):(C.push(A.toString()),N||(w+=1))});const k=E.concat(C),M=e.map(A=>{const{data:B,programId:N}=A;return{programIdIndex:k.indexOf(N.toString()),accounts:A.keys.map(P=>k.indexOf(P.pubkey.toString())),data:ve.encode(B)}});return M.forEach(A=>{he(A.programIdIndex>=0),A.accounts.forEach(B=>he(B>=0))}),new Sn({header:{numRequiredSignatures:h,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:w},accountKeys:k,recentBlockhash:t,instructions:M})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=Cl(n,s.secretKey);this._addSignature(s.publicKey,we(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){he(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=ft.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):Nl(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];ze(n,e.length);const s=n.length+e.length*64+t.length,i=ft.Buffer.alloc(s);return he(e.length<256),ft.Buffer.from(n).copy(i,0),e.forEach(({signature:o},a)=>{o!==null&&(he(o.length===64,"signature has invalid length"),ft.Buffer.from(o).copy(i,n.length+a*64))}),t.copy(i,n.length+e.length*64),he(i.length<=Kn,`Transaction too large: ${i.length} > ${Kn}`),i}get keys(){return he(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return he(this.instructions.length===1),this.instructions[0].programId}get data(){return he(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=De(e);let s=[];for(let i=0;i<n;i++){const o=qe(e,0,na);s.push(ve.encode(ft.Buffer.from(o)))}return rn.populate(Sn.from(e),s)}static populate(t,e=[]){const n=new rn;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==ve.encode($l)?null:ve.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(h=>h.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new Ke({keys:i,programId:t.accountKeys[s.programIdIndex],data:ve.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}const Wl=160,Hl=64,Kl=Wl/Hl,jl=1e3/Kl;new ot("SysvarC1ock11111111111111111111111111111111");new ot("SysvarEpochSchedu1e111111111111111111111111");new ot("Sysvar1nstructions1111111111111111111111111");const Bi=new ot("SysvarRecentB1ockHashes11111111111111111111"),qs=new ot("SysvarRent111111111111111111111111111111111");new ot("SysvarRewards111111111111111111111111111111");new ot("SysvarS1otHashes111111111111111111111111111");new ot("SysvarS1otHistory11111111111111111111111111");new ot("SysvarStakeHistory1111111111111111111111111");class $s extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(h=>h)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class et extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function qn(r){return new Promise(t=>setTimeout(t,r))}function Ne(r,t){const e=r.layout.span>=0?r.layout.span:sa(r,t),n=ft.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}const Gl=me("lamportsPerSignature"),aa=tt([rt("version"),rt("state"),bt("authorizedPubkey"),bt("nonce"),tt([Gl],"feeCalculator")]),Ws=aa.span;class ls{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=aa.decode(we(t),0);return new ls({authorizedPubkey:new ot(e.authorizedPubkey),nonce:new ot(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Vl=r=>{const t=r.decode.bind(r),e=r.encode.bind(r);return{decode:t,encode:e}},Zl=r=>t=>{const e=Gt(r,t),{encode:n,decode:s}=Vl(e),i=e;return i.decode=(o,a)=>{const h=s(o,a);return Tu(ft.Buffer.from(h))},i.encode=(o,a,h)=>{const y=Nu(o,r);return n(y,a,h)},i},Zn=Zl(8),Ue=Object.freeze({Create:{index:0,layout:tt([rt("instruction"),Le("lamports"),Le("space"),bt("programId")])},Assign:{index:1,layout:tt([rt("instruction"),bt("programId")])},Transfer:{index:2,layout:tt([rt("instruction"),Zn("lamports")])},CreateWithSeed:{index:3,layout:tt([rt("instruction"),bt("base"),$n("seed"),Le("lamports"),Le("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:tt([rt("instruction")])},WithdrawNonceAccount:{index:5,layout:tt([rt("instruction"),Le("lamports")])},InitializeNonceAccount:{index:6,layout:tt([rt("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:tt([rt("instruction"),bt("authorized")])},Allocate:{index:8,layout:tt([rt("instruction"),Le("space")])},AllocateWithSeed:{index:9,layout:tt([rt("instruction"),bt("base"),$n("seed"),Le("space"),bt("programId")])},AssignWithSeed:{index:10,layout:tt([rt("instruction"),bt("base"),$n("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:tt([rt("instruction"),Zn("lamports"),$n("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:tt([rt("instruction")])}});class lr{constructor(){}static createAccount(t){const e=Ue.Create,n=Ne(e,{lamports:t.lamports,space:t.space,programId:we(t.programId.toBuffer())});return new Ke({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=Ue.TransferWithSeed;e=Ne(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:we(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ue.Transfer;e=Ne(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Ke({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=Ue.AssignWithSeed;e=Ne(s,{base:we(t.basePubkey.toBuffer()),seed:t.seed,programId:we(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ue.Assign;e=Ne(s,{programId:we(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ke({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ue.CreateWithSeed,n=Ne(e,{base:we(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:we(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Ke({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new rn;"basePubkey"in t&&"seed"in t?e.add(lr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Ws,programId:this.programId})):e.add(lr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Ws,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Ue.InitializeNonceAccount,n=Ne(e,{authorized:we(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Bi,isSigner:!1,isWritable:!1},{pubkey:qs,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ke(s)}static nonceAdvance(t){const e=Ue.AdvanceNonceAccount,n=Ne(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Bi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ke(s)}static nonceWithdraw(t){const e=Ue.WithdrawNonceAccount,n=Ne(e,{lamports:t.lamports});return new Ke({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Bi,isSigner:!1,isWritable:!1},{pubkey:qs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Ue.AuthorizeNonceAccount,n=Ne(e,{authorized:we(t.newAuthorizedPubkey.toBuffer())});return new Ke({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=Ue.AllocateWithSeed;e=Ne(s,{base:we(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:we(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ue.Allocate;e=Ne(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ke({keys:n,programId:this.programId,data:e})}}lr.programId=new ot("11111111111111111111111111111111");new ot("BPFLoader2111111111111111111111111111111111");function Yl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xl=Object.prototype.toString,Jl=Object.keys||function(r){var t=[];for(var e in r)t.push(e);return t};function rr(r,t){var e,n,s,i,o,a,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return rr(r.toJSON(),t);if(h=Xl.call(r),h==="[object Array]"){for(s="[",n=r.length-1,e=0;e<n;e++)s+=rr(r[e],!0)+",";return n>-1&&(s+=rr(r[e],!0)),s+"]"}else if(h==="[object Object]"){for(i=Jl(r).sort(),n=i.length,s="",e=0;e<n;)o=i[e],a=rr(r[o],!1),a!==void 0&&(s&&(s+=","),s+=JSON.stringify(o)+":"+a),e++;return"{"+s+"}"}else return JSON.stringify(r);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var Ql=function(r){var t=rr(r,!1);if(t!==void 0)return""+t},Hs=Yl(Ql);const er=32;function Ai(r){let t=0;for(;r>1;)r/=2,t++;return t}function tf(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class ef{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ai(tf(t+er+1))-Ai(er)-1,n=this.getSlotsInEpoch(e),s=t-(n-er);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*er:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ai(er)):this.slotsPerEpoch}}var nf=globalThis.fetch;class rf extends Sl{constructor(t,e,n){const s=i=>{const o=vl(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function sf(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Ks=56;class js{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=sf(of,t),n=t.length-Ks;he(n>=0,"lookup table is invalid"),he(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=tt([Ie(bt(),s,"addresses")]).decode(t.slice(Ks));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ot(e.authority[0]):void 0,addresses:i.map(o=>new ot(o))}}}const of={index:1,layout:tt([rt("typeIndex"),Zn("deactivationSlot"),me("lastExtendedSlot"),Et("lastExtendedStartIndex"),Et(),Ie(bt(),Rn(Et(),-1),"authority")])},af=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function cf(r){const t=r.match(af);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),h=a==null?"":`:${a+1}`;return`${o}//${n}${h}${i}`}const Kt=mr(as(ot),j(),r=>new ot(r)),ca=cs([j(),Wt("base64")]),fs=mr(as(ft.Buffer),ca,r=>ft.Buffer.from(r[0],"base64")),uf=30*1e3;function lf(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Lt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function Gs(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ua(r){return ke([$({jsonrpc:Wt("2.0"),id:j(),result:r}),$({jsonrpc:Wt("2.0"),id:j(),error:$({code:Qn(),message:j(),data:st($u())})})])}const ff=ua(Qn());function yt(r){return mr(ua(r),ff,t=>"error"in t?t:{...t,result:Y(t.result,r)})}function Vt(r){return yt($({context:$({slot:O()}),value:r}))}function jr(r){return $({context:$({slot:O()}),value:r})}function Ii(r,t){return r===0?new Nr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ot(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ve.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Sn(t)}const hf=$({foundation:O(),foundationTerm:O(),initial:O(),taper:O(),terminal:O()}),df=yt(X(J($({epoch:O(),effectiveSlot:O(),amount:O(),postBalance:O(),commission:st(J(O()))})))),pf=X($({slot:O(),prioritizationFee:O()})),gf=$({total:O(),validator:O(),foundation:O(),epoch:O()}),yf=$({epoch:O(),slotIndex:O(),slotsInEpoch:O(),absoluteSlot:O(),blockHeight:st(O()),transactionCount:st(O())}),mf=$({slotsPerEpoch:O(),leaderScheduleSlotOffset:O(),warmup:on(),firstNormalEpoch:O(),firstNormalSlot:O()}),wf=Wo(j(),X(O())),On=J(ke([$({}),j()])),bf=$({err:On}),vf=Wt("receivedSignature"),xf=$({"solana-core":j(),"feature-set":st(O())}),Sf=$({program:j(),programId:Kt,parsed:Qn()}),Ef=$({programId:Kt,accounts:X(Kt),data:j()}),Vs=Vt($({err:J(ke([$({}),j()])),logs:J(X(j())),accounts:st(J(X(J($({executable:on(),owner:j(),lamports:O(),data:X(j()),rentEpoch:st(O())}))))),unitsConsumed:st(O()),returnData:st(J($({programId:j(),data:cs([j(),Wt("base64")])}))),innerInstructions:st(J(X($({index:O(),instructions:X(ke([Sf,Ef]))}))))})),_f=Vt($({byIdentity:Wo(j(),X(O())),range:$({firstSlot:O(),lastSlot:O()})}));function Bf(r,t,e,n,s,i){const o=e||nf;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let h;return n&&(h=async(w,E)=>{const C=await new Promise((k,M)=>{try{n(w,E,(A,B)=>k([A,B]))}catch(A){M(A)}});return await o(...C)}),new ml(async(w,E)=>{const C={method:"POST",body:w,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Ah)};try{let k=5,M,A=500;for(;h?M=await h(r,C):M=await o(r,C),!(M.status!==429||s===!0||(k-=1,k===0));)console.error(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${A}ms delay...`),await qn(A),A*=2;const B=await M.text();M.ok?E(null,B):E(new Error(`${M.status} ${M.statusText}: ${B}`))}catch(k){k instanceof Error&&E(k)}},{})}function Af(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function If(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const kf=yt(hf),Mf=yt(gf),Rf=yt(pf),Tf=yt(yf),Lf=yt(mf),Cf=yt(wf),Nf=yt(O()),Uf=Vt($({total:O(),circulating:O(),nonCirculating:O(),nonCirculatingAccounts:X(Kt)})),Pi=$({amount:j(),uiAmount:J(O()),decimals:O(),uiAmountString:st(j())}),Of=Vt(X($({address:Kt,amount:j(),uiAmount:J(O()),decimals:O(),uiAmountString:st(j())}))),Ff=Vt(X($({pubkey:Kt,account:$({executable:on(),owner:Kt,lamports:O(),data:fs,rentEpoch:O()})}))),Di=$({program:j(),parsed:Qn(),space:O()}),Pf=Vt(X($({pubkey:Kt,account:$({executable:on(),owner:Kt,lamports:O(),data:Di,rentEpoch:O()})}))),Df=Vt(X($({lamports:O(),address:Kt}))),fr=$({executable:on(),owner:Kt,lamports:O(),data:fs,rentEpoch:O()}),zf=$({pubkey:Kt,account:fr}),qf=mr(ke([as(ft.Buffer),Di]),ke([ca,Di]),r=>Array.isArray(r)?Y(r,fs):r),zi=$({executable:on(),owner:Kt,lamports:O(),data:qf,rentEpoch:O()}),$f=$({pubkey:Kt,account:zi}),Wf=$({state:ke([Wt("active"),Wt("inactive"),Wt("activating"),Wt("deactivating")]),active:O(),inactive:O()}),Hf=yt(X($({signature:j(),slot:O(),err:On,memo:J(j()),blockTime:st(J(O()))}))),Kf=yt(X($({signature:j(),slot:O(),err:On,memo:J(j()),blockTime:st(J(O()))}))),jf=$({subscription:O(),result:jr(fr)}),Gf=$({pubkey:Kt,account:fr}),Vf=$({subscription:O(),result:jr(Gf)}),Zf=$({parent:O(),slot:O(),root:O()}),Yf=$({subscription:O(),result:Zf}),Xf=ke([$({type:ke([Wt("firstShredReceived"),Wt("completed"),Wt("optimisticConfirmation"),Wt("root")]),slot:O(),timestamp:O()}),$({type:Wt("createdBank"),parent:O(),slot:O(),timestamp:O()}),$({type:Wt("frozen"),slot:O(),timestamp:O(),stats:$({numTransactionEntries:O(),numSuccessfulTransactions:O(),numFailedTransactions:O(),maxTransactionsPerEntry:O()})}),$({type:Wt("dead"),slot:O(),timestamp:O(),err:j()})]),Jf=$({subscription:O(),result:Xf}),Qf=$({subscription:O(),result:jr(ke([bf,vf]))}),th=$({subscription:O(),result:O()}),eh=$({pubkey:j(),gossip:J(j()),tpu:J(j()),rpc:J(j()),version:J(j())}),Zs=$({votePubkey:j(),nodePubkey:j(),activatedStake:O(),epochVoteAccount:on(),epochCredits:X(cs([O(),O(),O()])),commission:O(),lastVote:O(),rootSlot:J(O())}),nh=yt($({current:X(Zs),delinquent:X(Zs)})),rh=ke([Wt("processed"),Wt("confirmed"),Wt("finalized")]),ih=$({slot:O(),confirmations:J(O()),err:On,confirmationStatus:st(rh)}),sh=Vt(X(J(ih))),oh=yt(O()),la=$({accountKey:Kt,writableIndexes:X(O()),readonlyIndexes:X(O())}),hs=$({signatures:X(j()),message:$({accountKeys:X(j()),header:$({numRequiredSignatures:O(),numReadonlySignedAccounts:O(),numReadonlyUnsignedAccounts:O()}),instructions:X($({accounts:X(O()),data:j(),programIdIndex:O()})),recentBlockhash:j(),addressTableLookups:st(X(la))})}),fa=$({pubkey:Kt,signer:on(),writable:on(),source:st(ke([Wt("transaction"),Wt("lookupTable")]))}),ha=$({accountKeys:X(fa),signatures:X(j())}),da=$({parsed:Qn(),program:j(),programId:Kt}),pa=$({accounts:X(Kt),data:j(),programId:Kt}),ah=ke([pa,da]),ch=ke([$({parsed:Qn(),program:j(),programId:j()}),$({accounts:X(j()),data:j(),programId:j()})]),ga=mr(ah,ch,r=>"accounts"in r?Y(r,pa):Y(r,da)),ya=$({signatures:X(j()),message:$({accountKeys:X(fa),instructions:X(ga),recentBlockhash:j(),addressTableLookups:st(J(X(la)))})}),Ur=$({accountIndex:O(),mint:j(),owner:st(j()),uiTokenAmount:Pi}),ma=$({writable:X(Kt),readonly:X(Kt)}),Gr=$({err:On,fee:O(),innerInstructions:st(J(X($({index:O(),instructions:X($({accounts:X(O()),data:j(),programIdIndex:O()}))})))),preBalances:X(O()),postBalances:X(O()),logMessages:st(J(X(j()))),preTokenBalances:st(J(X(Ur))),postTokenBalances:st(J(X(Ur))),loadedAddresses:st(ma),computeUnitsConsumed:st(O())}),ds=$({err:On,fee:O(),innerInstructions:st(J(X($({index:O(),instructions:X(ga)})))),preBalances:X(O()),postBalances:X(O()),logMessages:st(J(X(j()))),preTokenBalances:st(J(X(Ur))),postTokenBalances:st(J(X(Ur))),loadedAddresses:st(ma),computeUnitsConsumed:st(O())}),tr=ke([Wt(0),Wt("legacy")]),Fn=$({pubkey:j(),lamports:O(),postBalance:J(O()),rewardType:J(j()),commission:st(J(O()))}),uh=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),transactions:X($({transaction:hs,meta:J(Gr),version:st(tr)})),rewards:st(X(Fn)),blockTime:J(O()),blockHeight:J(O())}))),lh=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),rewards:st(X(Fn)),blockTime:J(O()),blockHeight:J(O())}))),fh=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),transactions:X($({transaction:ha,meta:J(Gr),version:st(tr)})),rewards:st(X(Fn)),blockTime:J(O()),blockHeight:J(O())}))),hh=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),transactions:X($({transaction:ya,meta:J(ds),version:st(tr)})),rewards:st(X(Fn)),blockTime:J(O()),blockHeight:J(O())}))),dh=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),transactions:X($({transaction:ha,meta:J(ds),version:st(tr)})),rewards:st(X(Fn)),blockTime:J(O()),blockHeight:J(O())}))),ph=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),rewards:st(X(Fn)),blockTime:J(O()),blockHeight:J(O())}))),gh=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),transactions:X($({transaction:hs,meta:J(Gr)})),rewards:st(X(Fn)),blockTime:J(O())}))),Ys=yt(J($({blockhash:j(),previousBlockhash:j(),parentSlot:O(),signatures:X(j()),blockTime:J(O())}))),ki=yt(J($({slot:O(),meta:J(Gr),blockTime:st(J(O())),transaction:hs,version:st(tr)}))),Er=yt(J($({slot:O(),transaction:ya,meta:J(ds),blockTime:st(J(O())),version:st(tr)}))),yh=Vt($({blockhash:j(),feeCalculator:$({lamportsPerSignature:O()})})),mh=Vt($({blockhash:j(),lastValidBlockHeight:O()})),wh=Vt(on()),bh=$({slot:O(),numTransactions:O(),numSlots:O(),samplePeriodSecs:O()}),vh=yt(X(bh)),xh=Vt(J($({feeCalculator:$({lamportsPerSignature:O()})}))),Sh=yt(j()),Eh=yt(j()),_h=$({err:On,logs:X(j()),signature:j()}),Bh=$({result:jr(_h),subscription:O()}),Ah={"solana-client":"js/1.0.0-maintenance"};class Ih{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const y={};return async w=>{const{commitment:E,config:C}=Lt(w),k=this._buildArgs([],E,void 0,C),M=Hs(k);return y[M]=y[M]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",k),B=Y(A,yt(O()));if("error"in B)throw new et(B.error,"failed to get block height information");return B.result}finally{delete y[M]}})(),await y[M]}})();let n,s,i,o,a,h;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,h=e.httpAgent),this._rpcEndpoint=lf(t),this._rpcWsEndpoint=n||cf(t),this._rpcClient=Bf(t,s,i,o,a,h),this._rpcRequest=Af(this._rpcClient),this._rpcBatchRequest=If(this._rpcClient),this._rpcWebSocket=new rf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=Y(o,Vt(O()));if("error"in a)throw new et(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=Y(e,yt(J(O())));if("error"in n)throw new et(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Y(t,yt(O()));if("error"in e)throw new et(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Y(t,Nf);if("error"in e)throw new et(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=Y(n,Uf);if("error"in s)throw new et(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=Y(s,Vt(Pi));if("error"in i)throw new et(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=Y(s,Vt(Pi));if("error"in i)throw new et(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=Lt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),h=await this._rpcRequest("getTokenAccountsByOwner",a),y=Y(h,Ff);if("error"in y)throw new et(y.error,`failed to get token accounts owned by account ${t.toBase58()}`);return y.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Y(o,Pf);if("error"in a)throw new et(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=Y(s,Df);if("error"in i)throw new et(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=Y(s,Of);if("error"in i)throw new et(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Y(o,Vt(J(fr)));if("error"in a)throw new et(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Y(o,Vt(J(zi)));if("error"in a)throw new et(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=Lt(e),i=t.map(y=>y.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),h=Y(a,Vt(X(J(zi))));if("error"in h)throw new et(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=Lt(e),i=t.map(y=>y.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),h=Y(a,Vt(X(J(fr))));if("error"in h)throw new et(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=Lt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),h=Y(a,yt(Wf));if("error"in h)throw new et(h.error,`failed to get Stake Activation ${t.toBase58()}`);return h.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=Lt(e),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Gs(o.filters)}:null}),h=await this._rpcRequest("getProgramAccounts",a),y=X(zf),w=o.withContext===!0?Y(h,Vt(y)):Y(h,yt(y));if("error"in w)throw new et(w.error,`failed to get accounts owned by program ${t.toBase58()}`);return w.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Y(o,yt(X($f)));if("error"in a)throw new et(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=ve.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return he(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((h,y)=>{try{n=this.onSignature(e,(E,C)=>{n=void 0;const k={context:C,value:E};h({__type:wn.PROCESSED,response:k})},t);const w=new Promise(E=>{n==null?E():s=this._onSubscriptionStateChange(n,C=>{C==="subscribed"&&E()})});(async()=>{if(await w,i)return;const E=await this.getSignatureStatus(e);if(i||E==null)return;const{context:C,value:k}=E;if(k!=null)if(k!=null&&k.err)y(k.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(k.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(k.confirmationStatus==="processed"||k.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,h({__type:wn.PROCESSED,response:{context:C,value:k}})}})()}catch(w){y(w)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(E=>{const C=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let k=await C();if(!i){for(;k<=n;)if(await qn(1e3),i||(k=await C(),i))return;E({__type:wn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),y=this.getCancellationPromise(e);let w;try{const E=await Promise.race([y,h,o]);if(E.__type===wn.PROCESSED)w=E.response;else throw new ra(s)}finally{i=!0,a()}return w}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const h=new Promise(k=>{let M=i,A=null;const B=async()=>{try{const{context:N,value:P}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return A=N.slot,P==null?void 0:P.nonce}catch{return M}};(async()=>{if(M=await B(),!a)for(;;){if(i!==M){k({__type:wn.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await qn(2e3),a||(M=await B(),a))return}})()}),{abortConfirmation:y,confirmationPromise:w}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),E=this.getCancellationPromise(e);let C;try{const k=await Promise.race([E,w,h]);if(k.__type===wn.PROCESSED)C=k.response;else{let M;for(;;){const A=await this.getSignatureStatus(o);if(A==null)break;if(A.context.slot<(k.slotInWhichNonceDidAdvance??n)){await qn(400);continue}M=A;break}if(M!=null&&M.value){const A=t||"finalized",{confirmationStatus:B}=M.value;switch(A){case"processed":case"recent":if(B!=="processed"&&B!=="confirmed"&&B!=="finalized")throw new nr(o);break;case"confirmed":case"single":case"singleGossip":if(B!=="confirmed"&&B!=="finalized")throw new nr(o);break;case"finalized":case"max":case"root":if(B!=="finalized")throw new nr(o);break;default:}C={context:M.context,value:{err:M.value.err}}}else throw new nr(o)}}finally{a=!0,y()}return C}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(h=>{let y=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{y=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>h({__type:wn.TIMED_OUT,timeoutMs:y}),y)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const h=await Promise.race([o,s]);if(h.__type===wn.PROCESSED)a=h.response;else throw new ia(e,h.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Y(t,yt(X(eh)));if("error"in e)throw new et(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=Y(n,nh);if("error"in s)throw new et(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=Lt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=Y(i,yt(O()));if("error"in o)throw new et(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Lt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=Y(i,yt(j()));if("error"in o)throw new et(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=Y(s,yt(X(Kt)));if("error"in i)throw new et(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);he(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=Y(s,sh);if("error"in i)throw new et(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Lt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=Y(i,yt(O()));if("error"in o)throw new et(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=Y(n,kf);if("error"in s)throw new et(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=Lt(n),o=this._buildArgs([t.map(y=>y.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),h=Y(a,df);if("error"in h)throw new et(h.error,"failed to get inflation reward");return h.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Y(t,Mf);if("error"in e)throw new et(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Lt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=Y(i,Tf);if("error"in o)throw new et(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Y(t,Lf);if("error"in e)throw new et(e.error,"failed to get epoch schedule");const n=e.result;return new ef(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Y(t,Cf);if("error"in e)throw new et(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=Y(s,oh);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",e),s=Y(n,yh);if("error"in s)throw new et(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=Y(e,vh);if("error"in n)throw new et(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=Y(s,xh);if("error"in i)throw new et(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const n=we(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=Y(i,Vt(J(O())));if("error"in o)throw new et(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=Y(s,Rf);if("error"in i)throw new et(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Lt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=Y(i,mh);if("error"in o)throw new et(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Y(o,wh);if("error"in a)throw new et(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Y(t,yt(xf));if("error"in e)throw new et(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Y(t,yt(j()));if("error"in e)throw new et(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Y(o,fh);if("error"in a)throw a.error;return a.result}case"none":{const a=Y(o,lh);if("error"in a)throw a.error;return a.result}default:{const a=Y(o,uh);if("error"in a)throw a.error;const{result:h}=a;return h?{...h,transactions:h.transactions.map(({transaction:y,meta:w,version:E})=>({meta:w,transaction:{...y,message:Ii(E,y.message)},version:E}))}:null}}}catch(a){throw new et(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Y(o,dh);if("error"in a)throw a.error;return a.result}case"none":{const a=Y(o,ph);if("error"in a)throw a.error;return a.result}default:{const a=Y(o,hh);if("error"in a)throw a.error;return a.result}}}catch(a){throw new et(a,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...h}=t;n=a,e=h}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=Y(i,_f);if("error"in o)throw new et(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Y(o,ki);if("error"in a)throw new et(a.error,"failed to get transaction");const h=a.result;return h&&{...h,transaction:{...h.transaction,message:Ii(h.version,h.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=Lt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Y(o,Er);if("error"in a)throw new et(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=Lt(e),i=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(h=>{const y=Y(h,Er);if("error"in y)throw new et(y.error,"failed to get transactions");return y.result})}async getTransactions(t,e){const{commitment:n,config:s}=Lt(e),i=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(h=>{const y=Y(h,ki);if("error"in y)throw new et(y.error,"failed to get transactions");const w=y.result;return w&&{...w,transaction:{...w.transaction,message:Ii(w.version,w.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedBlock",n),i=Y(s,gh);if("error"in i)throw new et(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:h,meta:y})=>{const w=new Sn(h.message);return{meta:y,transaction:{...h,message:w}}})};return{...a,transactions:a.transactions.map(({transaction:h,meta:y})=>({meta:y,transaction:rn.populate(h.message,h.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=Y(i,yt(X(O())));if("error"in o)throw new et(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Y(s,Ys);if("error"in i)throw new et(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",n),i=Y(s,Ys);if("error"in i)throw new et(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedTransaction",n),i=Y(s,ki);if("error"in i)throw new et(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Sn(o.transaction.message),h=o.transaction.signatures;return{...o,transaction:rn.populate(a,h)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",n),i=Y(s,Er);if("error"in i)throw new et(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=Y(o,Er);if("error"in a)throw new et(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const h=await this.getConfirmedBlockSignatures(e,"finalized");h.signatures.length>0&&(s.until=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const h=await this.getConfirmedBlockSignatures(n);h.signatures.length>0&&(s.before=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(h=>h.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Y(i,Hf);if("error"in o)throw new et(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=Y(i,Kf);if("error"in o)throw new et(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new js({key:t,state:js.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=ls.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=Y(n,Sh);if("error"in s)throw new et(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await qn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=uf;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await qn(jl/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Lt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Y(i,Vt(O()));if("error"in o)throw new et(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const A=t.serialize(),B=ft.Buffer.from(A).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const N=e||{};N.encoding="base64","commitment"in N||(N.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(N.innerInstructions=e.innerInstructions);const P=[B,N],L=await this._rpcRequest("simulateTransaction",P),W=Y(L,Vs);if("error"in W)throw new Error("failed to simulate transaction: "+W.error.message);return W.result}let s;if(t instanceof rn){let M=t;s=new rn,s.feePayer=M.feePayer,s.instructions=t.instructions,s.nonceInfo=M.nonceInfo,s.signatures=M.signatures}else s=rn.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let M=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(M);if(s.lastValidBlockHeight=A.lastValidBlockHeight,s.recentBlockhash=A.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const B=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(B)&&!this._blockhashInfo.transactionSignatures.includes(B)){this._blockhashInfo.simulatedSignatures.push(B);break}else M=!0}}const o=s._compile(),a=o.serialize(),y=s._serialize(a).toString("base64"),w={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:o.nonProgramIds()).map(A=>A.toBase58());w.accounts={encoding:"base64",addresses:M}}i&&(w.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(w.innerInstructions=e.innerInstructions);const E=[y,w],C=await this._rpcRequest("simulateTransaction",E),k=Y(C,Vs);if("error"in k){let M;if("data"in k.error&&(M=k.error.data.logs,M&&Array.isArray(M))){const A=`
    `,B=A+M.join(A);console.error(k.error.message,B)}throw new $s({action:"simulate",signature:"",transactionMessage:k.error.message,logs:M})}return k.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const h=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(h))o=!0;else{this._blockhashInfo.transactionSignatures.push(h);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=we(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),h=Y(a,Eh);if("error"in h){let y;throw"data"in h.error&&(y=h.error.data.logs),new $s({action:s?"send":"simulate",signature:"",transactionMessage:h.error.message,logs:y})}return h.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${o} error for argument`,i,a.message),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=Y(t,jf);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=Hs([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];he(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=Lt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=Y(t,Vf);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=Lt(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Gs(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=Y(t,Bh);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=Y(t,Yf);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=Y(t,Jf);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=Y(t,Qf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(h,y)=>{e(h,y);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=Y(t,th);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:tt([rt("instruction"),Zn("recentSlot"),Et("bumpSeed")])},FreezeLookupTable:{index:1,layout:tt([rt("instruction")])},ExtendLookupTable:{index:2,layout:tt([rt("instruction"),Zn(),Ie(bt(),Rn(rt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:tt([rt("instruction")])},CloseLookupTable:{index:4,layout:tt([rt("instruction")])}});new ot("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:tt([Et("instruction"),rt("units"),rt("additionalFee")])},RequestHeapFrame:{index:1,layout:tt([Et("instruction"),rt("bytes")])},SetComputeUnitLimit:{index:2,layout:tt([Et("instruction"),rt("units")])},SetComputeUnitPrice:{index:3,layout:tt([Et("instruction"),Zn("microLamports")])}});new ot("ComputeBudget111111111111111111111111111111");tt([Et("numSignatures"),Et("padding"),Pe("signatureOffset"),Pe("signatureInstructionIndex"),Pe("publicKeyOffset"),Pe("publicKeyInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),Pe("messageInstructionIndex")]);new ot("Ed25519SigVerify111111111111111111111111111");us.utils.isValidPrivateKey;us.getPublicKey;tt([Et("numSignatures"),Pe("signatureOffset"),Et("signatureInstructionIndex"),Pe("ethAddressOffset"),Et("ethAddressInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),Et("messageInstructionIndex"),Gt(20,"ethAddress"),Gt(64,"signature"),Et("recoveryId")]);new ot("KeccakSecp256k11111111111111111111111111111");var wa;new ot("StakeConfig11111111111111111111111111111111");class ba{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}wa=ba;ba.default=new wa(0,0,ot.default);Object.freeze({Initialize:{index:0,layout:tt([rt("instruction"),Pl(),Dl()])},Authorize:{index:1,layout:tt([rt("instruction"),bt("newAuthorized"),rt("stakeAuthorizationType")])},Delegate:{index:2,layout:tt([rt("instruction")])},Split:{index:3,layout:tt([rt("instruction"),Le("lamports")])},Withdraw:{index:4,layout:tt([rt("instruction"),Le("lamports")])},Deactivate:{index:5,layout:tt([rt("instruction")])},Merge:{index:7,layout:tt([rt("instruction")])},AuthorizeWithSeed:{index:8,layout:tt([rt("instruction"),bt("newAuthorized"),rt("stakeAuthorizationType"),$n("authoritySeed"),bt("authorityOwner")])}});new ot("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:tt([rt("instruction"),zl()])},Authorize:{index:1,layout:tt([rt("instruction"),bt("newAuthorized"),rt("voteAuthorizationType")])},Withdraw:{index:3,layout:tt([rt("instruction"),Le("lamports")])},UpdateValidatorIdentity:{index:4,layout:tt([rt("instruction")])},AuthorizeWithSeed:{index:10,layout:tt([rt("instruction"),ql()])}});new ot("Vote111111111111111111111111111111111111111");new ot("Va1idator1nfo111111111111111111111111111111");$({name:j(),website:st(j()),details:st(j()),iconUrl:st(j()),keybaseUsername:st(j())});new ot("Vote111111111111111111111111111111111111111");tt([bt("nodePubkey"),bt("authorizedWithdrawer"),Et("commission"),me(),Ie(tt([me("slot"),rt("confirmationCount")]),Rn(rt(),-8),"votes"),Et("rootSlotValid"),me("rootSlot"),me(),Ie(tt([me("epoch"),bt("authorizedVoter")]),Rn(rt(),-8),"authorizedVoters"),tt([Ie(tt([bt("authorizedPubkey"),me("epochOfLastAuthorizedSwitch"),me("targetEpoch")]),32,"buf"),me("idx"),Et("isEmpty")],"priorVoters"),me(),Ie(tt([me("epoch"),me("credits"),me("prevCredits")]),Rn(rt(),-8),"epochCredits"),tt([me("slot"),me("timestamp")],"lastTimestamp")]);const Xs={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function kh(r,t){const e="https";if(!r)return Xs[e].devnet;const n=Xs[e][r];if(!n)throw new Error(`Unknown ${e} cluster: ${r}`);return n}const Mh=1e9;var va={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(h,y,w){this.fn=h,this.context=y,this.once=w||!1}function i(h,y,w,E,C){if(typeof w!="function")throw new TypeError("The listener must be a function");var k=new s(w,E||h,C),M=e?e+y:y;return h._events[M]?h._events[M].fn?h._events[M]=[h._events[M],k]:h._events[M].push(k):(h._events[M]=k,h._eventsCount++),h}function o(h,y){--h._eventsCount===0?h._events=new n:delete h._events[y]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var y=[],w,E;if(this._eventsCount===0)return y;for(E in w=this._events)t.call(w,E)&&y.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(w)):y},a.prototype.listeners=function(y){var w=e?e+y:y,E=this._events[w];if(!E)return[];if(E.fn)return[E.fn];for(var C=0,k=E.length,M=new Array(k);C<k;C++)M[C]=E[C].fn;return M},a.prototype.listenerCount=function(y){var w=e?e+y:y,E=this._events[w];return E?E.fn?1:E.length:0},a.prototype.emit=function(y,w,E,C,k,M){var A=e?e+y:y;if(!this._events[A])return!1;var B=this._events[A],N=arguments.length,P,L;if(B.fn){switch(B.once&&this.removeListener(y,B.fn,void 0,!0),N){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,w),!0;case 3:return B.fn.call(B.context,w,E),!0;case 4:return B.fn.call(B.context,w,E,C),!0;case 5:return B.fn.call(B.context,w,E,C,k),!0;case 6:return B.fn.call(B.context,w,E,C,k,M),!0}for(L=1,P=new Array(N-1);L<N;L++)P[L-1]=arguments[L];B.fn.apply(B.context,P)}else{var W=B.length,z;for(L=0;L<W;L++)switch(B[L].once&&this.removeListener(y,B[L].fn,void 0,!0),N){case 1:B[L].fn.call(B[L].context);break;case 2:B[L].fn.call(B[L].context,w);break;case 3:B[L].fn.call(B[L].context,w,E);break;case 4:B[L].fn.call(B[L].context,w,E,C);break;default:if(!P)for(z=1,P=new Array(N-1);z<N;z++)P[z-1]=arguments[z];B[L].fn.apply(B[L].context,P)}}return!0},a.prototype.on=function(y,w,E){return i(this,y,w,E,!1)},a.prototype.once=function(y,w,E){return i(this,y,w,E,!0)},a.prototype.removeListener=function(y,w,E,C){var k=e?e+y:y;if(!this._events[k])return this;if(!w)return o(this,k),this;var M=this._events[k];if(M.fn)M.fn===w&&(!C||M.once)&&(!E||M.context===E)&&o(this,k);else{for(var A=0,B=[],N=M.length;A<N;A++)(M[A].fn!==w||C&&!M[A].once||E&&M[A].context!==E)&&B.push(M[A]);B.length?this._events[k]=B.length===1?B[0]:B:o(this,k)}return this},a.prototype.removeAllListeners=function(y){var w;return y?(w=e?e+y:y,this._events[w]&&o(this,w)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(va);var Rh=va.exports;const Th=hr(Rh);class Je extends Error{constructor(t,e){super(t),this.error=e}}class Lh extends Je{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Ch extends Je{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Nh extends Je{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class Uh extends Je{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Oh extends Je{constructor(){super(...arguments),this.name="WalletAccountError"}}class Js extends Je{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class ir extends Je{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class sr extends Je{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Wn extends Je{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Fh extends Je{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var en;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(en||(en={}));class Ph extends Th{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const s=this.publicKey;if(!s)throw new ir;return t.feePayer=t.feePayer||s,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function Dh(r){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(r())for(const i of t)i()}const n=setInterval(e,1e3);t.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function zh(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),t=r.includes("iphone")||r.includes("ipad"),e=r.includes("safari");return t&&e}function qi(r){return"version"in r}class qh extends Ph{async sendTransaction(t,e,n={}){let s=!0;try{if(qi(t)){if(!this.supportedTransactionVersions)throw new sr("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new sr(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const i=t.serialize();return await e.sendRawTransaction(i,n)}catch(i){throw i instanceof Wn?(s=!1,i):new sr(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=n;t=await this.prepareTransaction(t,e,o),i!=null&&i.length&&t.partialSign(...i),t=await this.signTransaction(t);const a=t.serialize();return await e.sendRawTransaction(a,o)}catch(i){throw i instanceof Wn?(s=!1,i):new sr(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(qi(n)){if(!this.supportedTransactionVersions)throw new Wn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Wn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class $h extends qh{}const Wh="Phantom";class Hh extends $h{constructor(t={}){super(),this.name=Wh,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?en.Unsupported:en.NotDetected,this._disconnected=()=>{const e=this._wallet;e&&(e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new Nh),this.emit("disconnect"))},this._accountChanged=e=>{const n=this._publicKey;if(n){try{e=new ot(e.toBytes())}catch(s){this.emit("error",new Js(s==null?void 0:s.message,s));return}n.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==en.Unsupported&&(zh()?(this._readyState=en.Loadable,this.emit("readyStateChange",this._readyState)):Dh(()=>{var e,n,s;return(n=(e=window.phantom)==null?void 0:e.solana)!=null&&n.isPhantom||(s=window.solana)!=null&&s.isPhantom?(this._readyState=en.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===en.Installed&&await this.connect()}async connect(){var t;try{if(this.connected||this.connecting)return;if(this.readyState===en.Loadable){const s=encodeURIComponent(window.location.href),i=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${s}?ref=${i}`;return}if(this.readyState!==en.Installed)throw new Lh;this._connecting=!0;const e=((t=window.phantom)==null?void 0:t.solana)||window.solana;if(!e.isConnected)try{await e.connect()}catch(s){throw new Ch(s==null?void 0:s.message,s)}if(!e.publicKey)throw new Oh;let n;try{n=new ot(e.publicKey.toBytes())}catch(s){throw new Js(s==null?void 0:s.message,s)}e.on("disconnect",this._disconnected),e.on("accountChanged",this._accountChanged),this._wallet=e,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new Uh(e==null?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,n={}){try{const s=this._wallet;if(!s)throw new ir;try{const{signers:i,...o}=n;qi(t)?i!=null&&i.length&&t.sign(i):(t=await this.prepareTransaction(t,e,o),i!=null&&i.length&&t.partialSign(...i)),o.preflightCommitment=o.preflightCommitment||e.commitment;const{signature:a}=await s.signAndSendTransaction(t,o);return a}catch(i){throw i instanceof Je?i:new sr(i==null?void 0:i.message,i)}}catch(s){throw this.emit("error",s),s}}async signTransaction(t){try{const e=this._wallet;if(!e)throw new ir;try{return await e.signTransaction(t)||t}catch(n){throw new Wn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const e=this._wallet;if(!e)throw new ir;try{return await e.signAllTransactions(t)||t}catch(n){throw new Wn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const e=this._wallet;if(!e)throw new ir;try{const{signature:n}=await e.signMessage(t);return n}catch(n){throw new Fh(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}}function Kh(r){let t,e,n,s,i="Hamstrump Presidential Campaign Funding",o,a,h,y,w,E,C="Want to finance the campaign before public presale?",k,M,A='<a href="mailto:campaignfund@hamstrump.biz">campaignfund@hamstrump.biz</a>';function B(L,W){return L[0]?Gh:jh}let N=B(r),P=N(r);return{c(){t=zt("section"),e=zt("div"),n=zt("article"),s=zt("h2"),s.textContent=i,o=Ge(),a=zt("img"),y=Ge(),P.c(),w=Ge(),E=zt("div"),E.textContent=C,k=Ge(),M=zt("div"),M.innerHTML=A,this.h()},l(L){t=qt(L,"SECTION",{id:!0});var W=je(t);e=qt(W,"DIV",{class:!0});var z=je(e);n=qt(z,"ARTICLE",{class:!0});var q=je(n);s=qt(q,"H2",{class:!0,style:!0,"data-svelte-h":!0}),sn(s)!=="svelte-jtjjl0"&&(s.textContent=i),o=Ve(q),a=qt(q,"IMG",{src:!0,alt:!0,class:!0}),y=Ve(q),P.l(q),w=Ve(q),E=qt(q,"DIV",{"data-svelte-h":!0}),sn(E)!=="svelte-14hoyzd"&&(E.textContent=C),k=Ve(q),M=qt(q,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),sn(M)!=="svelte-9r3iut"&&(M.innerHTML=A),q.forEach($t),z.forEach($t),W.forEach($t),this.h()},h(){Ct(s,"class","highlight svelte-1su4t99"),Es(s,"font-family","CoffeeSpark"),Ba(a.src,h=_r+"/fundingraiser.jpg")||Ct(a,"src",h),Ct(a,"alt","funder"),Ct(a,"class","feature-image svelte-1su4t99"),Ct(M,"class","highlight svelte-1su4t99"),Es(M,"font-family","CoffeeSpark"),Ct(n,"class","feature2 svelte-1su4t99"),Ct(e,"class","container svelte-1su4t99"),Ct(t,"id","features")},m(L,W){$e(L,t,W),At(t,e),At(e,n),At(n,s),At(n,o),At(n,a),At(n,y),P.m(n,null),At(n,w),At(n,E),At(n,k),At(n,M)},p(L,W){N===(N=B(L))&&P?P.p(L,W):(P.d(1),P=N(L),P&&(P.c(),P.m(n,w)))},d(L){L&&$t(t),P.d()}}}function jh(r){let t,e="Connect Wallet",n,s,i="Connect your wallet to participate in the presale.",o,a;return{c(){t=zt("button"),t.textContent=e,n=Ge(),s=zt("div"),s.textContent=i,this.h()},l(h){t=qt(h,"BUTTON",{"data-svelte-h":!0}),sn(t)!=="svelte-liz7ly"&&(t.textContent=e),n=Ve(h),s=qt(h,"DIV",{class:!0,"data-svelte-h":!0}),sn(s)!=="svelte-1ldh6zn"&&(s.textContent=i),this.h()},h(){Ct(s,"class","hamstrump-var")},m(h,y){$e(h,t,y),$e(h,n,y),$e(h,s,y),o||(a=or(t,"click",r[3]),o=!0)},p:Mi,d(h){h&&($t(t),$t(n),$t(s)),o=!1,a()}}}function Gh(r){let t,e,n=r[1].slice(0,4)+"",s,i,o=r[1].slice(-4)+"",a,h,y,w="Disconnect",E,C,k,M,A,B,N,P,L,W="Make Payment",z,q;return{c(){t=zt("p"),e=En("Connected: "),s=En(n),i=En("..."),a=En(o),h=Ge(),y=zt("button"),y.textContent=w,E=Ge(),C=zt("form"),k=zt("label"),M=En("Amount (Max "),A=En(ar),B=En(` SOL):\r
              `),N=zt("input"),P=Ge(),L=zt("button"),L.textContent=W,this.h()},l(H){t=qt(H,"P",{});var G=je(t);e=_n(G,"Connected: "),s=_n(G,n),i=_n(G,"..."),a=_n(G,o),G.forEach($t),h=Ve(H),y=qt(H,"BUTTON",{"data-svelte-h":!0}),sn(y)!=="svelte-1ahcd05"&&(y.textContent=w),E=Ve(H),C=qt(H,"FORM",{class:!0});var vt=je(C);k=qt(vt,"LABEL",{for:!0});var lt=je(k);M=_n(lt,"Amount (Max "),A=_n(lt,ar),B=_n(lt,` SOL):\r
              `),N=qt(lt,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0,class:!0}),lt.forEach($t),P=Ve(vt),L=qt(vt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),sn(L)!=="svelte-18czu88"&&(L.textContent=W),vt.forEach($t),this.h()},h(){Ct(N,"type","number"),Ct(N,"id","amount"),Ct(N,"min","0"),Ct(N,"max",ar),Ct(N,"step","0.1"),Ct(N,"class","svelte-1su4t99"),Ct(k,"for","amount"),Ct(L,"type","submit"),Ct(L,"class","connectme secondary outline"),Ct(C,"class","svelte-1su4t99")},m(H,G){$e(H,t,G),At(t,e),At(t,s),At(t,i),At(t,a),$e(H,h,G),$e(H,y,G),$e(H,E,G),$e(H,C,G),At(C,k),At(k,M),At(k,A),At(k,B),At(k,N),_s(N,r[2]),At(C,P),At(C,L),z||(q=[or(y,"click",r[4]),or(N,"input",r[7]),or(C,"submit",Ma(r[5]))],z=!0)},p(H,G){G&2&&n!==(n=H[1].slice(0,4)+"")&&Bs(s,n),G&2&&o!==(o=H[1].slice(-4)+"")&&Bs(a,o),G&4&&Qs(N.value)!==H[2]&&_s(N,H[2])},d(H){H&&($t(t),$t(h),$t(y),$t(E),$t(C)),z=!1,Aa(q)}}}function Vh(r){let t,e,n,s,i=`<li><a href="${_r}/"><img src="${_r}/coinhamstr.png" alt="Hamstrup" width="40" height="40" style="border-radius: 50%;"/></a></li>`,o,a,h=`<li><a href="${_r}/">Home</a></li>`,y,w,E,C,k="PRESALE",M,A,B,N,P=Kh(r);return{c(){t=zt("header"),e=zt("nav"),n=zt("div"),s=zt("ul"),s.innerHTML=i,o=Ge(),a=zt("ul"),a.innerHTML=h,y=Ge(),w=zt("ul"),E=zt("li"),C=zt("button"),C.textContent=k,M=Ge(),P&&P.c(),A=Ss(),this.h()},l(L){t=qt(L,"HEADER",{class:!0});var W=je(t);e=qt(W,"NAV",{class:!0});var z=je(e);n=qt(z,"DIV",{class:!0});var q=je(n);s=qt(q,"UL",{class:!0,"data-svelte-h":!0}),sn(s)!=="svelte-12w1rc4"&&(s.innerHTML=i),o=Ve(q),a=qt(q,"UL",{class:!0,"data-svelte-h":!0}),sn(a)!=="svelte-h08xer"&&(a.innerHTML=h),y=Ve(q),w=qt(q,"UL",{class:!0});var H=je(w);E=qt(H,"LI",{});var G=je(E);C=qt(G,"BUTTON",{class:!0,"data-svelte-h":!0}),sn(C)!=="svelte-1nc3lnn"&&(C.textContent=k),G.forEach($t),H.forEach($t),q.forEach($t),z.forEach($t),W.forEach($t),M=Ve(L),P&&P.l(L),A=Ss(),this.h()},h(){Ct(s,"class","svelte-1su4t99"),Ct(a,"class","svelte-1su4t99"),Ct(C,"class","connectme secondary outline"),Ct(w,"class","svelte-1su4t99"),Ct(n,"class","container svelte-1su4t99"),Ct(e,"class","svelte-1su4t99"),Ct(t,"class","header svelte-1su4t99")},m(L,W){$e(L,t,W),At(t,e),At(e,n),At(n,s),At(n,o),At(n,a),At(n,y),At(n,w),At(w,E),At(E,C),$e(L,M,W),P&&P.m(L,W),$e(L,A,W),B||(N=or(C,"click",r[6]),B=!0)},p(L,[W]){P.p(L,W)},i:Mi,o:Mi,d(L){L&&($t(t),$t(M),$t(A)),P&&P.d(L),B=!1,N()}}}const ar=200,Zh="9easqKD2r4qsHTyNEUsGoXiefMR8JFWU3jhBsP8v75Bb";function Yh(r,t,e){let n,s,i=!1,o="",a=0;_a(async()=>{s=new Ih(kh("devnet"),"confirmed"),n=new Hh,n.on("connect",()=>{e(0,i=!0),e(1,o=n.publicKey.toBase58())}),n.on("disconnect",()=>{e(0,i=!1),e(1,o="")})});async function h(){if(!n.connected)try{await n.connect()}catch(k){console.error("Error connecting wallet:",k)}}async function y(){n.connected&&await n.disconnect()}async function w(){if(!i){alert("Please connect your wallet.");return}if(a<=0||a>ar){alert(`Amount must be between 0 and ${ar} SOL.`);return}try{const k=new rn().add(lr.transfer({fromPubkey:n.publicKey,toPubkey:new ot(Zh),lamports:a*Mh})),{blockhash:M}=await s.getLatestBlockhash();k.recentBlockhash=M,k.feePayer=n.publicKey;const A=await n.signTransaction(k),B=await s.sendRawTransaction(A.serialize());await s.confirmTransaction(B,"confirmed"),alert(`Payment of ${a} SOL successful!`)}catch(k){console.error("Payment error:",k),alert("An error occurred during payment. Please try again.")}}function E(){Ra("/funding")}function C(){a=Qs(this.value),e(2,a)}return[i,o,a,h,y,w,E,C]}class od extends Ia{constructor(t){super(),ka(this,t,Yh,Vh,Ea,{})}}export{od as component};
