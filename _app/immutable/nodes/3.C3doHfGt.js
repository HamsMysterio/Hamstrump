var La=Object.defineProperty;var Ta=(r,t,e)=>t in r?La(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var le=(r,t,e)=>Ta(r,typeof t!="symbol"?t+"":t,e);import{s as Ca,c as Na,o as Oa,n as Ua,r as Pa,b as za}from"../chunks/scheduler.CctMDInn.js";import{S as Da,i as qa,e as pt,s as ke,w as Fa,n as Ir,h as Ha,c as gt,d as it,f as Ee,j as de,g as Xe,x as $a,a as tt,l as ut,b as zt,y as Wa,q as Ka,o as ja,z as Va,B as Er,t as We,k as Ke,F as Mi,G as Ga,m as rr,D as Za}from"../chunks/index.DxEaYflM.js";import{e as Bi}from"../chunks/each.D6YF6ztN.js";import{d as Ya,B as fe,a as rt}from"../chunks/index.B-rKzsjH.js";import{b as sr}from"../chunks/paths.DWcJ9Ae5.js";import{B as Ja}from"../chunks/ButtonPresale.BO__VbmI.js";import{w as Qa}from"../chunks/index.B1tzFKCc.js";function Ri(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Xa(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Dr(r,...t){if(!Xa(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${r.length}`)}function tc(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ri(r.outputLen),Ri(r.blockLen)}function Mr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function ec(r,t){Dr(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Cn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ys=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Je=(r,t)=>r<<32-t|r>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function nc(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Ks(r){return typeof r=="string"&&(r=nc(r)),Dr(r),r}function rc(...r){let t=0;for(let n=0;n<r.length;n++){const i=r[n];Dr(i),t+=i.length}const e=new Uint8Array(t);for(let n=0,i=0;n<r.length;n++){const s=r[n];e.set(s,i),i+=s.length}return e}class fo{clone(){return this._cloneInto()}}function ho(r){const t=n=>r().update(Ks(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function po(r=32){if(Cn&&typeof Cn.getRandomValues=="function")return Cn.getRandomValues(new Uint8Array(r));if(Cn&&typeof Cn.randomBytes=="function")return Cn.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function sc(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(e>>i&s),u=Number(e&s),l=n?4:0,p=n?0:4;r.setUint32(t+l,o,n),r.setUint32(t+p,u,n)}const ic=(r,t,e)=>r&t^~r&e,oc=(r,t,e)=>r&t^r&e^t&e;class go extends fo{constructor(t,e,n,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ys(this.buffer)}update(t){Mr(this);const{view:e,buffer:n,blockLen:i}=this;t=Ks(t);const s=t.length;for(let o=0;o<s;){const u=Math.min(i-this.pos,s-o);if(u===i){const l=ys(t);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Mr(this),ec(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let v=o;v<i;v++)e[v]=0;sc(n,i-8,BigInt(this.length*8),s),this.process(n,0);const u=ys(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=l/4,g=this.get();if(p>g.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<p;v++)u.setUint32(4*v,g[v],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:i,finished:s,destroyed:o,pos:u}=this;return t.length=i,t.pos=u,t.finished=s,t.destroyed=o,i%e&&t.buffer.set(n),t}}const br=BigInt(2**32-1),Cs=BigInt(32);function mo(r,t=!1){return t?{h:Number(r&br),l:Number(r>>Cs&br)}:{h:Number(r>>Cs&br)|0,l:Number(r&br)|0}}function ac(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=mo(r[i],t);[e[i],n[i]]=[s,o]}return[e,n]}const cc=(r,t)=>BigInt(r>>>0)<<Cs|BigInt(t>>>0),uc=(r,t,e)=>r>>>e,lc=(r,t,e)=>r<<32-e|t>>>e,fc=(r,t,e)=>r>>>e|t<<32-e,hc=(r,t,e)=>r<<32-e|t>>>e,dc=(r,t,e)=>r<<64-e|t>>>e-32,pc=(r,t,e)=>r>>>e-32|t<<64-e,gc=(r,t)=>t,mc=(r,t)=>r,yc=(r,t,e)=>r<<e|t>>>32-e,wc=(r,t,e)=>t<<e|r>>>32-e,bc=(r,t,e)=>t<<e-32|r>>>64-e,vc=(r,t,e)=>r<<e-32|t>>>64-e;function xc(r,t,e,n){const i=(t>>>0)+(n>>>0);return{h:r+e+(i/2**32|0)|0,l:i|0}}const Sc=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),_c=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,kc=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Ec=(r,t,e,n,i)=>t+e+n+i+(r/2**32|0)|0,Ac=(r,t,e,n,i)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0),Ic=(r,t,e,n,i,s)=>t+e+n+i+s+(r/2**32|0)|0,at={fromBig:mo,split:ac,toBig:cc,shrSH:uc,shrSL:lc,rotrSH:fc,rotrSL:hc,rotrBH:dc,rotrBL:pc,rotr32H:gc,rotr32L:mc,rotlSH:yc,rotlSL:wc,rotlBH:bc,rotlBL:vc,add:xc,add3L:Sc,add3H:_c,add4L:kc,add4H:Ec,add5H:Ic,add5L:Ac},[Mc,Bc]=at.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),fn=new Uint32Array(80),hn=new Uint32Array(80);class Rc extends go{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:i,Ch:s,Cl:o,Dh:u,Dl:l,Eh:p,El:g,Fh:v,Fl:A,Gh:k,Gl:I,Hh:E,Hl:w}=this;return[t,e,n,i,s,o,u,l,p,g,v,A,k,I,E,w]}set(t,e,n,i,s,o,u,l,p,g,v,A,k,I,E,w){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=u|0,this.Dl=l|0,this.Eh=p|0,this.El=g|0,this.Fh=v|0,this.Fl=A|0,this.Gh=k|0,this.Gl=I|0,this.Hh=E|0,this.Hl=w|0}process(t,e){for(let _=0;_<16;_++,e+=4)fn[_]=t.getUint32(e),hn[_]=t.getUint32(e+=4);for(let _=16;_<80;_++){const C=fn[_-15]|0,P=hn[_-15]|0,O=at.rotrSH(C,P,1)^at.rotrSH(C,P,8)^at.shrSH(C,P,7),U=at.rotrSL(C,P,1)^at.rotrSL(C,P,8)^at.shrSL(C,P,7),H=fn[_-2]|0,G=hn[_-2]|0,nt=at.rotrSH(H,G,19)^at.rotrBH(H,G,61)^at.shrSH(H,G,6),z=at.rotrSL(H,G,19)^at.rotrBL(H,G,61)^at.shrSL(H,G,6),V=at.add4L(U,z,hn[_-7],hn[_-16]),x=at.add4H(V,O,nt,fn[_-7],fn[_-16]);fn[_]=x|0,hn[_]=V|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:u,Cl:l,Dh:p,Dl:g,Eh:v,El:A,Fh:k,Fl:I,Gh:E,Gl:w,Hh:B,Hl:L}=this;for(let _=0;_<80;_++){const C=at.rotrSH(v,A,14)^at.rotrSH(v,A,18)^at.rotrBH(v,A,41),P=at.rotrSL(v,A,14)^at.rotrSL(v,A,18)^at.rotrBL(v,A,41),O=v&k^~v&E,U=A&I^~A&w,H=at.add5L(L,P,U,Bc[_],hn[_]),G=at.add5H(H,B,C,O,Mc[_],fn[_]),nt=H|0,z=at.rotrSH(n,i,28)^at.rotrBH(n,i,34)^at.rotrBH(n,i,39),V=at.rotrSL(n,i,28)^at.rotrBL(n,i,34)^at.rotrBL(n,i,39),x=n&s^n&u^s&u,a=i&o^i&l^o&l;B=E|0,L=w|0,E=k|0,w=I|0,k=v|0,I=A|0,{h:v,l:A}=at.add(p|0,g|0,G|0,nt|0),p=u|0,g=l|0,u=s|0,l=o|0,s=n|0,o=i|0;const f=at.add3L(nt,V,a);n=at.add3H(f,G,z,x),i=f|0}({h:n,l:i}=at.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=at.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:u,l}=at.add(this.Ch|0,this.Cl|0,u|0,l|0),{h:p,l:g}=at.add(this.Dh|0,this.Dl|0,p|0,g|0),{h:v,l:A}=at.add(this.Eh|0,this.El|0,v|0,A|0),{h:k,l:I}=at.add(this.Fh|0,this.Fl|0,k|0,I|0),{h:E,l:w}=at.add(this.Gh|0,this.Gl|0,E|0,w|0),{h:B,l:L}=at.add(this.Hh|0,this.Hl|0,B|0,L|0),this.set(n,i,s,o,u,l,p,g,v,A,k,I,E,w,B,L)}roundClean(){fn.fill(0),hn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Lc=ho(()=>new Rc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const js=BigInt(0),qr=BigInt(1),Tc=BigInt(2);function En(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function ur(r){if(!En(r))throw new Error("Uint8Array expected")}function ln(r,t){if(typeof t!="boolean")throw new Error(`${r} must be valid boolean, got "${t}".`)}const Cc=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function An(r){ur(r);let t="";for(let e=0;e<r.length;e++)t+=Cc[r[e]];return t}function Un(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function Vs(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const sn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Li(r){if(r>=sn._0&&r<=sn._9)return r-sn._0;if(r>=sn._A&&r<=sn._F)return r-(sn._A-10);if(r>=sn._a&&r<=sn._f)return r-(sn._a-10)}function Fn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let i=0,s=0;i<e;i++,s+=2){const o=Li(r.charCodeAt(s)),u=Li(r.charCodeAt(s+1));if(o===void 0||u===void 0){const l=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}n[i]=o*16+u}return n}function _n(r){return Vs(An(r))}function Dn(r){return ur(r),Vs(An(Uint8Array.from(r).reverse()))}function Hn(r,t){return Fn(r.toString(16).padStart(t*2,"0"))}function ir(r,t){return Hn(r,t).reverse()}function Nc(r){return Fn(Un(r))}function ce(r,t,e){let n;if(typeof t=="string")try{n=Fn(t)}catch(s){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${s}`)}else if(En(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof e=="number"&&i!==e)throw new Error(`${r} expected ${e} bytes, got ${i}`);return n}function In(...r){let t=0;for(let n=0;n<r.length;n++){const i=r[n];ur(i),t+=i.length}const e=new Uint8Array(t);for(let n=0,i=0;n<r.length;n++){const s=r[n];e.set(s,i),i+=s.length}return e}function Oc(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function Uc(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}const ws=r=>typeof r=="bigint"&&js<=r;function Fr(r,t,e){return ws(r)&&ws(t)&&ws(e)&&t<=r&&r<e}function qe(r,t,e,n){if(!Fr(t,e,n))throw new Error(`expected valid ${r}: ${e} <= n < ${n}, got ${typeof t} ${t}`)}function yo(r){let t;for(t=0;r>js;r>>=qr,t+=1);return t}function Pc(r,t){return r>>BigInt(t)&qr}function zc(r,t,e){return r|(e?qr:js)<<BigInt(t)}const Gs=r=>(Tc<<BigInt(r-1))-qr,bs=r=>new Uint8Array(r),Ti=r=>Uint8Array.from(r);function wo(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=bs(r),i=bs(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},u=(...v)=>e(i,n,...v),l=(v=bs())=>{i=u(Ti([0]),v),n=u(),v.length!==0&&(i=u(Ti([1]),v),n=u())},p=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const A=[];for(;v<t;){n=u();const k=n.slice();A.push(k),v+=n.length}return In(...A)};return(v,A)=>{o(),l(v);let k;for(;!(k=A(p()));)l();return o(),k}}const Dc={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||En(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function jn(r,t,e={}){const n=(i,s,o)=>{const u=Dc[s];if(typeof u!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=r[i];if(!(o&&l===void 0)&&!u(l,r))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(e))n(i,s,!0);return r}const qc=()=>{throw new Error("not implemented")};function or(r){const t=new WeakMap;return(e,...n)=>{const i=t.get(e);if(i!==void 0)return i;const s=r(e,...n);return t.set(e,s),s}}const Fc=Object.freeze(Object.defineProperty({__proto__:null,aInRange:qe,abool:ln,abytes:ur,bitGet:Pc,bitLen:yo,bitMask:Gs,bitSet:zc,bytesToHex:An,bytesToNumberBE:_n,bytesToNumberLE:Dn,concatBytes:In,createHmacDrbg:wo,ensureBytes:ce,equalBytes:Oc,hexToBytes:Fn,hexToNumber:Vs,inRange:Fr,isBytes:En,memoized:or,notImplemented:qc,numberToBytesBE:Hn,numberToBytesLE:ir,numberToHexUnpadded:Un,numberToVarBytesBE:Nc,utf8ToBytes:Uc,validateObject:jn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pe=BigInt(0),Bt=BigInt(1),vn=BigInt(2),Hc=BigInt(3),Ns=BigInt(4),Ci=BigInt(5),Ni=BigInt(8);BigInt(9);BigInt(16);function xt(r,t){const e=r%t;return e>=pe?e:t+e}function $c(r,t,e){if(e<=pe||t<pe)throw new Error("Expected power/modulo > 0");if(e===Bt)return pe;let n=Bt;for(;t>pe;)t&Bt&&(n=n*r%e),r=r*r%e,t>>=Bt;return n}function Ot(r,t,e){let n=r;for(;t-- >pe;)n*=n,n%=e;return n}function Os(r,t){if(r===pe||t<=pe)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=xt(r,t),n=t,i=pe,s=Bt;for(;e!==pe;){const u=n/e,l=n%e,p=i-s*u;n=e,e=l,i=s,s=p}if(n!==Bt)throw new Error("invert: does not exist");return xt(i,t)}function Wc(r){const t=(r-Bt)/vn;let e,n,i;for(e=r-Bt,n=0;e%vn===pe;e/=vn,n++);for(i=vn;i<r&&$c(i,t,r)!==r-Bt;i++);if(n===1){const o=(r+Bt)/Ns;return function(l,p){const g=l.pow(p,o);if(!l.eql(l.sqr(g),p))throw new Error("Cannot find square root");return g}}const s=(e+Bt)/vn;return function(u,l){if(u.pow(l,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let p=n,g=u.pow(u.mul(u.ONE,i),e),v=u.pow(l,s),A=u.pow(l,e);for(;!u.eql(A,u.ONE);){if(u.eql(A,u.ZERO))return u.ZERO;let k=1;for(let E=u.sqr(A);k<p&&!u.eql(E,u.ONE);k++)E=u.sqr(E);const I=u.pow(g,Bt<<BigInt(p-k-1));g=u.sqr(I),v=u.mul(v,I),A=u.mul(A,g),p=k}return v}}function Kc(r){if(r%Ns===Hc){const t=(r+Bt)/Ns;return function(n,i){const s=n.pow(i,t);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%Ni===Ci){const t=(r-Ci)/Ni;return function(n,i){const s=n.mul(i,vn),o=n.pow(s,t),u=n.mul(i,o),l=n.mul(n.mul(u,vn),o),p=n.mul(u,n.sub(l,n.ONE));if(!n.eql(n.sqr(p),i))throw new Error("Cannot find square root");return p}}return Wc(r)}const jc=(r,t)=>(xt(r,t)&Bt)===Bt,Vc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Gc(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Vc.reduce((n,i)=>(n[i]="function",n),t);return jn(r,e)}function Zc(r,t,e){if(e<pe)throw new Error("Expected power > 0");if(e===pe)return r.ONE;if(e===Bt)return t;let n=r.ONE,i=t;for(;e>pe;)e&Bt&&(n=r.mul(n,i)),i=r.sqr(i),e>>=Bt;return n}function Yc(r,t){const e=new Array(t.length),n=t.reduce((s,o,u)=>r.is0(o)?s:(e[u]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return t.reduceRight((s,o,u)=>r.is0(o)?s:(e[u]=r.mul(s,e[u]),r.mul(s,o)),i),e}function bo(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Hr(r,t,e=!1,n={}){if(r<=pe)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=bo(r,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Kc(r),u=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:Gs(i),ZERO:pe,ONE:Bt,create:l=>xt(l,r),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return pe<=l&&l<r},is0:l=>l===pe,isOdd:l=>(l&Bt)===Bt,neg:l=>xt(-l,r),eql:(l,p)=>l===p,sqr:l=>xt(l*l,r),add:(l,p)=>xt(l+p,r),sub:(l,p)=>xt(l-p,r),mul:(l,p)=>xt(l*p,r),pow:(l,p)=>Zc(u,l,p),div:(l,p)=>xt(l*Os(p,r),r),sqrN:l=>l*l,addN:(l,p)=>l+p,subN:(l,p)=>l-p,mulN:(l,p)=>l*p,inv:l=>Os(l,r),sqrt:n.sqrt||(l=>o(u,l)),invertBatch:l=>Yc(u,l),cmov:(l,p,g)=>g?p:l,toBytes:l=>e?ir(l,s):Hn(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return e?Dn(l):_n(l)}});return Object.freeze(u)}function vo(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function xo(r){const t=vo(r);return t+Math.ceil(t/2)}function Jc(r,t,e=!1){const n=r.length,i=vo(t),s=xo(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=e?_n(r):Dn(r),u=xt(o,t-Bt)+Bt;return e?ir(u,i):Hn(u,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qc=BigInt(0),vs=BigInt(1),xs=new WeakMap,Oi=new WeakMap;function So(r,t){const e=(s,o)=>{const u=o.negate();return s?u:o},n=s=>{if(!Number.isSafeInteger(s)||s<=0||s>t)throw new Error(`Wrong window size=${s}, should be [1..${t}]`)},i=s=>{n(s);const o=Math.ceil(t/s)+1,u=2**(s-1);return{windows:o,windowSize:u}};return{constTimeNegate:e,unsafeLadder(s,o){let u=r.ZERO,l=s;for(;o>Qc;)o&vs&&(u=u.add(l)),l=l.double(),o>>=vs;return u},precomputeWindow(s,o){const{windows:u,windowSize:l}=i(o),p=[];let g=s,v=g;for(let A=0;A<u;A++){v=g,p.push(v);for(let k=1;k<l;k++)v=v.add(g),p.push(v);g=v.double()}return p},wNAF(s,o,u){const{windows:l,windowSize:p}=i(s);let g=r.ZERO,v=r.BASE;const A=BigInt(2**s-1),k=2**s,I=BigInt(s);for(let E=0;E<l;E++){const w=E*p;let B=Number(u&A);u>>=I,B>p&&(B-=k,u+=vs);const L=w,_=w+Math.abs(B)-1,C=E%2!==0,P=B<0;B===0?v=v.add(e(C,o[L])):g=g.add(e(P,o[_]))}return{p:g,f:v}},wNAFCached(s,o,u){const l=Oi.get(s)||1;let p=xs.get(s);return p||(p=this.precomputeWindow(s,l),l!==1&&xs.set(s,u(p))),this.wNAF(l,p,o)},setWindowSize(s,o){n(o),Oi.set(s,o),xs.delete(s)}}}function _o(r,t,e,n){if(!Array.isArray(e)||!Array.isArray(n)||n.length!==e.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((g,v)=>{if(!t.isValid(g))throw new Error(`wrong scalar at index ${v}`)}),e.forEach((g,v)=>{if(!(g instanceof r))throw new Error(`wrong point at index ${v}`)});const i=yo(BigInt(e.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,u=new Array(o+1).fill(r.ZERO),l=Math.floor((t.BITS-1)/s)*s;let p=r.ZERO;for(let g=l;g>=0;g-=s){u.fill(r.ZERO);for(let A=0;A<n.length;A++){const k=n[A],I=Number(k>>BigInt(g)&BigInt(o));u[I]=u[I].add(e[A])}let v=r.ZERO;for(let A=u.length-1,k=r.ZERO;A>0;A--)k=k.add(u[A]),v=v.add(k);if(p=p.add(v),g!==0)for(let A=0;A<s;A++)p=p.double()}return p}function Zs(r){return Gc(r.Fp),jn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bo(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const He=BigInt(0),Re=BigInt(1),vr=BigInt(2),Xc=BigInt(8),tu={zip215:!0};function eu(r){const t=Zs(r);return jn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function nu(r){const t=eu(r),{Fp:e,n,prehash:i,hash:s,randomBytes:o,nByteLength:u,h:l}=t,p=vr<<BigInt(u*8)-Re,g=e.create,v=Hr(t.n,t.nBitLength),A=t.uvRatio||((h,d)=>{try{return{isValid:!0,value:e.sqrt(h*e.inv(d))}}catch{return{isValid:!1,value:He}}}),k=t.adjustScalarBytes||(h=>h),I=t.domain||((h,d,m)=>{if(ln("phflag",m),d.length||m)throw new Error("Contexts/pre-hash are not supported");return h});function E(h,d){qe("coordinate "+h,d,He,p)}function w(h){if(!(h instanceof _))throw new Error("ExtendedPoint expected")}const B=or((h,d)=>{const{ex:m,ey:S,ez:M}=h,y=h.is0();d==null&&(d=y?Xc:e.inv(M));const c=g(m*d),b=g(S*d),q=g(M*d);if(y)return{x:He,y:Re};if(q!==Re)throw new Error("invZ was invalid");return{x:c,y:b}}),L=or(h=>{const{a:d,d:m}=t;if(h.is0())throw new Error("bad point: ZERO");const{ex:S,ey:M,ez:y,et:c}=h,b=g(S*S),q=g(M*M),$=g(y*y),j=g($*$),ht=g(b*d),et=g($*g(ht+q)),st=g(j+g(m*g(b*q)));if(et!==st)throw new Error("bad point: equation left != right (1)");const ue=g(S*M),ft=g(y*c);if(ue!==ft)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(d,m,S,M){this.ex=d,this.ey=m,this.ez=S,this.et=M,E("x",d),E("y",m),E("z",S),E("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(d){if(d instanceof _)throw new Error("extended point not allowed");const{x:m,y:S}=d||{};return E("x",m),E("y",S),new _(m,S,Re,g(m*S))}static normalizeZ(d){const m=e.invertBatch(d.map(S=>S.ez));return d.map((S,M)=>S.toAffine(m[M])).map(_.fromAffine)}static msm(d,m){return _o(_,v,d,m)}_setWindowSize(d){O.setWindowSize(this,d)}assertValidity(){L(this)}equals(d){w(d);const{ex:m,ey:S,ez:M}=this,{ex:y,ey:c,ez:b}=d,q=g(m*b),$=g(y*M),j=g(S*b),ht=g(c*M);return q===$&&j===ht}is0(){return this.equals(_.ZERO)}negate(){return new _(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{a:d}=t,{ex:m,ey:S,ez:M}=this,y=g(m*m),c=g(S*S),b=g(vr*g(M*M)),q=g(d*y),$=m+S,j=g(g($*$)-y-c),ht=q+c,et=ht-b,st=q-c,ue=g(j*et),ft=g(ht*st),ot=g(j*st),Be=g(et*ht);return new _(ue,ft,Be,ot)}add(d){w(d);const{a:m,d:S}=t,{ex:M,ey:y,ez:c,et:b}=this,{ex:q,ey:$,ez:j,et:ht}=d;if(m===BigInt(-1)){const St=g((y-M)*($+q)),_t=g((y+M)*($-q)),Tn=g(_t-St);if(Tn===He)return this.double();const kt=g(c*vr*ht),Et=g(b*vr*j),Jn=Et+kt,At=_t+St,It=Et-kt,yr=g(Jn*Tn),Ct=g(At*It),Nt=g(Jn*It),wr=g(Tn*At);return new _(yr,Ct,wr,Nt)}const et=g(M*q),st=g(y*$),ue=g(b*S*ht),ft=g(c*j),ot=g((M+y)*(q+$)-et-st),Be=ft-ue,wt=ft+ue,bt=g(st-m*et),gr=g(ot*Be),Lt=g(wt*bt),Tt=g(ot*bt),mr=g(Be*wt);return new _(gr,Lt,mr,Tt)}subtract(d){return this.add(d.negate())}wNAF(d){return O.wNAFCached(this,d,_.normalizeZ)}multiply(d){const m=d;qe("scalar",m,Re,n);const{p:S,f:M}=this.wNAF(m);return _.normalizeZ([S,M])[0]}multiplyUnsafe(d){const m=d;return qe("scalar",m,He,n),m===He?P:this.equals(P)||m===Re?this:this.equals(C)?this.wNAF(m).p:O.unsafeLadder(this,m)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return O.unsafeLadder(this,n).is0()}toAffine(d){return B(this,d)}clearCofactor(){const{h:d}=t;return d===Re?this:this.multiplyUnsafe(d)}static fromHex(d,m=!1){const{d:S,a:M}=t,y=e.BYTES;d=ce("pointHex",d,y),ln("zip215",m);const c=d.slice(),b=d[y-1];c[y-1]=b&-129;const q=Dn(c),$=m?p:e.ORDER;qe("pointHex.y",q,He,$);const j=g(q*q),ht=g(j-Re),et=g(S*j-M);let{isValid:st,value:ue}=A(ht,et);if(!st)throw new Error("Point.fromHex: invalid y coordinate");const ft=(ue&Re)===Re,ot=(b&128)!==0;if(!m&&ue===He&&ot)throw new Error("Point.fromHex: x=0 and x_0=1");return ot!==ft&&(ue=g(-ue)),_.fromAffine({x:ue,y:q})}static fromPrivateKey(d){return G(d).point}toRawBytes(){const{x:d,y:m}=this.toAffine(),S=ir(m,e.BYTES);return S[S.length-1]|=d&Re?128:0,S}toHex(){return An(this.toRawBytes())}}_.BASE=new _(t.Gx,t.Gy,Re,g(t.Gx*t.Gy)),_.ZERO=new _(He,Re,Re,He);const{BASE:C,ZERO:P}=_,O=So(_,u*8);function U(h){return xt(h,n)}function H(h){return U(Dn(h))}function G(h){const d=u;h=ce("private key",h,d);const m=ce("hashed private key",s(h),2*d),S=k(m.slice(0,d)),M=m.slice(d,2*d),y=H(S),c=C.multiply(y),b=c.toRawBytes();return{head:S,prefix:M,scalar:y,point:c,pointBytes:b}}function nt(h){return G(h).pointBytes}function z(h=new Uint8Array,...d){const m=In(...d);return H(s(I(m,ce("context",h),!!i)))}function V(h,d,m={}){h=ce("message",h),i&&(h=i(h));const{prefix:S,scalar:M,pointBytes:y}=G(d),c=z(m.context,S,h),b=C.multiply(c).toRawBytes(),q=z(m.context,b,y,h),$=U(c+q*M);qe("signature.s",$,He,n);const j=In(b,ir($,e.BYTES));return ce("result",j,u*2)}const x=tu;function a(h,d,m,S=x){const{context:M,zip215:y}=S,c=e.BYTES;h=ce("signature",h,2*c),d=ce("message",d),y!==void 0&&ln("zip215",y),i&&(d=i(d));const b=Dn(h.slice(c,2*c));let q,$,j;try{q=_.fromHex(m,y),$=_.fromHex(h.slice(0,c),y),j=C.multiplyUnsafe(b)}catch{return!1}if(!y&&q.isSmallOrder())return!1;const ht=z(M,$.toRawBytes(),q.toRawBytes(),d);return $.add(q.multiplyUnsafe(ht)).subtract(j).clearCofactor().equals(_.ZERO)}return C._setWindowSize(8),{CURVE:t,getPublicKey:nt,sign:V,verify:a,ExtendedPoint:_,utils:{getExtendedPublicKey:G,randomPrivateKey:()=>o(e.BYTES),precompute(h=8,d=_.BASE){return d._setWindowSize(h),d.multiply(BigInt(3)),d}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ys=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ui=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ru=BigInt(1),Pi=BigInt(2);BigInt(3);const su=BigInt(5),iu=BigInt(8);function ou(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),i=BigInt(80),s=Ys,u=r*r%s*r%s,l=Ot(u,Pi,s)*u%s,p=Ot(l,ru,s)*r%s,g=Ot(p,su,s)*p%s,v=Ot(g,t,s)*g%s,A=Ot(v,e,s)*v%s,k=Ot(A,n,s)*A%s,I=Ot(k,i,s)*k%s,E=Ot(I,i,s)*k%s,w=Ot(E,t,s)*g%s;return{pow_p_5_8:Ot(w,Pi,s)*r%s,b2:u}}function au(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function cu(r,t){const e=Ys,n=xt(t*t*t,e),i=xt(n*n*t,e),s=ou(r*i).pow_p_5_8;let o=xt(r*n*s,e);const u=xt(t*o*o,e),l=o,p=xt(o*Ui,e),g=u===r,v=u===xt(-r,e),A=u===xt(-r*Ui,e);return g&&(o=l),(v||A)&&(o=p),jc(o,e)&&(o=xt(-o,e)),{isValid:g||v,value:o}}const uu=Hr(Ys,void 0,!0),lu={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:uu,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:iu,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Lc,randomBytes:po,adjustScalarBytes:au,uvRatio:cu},Js=nu(lu);var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function lr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Qs(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var Xs={exports:{}};const ti=Qs(Ya);Xs.exports;(function(r){(function(t,e){function n(x,a){if(!x)throw new Error(a||"Assertion failed")}function i(x,a){x.super_=a;var f=function(){};f.prototype=a.prototype,x.prototype=new f,x.prototype.constructor=x}function s(x,a,f){if(s.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((a==="le"||a==="be")&&(f=a,a=10),this._init(x||0,a||10,f||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=ti.Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,f){return a.cmp(f)>0?a:f},s.min=function(a,f){return a.cmp(f)<0?a:f},s.prototype._init=function(a,f,h){if(typeof a=="number")return this._initNumber(a,f,h);if(typeof a=="object")return this._initArray(a,f,h);f==="hex"&&(f=16),n(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var d=0;a[0]==="-"&&(d++,this.negative=1),d<a.length&&(f===16?this._parseHex(a,d,h):(this._parseBase(a,f,d),h==="le"&&this._initArray(this.toArray(),f,h)))},s.prototype._initNumber=function(a,f,h){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),f,h)},s.prototype._initArray=function(a,f,h){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var m,S,M=0;if(h==="be")for(d=a.length-1,m=0;d>=0;d-=3)S=a[d]|a[d-1]<<8|a[d-2]<<16,this.words[m]|=S<<M&67108863,this.words[m+1]=S>>>26-M&67108863,M+=24,M>=26&&(M-=26,m++);else if(h==="le")for(d=0,m=0;d<a.length;d+=3)S=a[d]|a[d+1]<<8|a[d+2]<<16,this.words[m]|=S<<M&67108863,this.words[m+1]=S>>>26-M&67108863,M+=24,M>=26&&(M-=26,m++);return this._strip()};function u(x,a){var f=x.charCodeAt(a);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;n(!1,"Invalid character in "+x)}function l(x,a,f){var h=u(x,f);return f-1>=a&&(h|=u(x,f-1)<<4),h}s.prototype._parseHex=function(a,f,h){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var m=0,S=0,M;if(h==="be")for(d=a.length-1;d>=f;d-=2)M=l(a,f,d)<<m,this.words[S]|=M&67108863,m>=18?(m-=18,S+=1,this.words[S]|=M>>>26):m+=8;else{var y=a.length-f;for(d=y%2===0?f+1:f;d<a.length;d+=2)M=l(a,f,d)<<m,this.words[S]|=M&67108863,m>=18?(m-=18,S+=1,this.words[S]|=M>>>26):m+=8}this._strip()};function p(x,a,f,h){for(var d=0,m=0,S=Math.min(x.length,f),M=a;M<S;M++){var y=x.charCodeAt(M)-48;d*=h,y>=49?m=y-49+10:y>=17?m=y-17+10:m=y,n(y>=0&&m<h,"Invalid character"),d+=m}return d}s.prototype._parseBase=function(a,f,h){this.words=[0],this.length=1;for(var d=0,m=1;m<=67108863;m*=f)d++;d--,m=m/f|0;for(var S=a.length-h,M=S%d,y=Math.min(S,S-M)+h,c=0,b=h;b<y;b+=d)c=p(a,b,b+d,f),this.imuln(m),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(M!==0){var q=1;for(c=p(a,b,a.length,f),b=0;b<M;b++)q*=f;this.imuln(q),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function g(x,a){x.words=a.words,x.length=a.length,x.negative=a.negative,x.red=a.red}if(s.prototype._move=function(a){g(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{s.prototype.inspect=v}else s.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,f){a=a||10,f=f|0||1;var h;if(a===16||a==="hex"){h="";for(var d=0,m=0,S=0;S<this.length;S++){var M=this.words[S],y=((M<<d|m)&16777215).toString(16);m=M>>>24-d&16777215,d+=2,d>=26&&(d-=26,S--),m!==0||S!==this.length-1?h=A[6-y.length]+y+h:h=y+h}for(m!==0&&(h=m.toString(16)+h);h.length%f!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(a===(a|0)&&a>=2&&a<=36){var c=k[a],b=I[a];h="";var q=this.clone();for(q.negative=0;!q.isZero();){var $=q.modrn(b).toString(a);q=q.idivn(b),q.isZero()?h=$+h:h=A[c-$.length]+$+h}for(this.isZero()&&(h="0"+h);h.length%f!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,f){return this.toArrayLike(o,a,f)}),s.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var E=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};s.prototype.toArrayLike=function(a,f,h){this._strip();var d=this.byteLength(),m=h||Math.max(1,d);n(d<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0");var S=E(a,m),M=f==="le"?"LE":"BE";return this["_toArrayLike"+M](S,d),S},s.prototype._toArrayLikeLE=function(a,f){for(var h=0,d=0,m=0,S=0;m<this.length;m++){var M=this.words[m]<<S|d;a[h++]=M&255,h<a.length&&(a[h++]=M>>8&255),h<a.length&&(a[h++]=M>>16&255),S===6?(h<a.length&&(a[h++]=M>>24&255),d=0,S=0):(d=M>>>24,S+=2)}if(h<a.length)for(a[h++]=d;h<a.length;)a[h++]=0},s.prototype._toArrayLikeBE=function(a,f){for(var h=a.length-1,d=0,m=0,S=0;m<this.length;m++){var M=this.words[m]<<S|d;a[h--]=M&255,h>=0&&(a[h--]=M>>8&255),h>=0&&(a[h--]=M>>16&255),S===6?(h>=0&&(a[h--]=M>>24&255),d=0,S=0):(d=M>>>24,S+=2)}if(h>=0)for(a[h--]=d;h>=0;)a[h--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var f=a,h=0;return f>=4096&&(h+=13,f>>>=13),f>=64&&(h+=7,f>>>=7),f>=8&&(h+=4,f>>>=4),f>=2&&(h+=2,f>>>=2),h+f},s.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,h=0;return f&8191||(h+=13,f>>>=13),f&127||(h+=7,f>>>=7),f&15||(h+=4,f>>>=4),f&3||(h+=2,f>>>=2),f&1||h++,h},s.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function w(x){for(var a=new Array(x.bitLength()),f=0;f<a.length;f++){var h=f/26|0,d=f%26;a[f]=x.words[h]>>>d&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var h=this._zeroBits(this.words[f]);if(a+=h,h!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var h=0;h<f.length;h++)this.words[h]=this.words[h]&a.words[h];return this.length=f.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var d=0;d<h.length;d++)this.words[d]=f.words[d]^h.words[d];if(this!==f)for(;d<f.length;d++)this.words[d]=f.words[d];return this.length=f.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,h=a%26;this._expand(f),h>0&&f--;for(var d=0;d<f;d++)this.words[d]=~this.words[d]&67108863;return h>0&&(this.words[d]=~this.words[d]&67108863>>26-h),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,f){n(typeof a=="number"&&a>=0);var h=a/26|0,d=a%26;return this._expand(h+1),f?this.words[h]=this.words[h]|1<<d:this.words[h]=this.words[h]&~(1<<d),this._strip()},s.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var m=0,S=0;S<d.length;S++)f=(h.words[S]|0)+(d.words[S]|0)+m,this.words[S]=f&67108863,m=f>>>26;for(;m!==0&&S<h.length;S++)f=(h.words[S]|0)+m,this.words[S]=f&67108863,m=f>>>26;if(this.length=h.length,m!==0)this.words[this.length]=m,this.length++;else if(h!==this)for(;S<h.length;S++)this.words[S]=h.words[S];return this},s.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h=this.cmp(a);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,m;h>0?(d=this,m=a):(d=a,m=this);for(var S=0,M=0;M<m.length;M++)f=(d.words[M]|0)-(m.words[M]|0)+S,S=f>>26,this.words[M]=f&67108863;for(;S!==0&&M<d.length;M++)f=(d.words[M]|0)+S,S=f>>26,this.words[M]=f&67108863;if(S===0&&M<d.length&&d!==this)for(;M<d.length;M++)this.words[M]=d.words[M];return this.length=Math.max(this.length,M),d!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function B(x,a,f){f.negative=a.negative^x.negative;var h=x.length+a.length|0;f.length=h,h=h-1|0;var d=x.words[0]|0,m=a.words[0]|0,S=d*m,M=S&67108863,y=S/67108864|0;f.words[0]=M;for(var c=1;c<h;c++){for(var b=y>>>26,q=y&67108863,$=Math.min(c,a.length-1),j=Math.max(0,c-x.length+1);j<=$;j++){var ht=c-j|0;d=x.words[ht]|0,m=a.words[j]|0,S=d*m+q,b+=S/67108864|0,q=S&67108863}f.words[c]=q|0,y=b|0}return y!==0?f.words[c]=y|0:f.length--,f._strip()}var L=function(a,f,h){var d=a.words,m=f.words,S=h.words,M=0,y,c,b,q=d[0]|0,$=q&8191,j=q>>>13,ht=d[1]|0,et=ht&8191,st=ht>>>13,ue=d[2]|0,ft=ue&8191,ot=ue>>>13,Be=d[3]|0,wt=Be&8191,bt=Be>>>13,gr=d[4]|0,Lt=gr&8191,Tt=gr>>>13,mr=d[5]|0,St=mr&8191,_t=mr>>>13,Tn=d[6]|0,kt=Tn&8191,Et=Tn>>>13,Jn=d[7]|0,At=Jn&8191,It=Jn>>>13,yr=d[8]|0,Ct=yr&8191,Nt=yr>>>13,wr=d[9]|0,Dt=wr&8191,qt=wr>>>13,wi=m[0]|0,Ft=wi&8191,Ht=wi>>>13,bi=m[1]|0,$t=bi&8191,Wt=bi>>>13,vi=m[2]|0,Kt=vi&8191,jt=vi>>>13,xi=m[3]|0,Vt=xi&8191,Gt=xi>>>13,Si=m[4]|0,Zt=Si&8191,Yt=Si>>>13,_i=m[5]|0,Jt=_i&8191,Qt=_i>>>13,ki=m[6]|0,Xt=ki&8191,te=ki>>>13,Ei=m[7]|0,ee=Ei&8191,ne=Ei>>>13,Ai=m[8]|0,re=Ai&8191,se=Ai>>>13,Ii=m[9]|0,ie=Ii&8191,oe=Ii>>>13;h.negative=a.negative^f.negative,h.length=19,y=Math.imul($,Ft),c=Math.imul($,Ht),c=c+Math.imul(j,Ft)|0,b=Math.imul(j,Ht);var Qr=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,y=Math.imul(et,Ft),c=Math.imul(et,Ht),c=c+Math.imul(st,Ft)|0,b=Math.imul(st,Ht),y=y+Math.imul($,$t)|0,c=c+Math.imul($,Wt)|0,c=c+Math.imul(j,$t)|0,b=b+Math.imul(j,Wt)|0;var Xr=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,y=Math.imul(ft,Ft),c=Math.imul(ft,Ht),c=c+Math.imul(ot,Ft)|0,b=Math.imul(ot,Ht),y=y+Math.imul(et,$t)|0,c=c+Math.imul(et,Wt)|0,c=c+Math.imul(st,$t)|0,b=b+Math.imul(st,Wt)|0,y=y+Math.imul($,Kt)|0,c=c+Math.imul($,jt)|0,c=c+Math.imul(j,Kt)|0,b=b+Math.imul(j,jt)|0;var ts=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(ts>>>26)|0,ts&=67108863,y=Math.imul(wt,Ft),c=Math.imul(wt,Ht),c=c+Math.imul(bt,Ft)|0,b=Math.imul(bt,Ht),y=y+Math.imul(ft,$t)|0,c=c+Math.imul(ft,Wt)|0,c=c+Math.imul(ot,$t)|0,b=b+Math.imul(ot,Wt)|0,y=y+Math.imul(et,Kt)|0,c=c+Math.imul(et,jt)|0,c=c+Math.imul(st,Kt)|0,b=b+Math.imul(st,jt)|0,y=y+Math.imul($,Vt)|0,c=c+Math.imul($,Gt)|0,c=c+Math.imul(j,Vt)|0,b=b+Math.imul(j,Gt)|0;var es=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(es>>>26)|0,es&=67108863,y=Math.imul(Lt,Ft),c=Math.imul(Lt,Ht),c=c+Math.imul(Tt,Ft)|0,b=Math.imul(Tt,Ht),y=y+Math.imul(wt,$t)|0,c=c+Math.imul(wt,Wt)|0,c=c+Math.imul(bt,$t)|0,b=b+Math.imul(bt,Wt)|0,y=y+Math.imul(ft,Kt)|0,c=c+Math.imul(ft,jt)|0,c=c+Math.imul(ot,Kt)|0,b=b+Math.imul(ot,jt)|0,y=y+Math.imul(et,Vt)|0,c=c+Math.imul(et,Gt)|0,c=c+Math.imul(st,Vt)|0,b=b+Math.imul(st,Gt)|0,y=y+Math.imul($,Zt)|0,c=c+Math.imul($,Yt)|0,c=c+Math.imul(j,Zt)|0,b=b+Math.imul(j,Yt)|0;var ns=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(ns>>>26)|0,ns&=67108863,y=Math.imul(St,Ft),c=Math.imul(St,Ht),c=c+Math.imul(_t,Ft)|0,b=Math.imul(_t,Ht),y=y+Math.imul(Lt,$t)|0,c=c+Math.imul(Lt,Wt)|0,c=c+Math.imul(Tt,$t)|0,b=b+Math.imul(Tt,Wt)|0,y=y+Math.imul(wt,Kt)|0,c=c+Math.imul(wt,jt)|0,c=c+Math.imul(bt,Kt)|0,b=b+Math.imul(bt,jt)|0,y=y+Math.imul(ft,Vt)|0,c=c+Math.imul(ft,Gt)|0,c=c+Math.imul(ot,Vt)|0,b=b+Math.imul(ot,Gt)|0,y=y+Math.imul(et,Zt)|0,c=c+Math.imul(et,Yt)|0,c=c+Math.imul(st,Zt)|0,b=b+Math.imul(st,Yt)|0,y=y+Math.imul($,Jt)|0,c=c+Math.imul($,Qt)|0,c=c+Math.imul(j,Jt)|0,b=b+Math.imul(j,Qt)|0;var rs=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(rs>>>26)|0,rs&=67108863,y=Math.imul(kt,Ft),c=Math.imul(kt,Ht),c=c+Math.imul(Et,Ft)|0,b=Math.imul(Et,Ht),y=y+Math.imul(St,$t)|0,c=c+Math.imul(St,Wt)|0,c=c+Math.imul(_t,$t)|0,b=b+Math.imul(_t,Wt)|0,y=y+Math.imul(Lt,Kt)|0,c=c+Math.imul(Lt,jt)|0,c=c+Math.imul(Tt,Kt)|0,b=b+Math.imul(Tt,jt)|0,y=y+Math.imul(wt,Vt)|0,c=c+Math.imul(wt,Gt)|0,c=c+Math.imul(bt,Vt)|0,b=b+Math.imul(bt,Gt)|0,y=y+Math.imul(ft,Zt)|0,c=c+Math.imul(ft,Yt)|0,c=c+Math.imul(ot,Zt)|0,b=b+Math.imul(ot,Yt)|0,y=y+Math.imul(et,Jt)|0,c=c+Math.imul(et,Qt)|0,c=c+Math.imul(st,Jt)|0,b=b+Math.imul(st,Qt)|0,y=y+Math.imul($,Xt)|0,c=c+Math.imul($,te)|0,c=c+Math.imul(j,Xt)|0,b=b+Math.imul(j,te)|0;var ss=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(ss>>>26)|0,ss&=67108863,y=Math.imul(At,Ft),c=Math.imul(At,Ht),c=c+Math.imul(It,Ft)|0,b=Math.imul(It,Ht),y=y+Math.imul(kt,$t)|0,c=c+Math.imul(kt,Wt)|0,c=c+Math.imul(Et,$t)|0,b=b+Math.imul(Et,Wt)|0,y=y+Math.imul(St,Kt)|0,c=c+Math.imul(St,jt)|0,c=c+Math.imul(_t,Kt)|0,b=b+Math.imul(_t,jt)|0,y=y+Math.imul(Lt,Vt)|0,c=c+Math.imul(Lt,Gt)|0,c=c+Math.imul(Tt,Vt)|0,b=b+Math.imul(Tt,Gt)|0,y=y+Math.imul(wt,Zt)|0,c=c+Math.imul(wt,Yt)|0,c=c+Math.imul(bt,Zt)|0,b=b+Math.imul(bt,Yt)|0,y=y+Math.imul(ft,Jt)|0,c=c+Math.imul(ft,Qt)|0,c=c+Math.imul(ot,Jt)|0,b=b+Math.imul(ot,Qt)|0,y=y+Math.imul(et,Xt)|0,c=c+Math.imul(et,te)|0,c=c+Math.imul(st,Xt)|0,b=b+Math.imul(st,te)|0,y=y+Math.imul($,ee)|0,c=c+Math.imul($,ne)|0,c=c+Math.imul(j,ee)|0,b=b+Math.imul(j,ne)|0;var is=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(is>>>26)|0,is&=67108863,y=Math.imul(Ct,Ft),c=Math.imul(Ct,Ht),c=c+Math.imul(Nt,Ft)|0,b=Math.imul(Nt,Ht),y=y+Math.imul(At,$t)|0,c=c+Math.imul(At,Wt)|0,c=c+Math.imul(It,$t)|0,b=b+Math.imul(It,Wt)|0,y=y+Math.imul(kt,Kt)|0,c=c+Math.imul(kt,jt)|0,c=c+Math.imul(Et,Kt)|0,b=b+Math.imul(Et,jt)|0,y=y+Math.imul(St,Vt)|0,c=c+Math.imul(St,Gt)|0,c=c+Math.imul(_t,Vt)|0,b=b+Math.imul(_t,Gt)|0,y=y+Math.imul(Lt,Zt)|0,c=c+Math.imul(Lt,Yt)|0,c=c+Math.imul(Tt,Zt)|0,b=b+Math.imul(Tt,Yt)|0,y=y+Math.imul(wt,Jt)|0,c=c+Math.imul(wt,Qt)|0,c=c+Math.imul(bt,Jt)|0,b=b+Math.imul(bt,Qt)|0,y=y+Math.imul(ft,Xt)|0,c=c+Math.imul(ft,te)|0,c=c+Math.imul(ot,Xt)|0,b=b+Math.imul(ot,te)|0,y=y+Math.imul(et,ee)|0,c=c+Math.imul(et,ne)|0,c=c+Math.imul(st,ee)|0,b=b+Math.imul(st,ne)|0,y=y+Math.imul($,re)|0,c=c+Math.imul($,se)|0,c=c+Math.imul(j,re)|0,b=b+Math.imul(j,se)|0;var os=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(os>>>26)|0,os&=67108863,y=Math.imul(Dt,Ft),c=Math.imul(Dt,Ht),c=c+Math.imul(qt,Ft)|0,b=Math.imul(qt,Ht),y=y+Math.imul(Ct,$t)|0,c=c+Math.imul(Ct,Wt)|0,c=c+Math.imul(Nt,$t)|0,b=b+Math.imul(Nt,Wt)|0,y=y+Math.imul(At,Kt)|0,c=c+Math.imul(At,jt)|0,c=c+Math.imul(It,Kt)|0,b=b+Math.imul(It,jt)|0,y=y+Math.imul(kt,Vt)|0,c=c+Math.imul(kt,Gt)|0,c=c+Math.imul(Et,Vt)|0,b=b+Math.imul(Et,Gt)|0,y=y+Math.imul(St,Zt)|0,c=c+Math.imul(St,Yt)|0,c=c+Math.imul(_t,Zt)|0,b=b+Math.imul(_t,Yt)|0,y=y+Math.imul(Lt,Jt)|0,c=c+Math.imul(Lt,Qt)|0,c=c+Math.imul(Tt,Jt)|0,b=b+Math.imul(Tt,Qt)|0,y=y+Math.imul(wt,Xt)|0,c=c+Math.imul(wt,te)|0,c=c+Math.imul(bt,Xt)|0,b=b+Math.imul(bt,te)|0,y=y+Math.imul(ft,ee)|0,c=c+Math.imul(ft,ne)|0,c=c+Math.imul(ot,ee)|0,b=b+Math.imul(ot,ne)|0,y=y+Math.imul(et,re)|0,c=c+Math.imul(et,se)|0,c=c+Math.imul(st,re)|0,b=b+Math.imul(st,se)|0,y=y+Math.imul($,ie)|0,c=c+Math.imul($,oe)|0,c=c+Math.imul(j,ie)|0,b=b+Math.imul(j,oe)|0;var as=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(as>>>26)|0,as&=67108863,y=Math.imul(Dt,$t),c=Math.imul(Dt,Wt),c=c+Math.imul(qt,$t)|0,b=Math.imul(qt,Wt),y=y+Math.imul(Ct,Kt)|0,c=c+Math.imul(Ct,jt)|0,c=c+Math.imul(Nt,Kt)|0,b=b+Math.imul(Nt,jt)|0,y=y+Math.imul(At,Vt)|0,c=c+Math.imul(At,Gt)|0,c=c+Math.imul(It,Vt)|0,b=b+Math.imul(It,Gt)|0,y=y+Math.imul(kt,Zt)|0,c=c+Math.imul(kt,Yt)|0,c=c+Math.imul(Et,Zt)|0,b=b+Math.imul(Et,Yt)|0,y=y+Math.imul(St,Jt)|0,c=c+Math.imul(St,Qt)|0,c=c+Math.imul(_t,Jt)|0,b=b+Math.imul(_t,Qt)|0,y=y+Math.imul(Lt,Xt)|0,c=c+Math.imul(Lt,te)|0,c=c+Math.imul(Tt,Xt)|0,b=b+Math.imul(Tt,te)|0,y=y+Math.imul(wt,ee)|0,c=c+Math.imul(wt,ne)|0,c=c+Math.imul(bt,ee)|0,b=b+Math.imul(bt,ne)|0,y=y+Math.imul(ft,re)|0,c=c+Math.imul(ft,se)|0,c=c+Math.imul(ot,re)|0,b=b+Math.imul(ot,se)|0,y=y+Math.imul(et,ie)|0,c=c+Math.imul(et,oe)|0,c=c+Math.imul(st,ie)|0,b=b+Math.imul(st,oe)|0;var cs=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(cs>>>26)|0,cs&=67108863,y=Math.imul(Dt,Kt),c=Math.imul(Dt,jt),c=c+Math.imul(qt,Kt)|0,b=Math.imul(qt,jt),y=y+Math.imul(Ct,Vt)|0,c=c+Math.imul(Ct,Gt)|0,c=c+Math.imul(Nt,Vt)|0,b=b+Math.imul(Nt,Gt)|0,y=y+Math.imul(At,Zt)|0,c=c+Math.imul(At,Yt)|0,c=c+Math.imul(It,Zt)|0,b=b+Math.imul(It,Yt)|0,y=y+Math.imul(kt,Jt)|0,c=c+Math.imul(kt,Qt)|0,c=c+Math.imul(Et,Jt)|0,b=b+Math.imul(Et,Qt)|0,y=y+Math.imul(St,Xt)|0,c=c+Math.imul(St,te)|0,c=c+Math.imul(_t,Xt)|0,b=b+Math.imul(_t,te)|0,y=y+Math.imul(Lt,ee)|0,c=c+Math.imul(Lt,ne)|0,c=c+Math.imul(Tt,ee)|0,b=b+Math.imul(Tt,ne)|0,y=y+Math.imul(wt,re)|0,c=c+Math.imul(wt,se)|0,c=c+Math.imul(bt,re)|0,b=b+Math.imul(bt,se)|0,y=y+Math.imul(ft,ie)|0,c=c+Math.imul(ft,oe)|0,c=c+Math.imul(ot,ie)|0,b=b+Math.imul(ot,oe)|0;var us=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(us>>>26)|0,us&=67108863,y=Math.imul(Dt,Vt),c=Math.imul(Dt,Gt),c=c+Math.imul(qt,Vt)|0,b=Math.imul(qt,Gt),y=y+Math.imul(Ct,Zt)|0,c=c+Math.imul(Ct,Yt)|0,c=c+Math.imul(Nt,Zt)|0,b=b+Math.imul(Nt,Yt)|0,y=y+Math.imul(At,Jt)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(It,Jt)|0,b=b+Math.imul(It,Qt)|0,y=y+Math.imul(kt,Xt)|0,c=c+Math.imul(kt,te)|0,c=c+Math.imul(Et,Xt)|0,b=b+Math.imul(Et,te)|0,y=y+Math.imul(St,ee)|0,c=c+Math.imul(St,ne)|0,c=c+Math.imul(_t,ee)|0,b=b+Math.imul(_t,ne)|0,y=y+Math.imul(Lt,re)|0,c=c+Math.imul(Lt,se)|0,c=c+Math.imul(Tt,re)|0,b=b+Math.imul(Tt,se)|0,y=y+Math.imul(wt,ie)|0,c=c+Math.imul(wt,oe)|0,c=c+Math.imul(bt,ie)|0,b=b+Math.imul(bt,oe)|0;var ls=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(ls>>>26)|0,ls&=67108863,y=Math.imul(Dt,Zt),c=Math.imul(Dt,Yt),c=c+Math.imul(qt,Zt)|0,b=Math.imul(qt,Yt),y=y+Math.imul(Ct,Jt)|0,c=c+Math.imul(Ct,Qt)|0,c=c+Math.imul(Nt,Jt)|0,b=b+Math.imul(Nt,Qt)|0,y=y+Math.imul(At,Xt)|0,c=c+Math.imul(At,te)|0,c=c+Math.imul(It,Xt)|0,b=b+Math.imul(It,te)|0,y=y+Math.imul(kt,ee)|0,c=c+Math.imul(kt,ne)|0,c=c+Math.imul(Et,ee)|0,b=b+Math.imul(Et,ne)|0,y=y+Math.imul(St,re)|0,c=c+Math.imul(St,se)|0,c=c+Math.imul(_t,re)|0,b=b+Math.imul(_t,se)|0,y=y+Math.imul(Lt,ie)|0,c=c+Math.imul(Lt,oe)|0,c=c+Math.imul(Tt,ie)|0,b=b+Math.imul(Tt,oe)|0;var fs=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(fs>>>26)|0,fs&=67108863,y=Math.imul(Dt,Jt),c=Math.imul(Dt,Qt),c=c+Math.imul(qt,Jt)|0,b=Math.imul(qt,Qt),y=y+Math.imul(Ct,Xt)|0,c=c+Math.imul(Ct,te)|0,c=c+Math.imul(Nt,Xt)|0,b=b+Math.imul(Nt,te)|0,y=y+Math.imul(At,ee)|0,c=c+Math.imul(At,ne)|0,c=c+Math.imul(It,ee)|0,b=b+Math.imul(It,ne)|0,y=y+Math.imul(kt,re)|0,c=c+Math.imul(kt,se)|0,c=c+Math.imul(Et,re)|0,b=b+Math.imul(Et,se)|0,y=y+Math.imul(St,ie)|0,c=c+Math.imul(St,oe)|0,c=c+Math.imul(_t,ie)|0,b=b+Math.imul(_t,oe)|0;var hs=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(hs>>>26)|0,hs&=67108863,y=Math.imul(Dt,Xt),c=Math.imul(Dt,te),c=c+Math.imul(qt,Xt)|0,b=Math.imul(qt,te),y=y+Math.imul(Ct,ee)|0,c=c+Math.imul(Ct,ne)|0,c=c+Math.imul(Nt,ee)|0,b=b+Math.imul(Nt,ne)|0,y=y+Math.imul(At,re)|0,c=c+Math.imul(At,se)|0,c=c+Math.imul(It,re)|0,b=b+Math.imul(It,se)|0,y=y+Math.imul(kt,ie)|0,c=c+Math.imul(kt,oe)|0,c=c+Math.imul(Et,ie)|0,b=b+Math.imul(Et,oe)|0;var ds=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(ds>>>26)|0,ds&=67108863,y=Math.imul(Dt,ee),c=Math.imul(Dt,ne),c=c+Math.imul(qt,ee)|0,b=Math.imul(qt,ne),y=y+Math.imul(Ct,re)|0,c=c+Math.imul(Ct,se)|0,c=c+Math.imul(Nt,re)|0,b=b+Math.imul(Nt,se)|0,y=y+Math.imul(At,ie)|0,c=c+Math.imul(At,oe)|0,c=c+Math.imul(It,ie)|0,b=b+Math.imul(It,oe)|0;var ps=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(ps>>>26)|0,ps&=67108863,y=Math.imul(Dt,re),c=Math.imul(Dt,se),c=c+Math.imul(qt,re)|0,b=Math.imul(qt,se),y=y+Math.imul(Ct,ie)|0,c=c+Math.imul(Ct,oe)|0,c=c+Math.imul(Nt,ie)|0,b=b+Math.imul(Nt,oe)|0;var gs=(M+y|0)+((c&8191)<<13)|0;M=(b+(c>>>13)|0)+(gs>>>26)|0,gs&=67108863,y=Math.imul(Dt,ie),c=Math.imul(Dt,oe),c=c+Math.imul(qt,ie)|0,b=Math.imul(qt,oe);var ms=(M+y|0)+((c&8191)<<13)|0;return M=(b+(c>>>13)|0)+(ms>>>26)|0,ms&=67108863,S[0]=Qr,S[1]=Xr,S[2]=ts,S[3]=es,S[4]=ns,S[5]=rs,S[6]=ss,S[7]=is,S[8]=os,S[9]=as,S[10]=cs,S[11]=us,S[12]=ls,S[13]=fs,S[14]=hs,S[15]=ds,S[16]=ps,S[17]=gs,S[18]=ms,M!==0&&(S[19]=M,h.length++),h};Math.imul||(L=B);function _(x,a,f){f.negative=a.negative^x.negative,f.length=x.length+a.length;for(var h=0,d=0,m=0;m<f.length-1;m++){var S=d;d=0;for(var M=h&67108863,y=Math.min(m,a.length-1),c=Math.max(0,m-x.length+1);c<=y;c++){var b=m-c,q=x.words[b]|0,$=a.words[c]|0,j=q*$,ht=j&67108863;S=S+(j/67108864|0)|0,ht=ht+M|0,M=ht&67108863,S=S+(ht>>>26)|0,d+=S>>>26,S&=67108863}f.words[m]=M,h=S,S=d}return h!==0?f.words[m]=h:f.length--,f._strip()}function C(x,a,f){return _(x,a,f)}s.prototype.mulTo=function(a,f){var h,d=this.length+a.length;return this.length===10&&a.length===10?h=L(this,a,f):d<63?h=B(this,a,f):d<1024?h=_(this,a,f):h=C(this,a,f),h},s.prototype.mul=function(a){var f=new s(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},s.prototype.mulf=function(a){var f=new s(null);return f.words=new Array(this.length+a.length),C(this,a,f)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var f=a<0;f&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var h=0,d=0;d<this.length;d++){var m=(this.words[d]|0)*a,S=(m&67108863)+(h&67108863);h>>=26,h+=m/67108864|0,h+=S>>>26,this.words[d]=S&67108863}return h!==0&&(this.words[d]=h,this.length++),f?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var f=w(a);if(f.length===0)return new s(1);for(var h=this,d=0;d<f.length&&f[d]===0;d++,h=h.sqr());if(++d<f.length)for(var m=h.sqr();d<f.length;d++,m=m.sqr())f[d]!==0&&(h=h.mul(m));return h},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var f=a%26,h=(a-f)/26,d=67108863>>>26-f<<26-f,m;if(f!==0){var S=0;for(m=0;m<this.length;m++){var M=this.words[m]&d,y=(this.words[m]|0)-M<<f;this.words[m]=y|S,S=M>>>26-f}S&&(this.words[m]=S,this.length++)}if(h!==0){for(m=this.length-1;m>=0;m--)this.words[m+h]=this.words[m];for(m=0;m<h;m++)this.words[m]=0;this.length+=h}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,f,h){n(typeof a=="number"&&a>=0);var d;f?d=(f-f%26)/26:d=0;var m=a%26,S=Math.min((a-m)/26,this.length),M=67108863^67108863>>>m<<m,y=h;if(d-=S,d=Math.max(0,d),y){for(var c=0;c<S;c++)y.words[c]=this.words[c];y.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=d);c--){var q=this.words[c]|0;this.words[c]=b<<26-m|q>>>m,b=q&M}return y&&b!==0&&(y.words[y.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,f,h){return n(this.negative===0),this.iushrn(a,f,h)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,h=(a-f)/26,d=1<<f;if(this.length<=h)return!1;var m=this.words[h];return!!(m&d)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,h=(a-f)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(f!==0&&h++,this.length=Math.min(h,this.length),f!==0){var d=67108863^67108863>>>f<<f;this.words[this.length-1]&=d}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,f,h){var d=a.length+h,m;this._expand(d);var S,M=0;for(m=0;m<a.length;m++){S=(this.words[m+h]|0)+M;var y=(a.words[m]|0)*f;S-=y&67108863,M=(S>>26)-(y/67108864|0),this.words[m+h]=S&67108863}for(;m<this.length-h;m++)S=(this.words[m+h]|0)+M,M=S>>26,this.words[m+h]=S&67108863;if(M===0)return this._strip();for(n(M===-1),M=0,m=0;m<this.length;m++)S=-(this.words[m]|0)+M,M=S>>26,this.words[m]=S&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,f){var h=this.length-a.length,d=this.clone(),m=a,S=m.words[m.length-1]|0,M=this._countBits(S);h=26-M,h!==0&&(m=m.ushln(h),d.iushln(h),S=m.words[m.length-1]|0);var y=d.length-m.length,c;if(f!=="mod"){c=new s(null),c.length=y+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var q=d.clone()._ishlnsubmul(m,1,y);q.negative===0&&(d=q,c&&(c.words[y]=1));for(var $=y-1;$>=0;$--){var j=(d.words[m.length+$]|0)*67108864+(d.words[m.length+$-1]|0);for(j=Math.min(j/S|0,67108863),d._ishlnsubmul(m,j,$);d.negative!==0;)j--,d.negative=0,d._ishlnsubmul(m,1,$),d.isZero()||(d.negative^=1);c&&(c.words[$]=j)}return c&&c._strip(),d._strip(),f!=="div"&&h!==0&&d.iushrn(h),{div:c||null,mod:d}},s.prototype.divmod=function(a,f,h){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var d,m,S;return this.negative!==0&&a.negative===0?(S=this.neg().divmod(a,f),f!=="mod"&&(d=S.div.neg()),f!=="div"&&(m=S.mod.neg(),h&&m.negative!==0&&m.iadd(a)),{div:d,mod:m}):this.negative===0&&a.negative!==0?(S=this.divmod(a.neg(),f),f!=="mod"&&(d=S.div.neg()),{div:d,mod:S.mod}):this.negative&a.negative?(S=this.neg().divmod(a.neg(),f),f!=="div"&&(m=S.mod.neg(),h&&m.negative!==0&&m.isub(a)),{div:S.div,mod:m}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,f)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var h=f.div.negative!==0?f.mod.isub(a):f.mod,d=a.ushrn(1),m=a.andln(1),S=h.cmp(d);return S<0||m===1&&S===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},s.prototype.modrn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var h=(1<<26)%a,d=0,m=this.length-1;m>=0;m--)d=(h*d+(this.words[m]|0))%a;return f?-d:d},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var m=(this.words[d]|0)+h*67108864;this.words[d]=m/a|0,h=m%a}return this._strip(),f?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var f=this,h=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var d=new s(1),m=new s(0),S=new s(0),M=new s(1),y=0;f.isEven()&&h.isEven();)f.iushrn(1),h.iushrn(1),++y;for(var c=h.clone(),b=f.clone();!f.isZero();){for(var q=0,$=1;!(f.words[0]&$)&&q<26;++q,$<<=1);if(q>0)for(f.iushrn(q);q-- >0;)(d.isOdd()||m.isOdd())&&(d.iadd(c),m.isub(b)),d.iushrn(1),m.iushrn(1);for(var j=0,ht=1;!(h.words[0]&ht)&&j<26;++j,ht<<=1);if(j>0)for(h.iushrn(j);j-- >0;)(S.isOdd()||M.isOdd())&&(S.iadd(c),M.isub(b)),S.iushrn(1),M.iushrn(1);f.cmp(h)>=0?(f.isub(h),d.isub(S),m.isub(M)):(h.isub(f),S.isub(d),M.isub(m))}return{a:S,b:M,gcd:h.iushln(y)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var f=this,h=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var d=new s(1),m=new s(0),S=h.clone();f.cmpn(1)>0&&h.cmpn(1)>0;){for(var M=0,y=1;!(f.words[0]&y)&&M<26;++M,y<<=1);if(M>0)for(f.iushrn(M);M-- >0;)d.isOdd()&&d.iadd(S),d.iushrn(1);for(var c=0,b=1;!(h.words[0]&b)&&c<26;++c,b<<=1);if(c>0)for(h.iushrn(c);c-- >0;)m.isOdd()&&m.iadd(S),m.iushrn(1);f.cmp(h)>=0?(f.isub(h),d.isub(m)):(h.isub(f),m.isub(d))}var q;return f.cmpn(1)===0?q=d:q=m,q.cmpn(0)<0&&q.iadd(a),q},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),h=a.clone();f.negative=0,h.negative=0;for(var d=0;f.isEven()&&h.isEven();d++)f.iushrn(1),h.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;h.isEven();)h.iushrn(1);var m=f.cmp(h);if(m<0){var S=f;f=h,h=S}else if(m===0||h.cmpn(1)===0)break;f.isub(h)}while(!0);return h.iushln(d)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var f=a%26,h=(a-f)/26,d=1<<f;if(this.length<=h)return this._expand(h+1),this.words[h]|=d,this;for(var m=d,S=h;m!==0&&S<this.length;S++){var M=this.words[S]|0;M+=m,m=M>>>26,M&=67108863,this.words[S]=M}return m!==0&&(this.words[S]=m,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var h;if(this.length>1)h=1;else{f&&(a=-a),n(a<=67108863,"Number is too big");var d=this.words[0]|0;h=d===a?0:d<a?-1:1}return this.negative!==0?-h|0:h},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,h=this.length-1;h>=0;h--){var d=this.words[h]|0,m=a.words[h]|0;if(d!==m){d<m?f=-1:d>m&&(f=1);break}}return f},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new z(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var P={k256:null,p224:null,p192:null,p25519:null};function O(x,a){this.name=x,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}O.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},O.prototype.ireduce=function(a){var f=a,h;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),h=f.bitLength();while(h>this.n);var d=h<this.n?-1:f.ucmp(this.p);return d===0?(f.words[0]=0,f.length=1):d>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},O.prototype.split=function(a,f){a.iushrn(this.n,0,f)},O.prototype.imulK=function(a){return a.imul(this.k)};function U(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(U,O),U.prototype.split=function(a,f){for(var h=4194303,d=Math.min(a.length,9),m=0;m<d;m++)f.words[m]=a.words[m];if(f.length=d,a.length<=9){a.words[0]=0,a.length=1;return}var S=a.words[9];for(f.words[f.length++]=S&h,m=10;m<a.length;m++){var M=a.words[m]|0;a.words[m-10]=(M&h)<<4|S>>>22,S=M}S>>>=22,a.words[m-10]=S,S===0&&a.length>10?a.length-=10:a.length-=9},U.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,h=0;h<a.length;h++){var d=a.words[h]|0;f+=d*977,a.words[h]=f&67108863,f=d*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function H(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(H,O);function G(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(G,O);function nt(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(nt,O),nt.prototype.imulK=function(a){for(var f=0,h=0;h<a.length;h++){var d=(a.words[h]|0)*19+f,m=d&67108863;d>>>=26,a.words[h]=m,f=d}return f!==0&&(a.words[a.length++]=f),a},s._prime=function(a){if(P[a])return P[a];var f;if(a==="k256")f=new U;else if(a==="p224")f=new H;else if(a==="p192")f=new G;else if(a==="p25519")f=new nt;else throw new Error("Unknown prime "+a);return P[a]=f,f};function z(x){if(typeof x=="string"){var a=s._prime(x);this.m=a.p,this.prime=a}else n(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}z.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},z.prototype._verify2=function(a,f){n((a.negative|f.negative)===0,"red works only with positives"),n(a.red&&a.red===f.red,"red works only with red numbers")},z.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(g(a,a.umod(this.m)._forceRed(this)),a)},z.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},z.prototype.add=function(a,f){this._verify2(a,f);var h=a.add(f);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},z.prototype.iadd=function(a,f){this._verify2(a,f);var h=a.iadd(f);return h.cmp(this.m)>=0&&h.isub(this.m),h},z.prototype.sub=function(a,f){this._verify2(a,f);var h=a.sub(f);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},z.prototype.isub=function(a,f){this._verify2(a,f);var h=a.isub(f);return h.cmpn(0)<0&&h.iadd(this.m),h},z.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},z.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},z.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},z.prototype.isqr=function(a){return this.imul(a,a.clone())},z.prototype.sqr=function(a){return this.mul(a,a)},z.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(n(f%2===1),f===3){var h=this.m.add(new s(1)).iushrn(2);return this.pow(a,h)}for(var d=this.m.subn(1),m=0;!d.isZero()&&d.andln(1)===0;)m++,d.iushrn(1);n(!d.isZero());var S=new s(1).toRed(this),M=S.redNeg(),y=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new s(2*c*c).toRed(this);this.pow(c,y).cmp(M)!==0;)c.redIAdd(M);for(var b=this.pow(c,d),q=this.pow(a,d.addn(1).iushrn(1)),$=this.pow(a,d),j=m;$.cmp(S)!==0;){for(var ht=$,et=0;ht.cmp(S)!==0;et++)ht=ht.redSqr();n(et<j);var st=this.pow(b,new s(1).iushln(j-et-1));q=q.redMul(st),b=st.redSqr(),$=$.redMul(b),j=et}return q},z.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},z.prototype.pow=function(a,f){if(f.isZero())return new s(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var h=4,d=new Array(1<<h);d[0]=new s(1).toRed(this),d[1]=a;for(var m=2;m<d.length;m++)d[m]=this.mul(d[m-1],a);var S=d[0],M=0,y=0,c=f.bitLength()%26;for(c===0&&(c=26),m=f.length-1;m>=0;m--){for(var b=f.words[m],q=c-1;q>=0;q--){var $=b>>q&1;if(S!==d[0]&&(S=this.sqr(S)),$===0&&M===0){y=0;continue}M<<=1,M|=$,y++,!(y!==h&&(m!==0||q!==0))&&(S=this.mul(S,d[M]),y=0,M=0)}c=26}return S},z.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},z.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},s.mont=function(a){return new V(a)};function V(x){z.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(V,z),V.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},V.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},V.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var h=a.imul(f),d=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(d).iushrn(this.shift),S=m;return m.cmp(this.m)>=0?S=m.isub(this.m):m.cmpn(0)<0&&(S=m.iadd(this.m)),S._forceRed(this)},V.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new s(0)._forceRed(this);var h=a.mul(f),d=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(d).iushrn(this.shift),S=m;return m.cmp(this.m)>=0?S=m.isub(this.m):m.cmpn(0)<0&&(S=m.iadd(this.m)),S._forceRed(this)},V.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(r,Ge)})(Xs);var ko=Xs.exports;const zi=lr(ko);var Us={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=ti,n=e.Buffer;function i(o,u){for(var l in o)u[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(i(e,t),t.Buffer=s);function s(o,u,l){return n(o,u,l)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,u,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,u,l)},s.alloc=function(o,u,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return u!==void 0?typeof l=="string"?p.fill(u,l):p.fill(u):p.fill(0),p},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Us,Us.exports);var Eo=Us.exports,xr=Eo.Buffer;function fu(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=r.length,u=r.charAt(0),l=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=xr.from(k)),!xr.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var I=0,E=0,w=0,B=k.length;w!==B&&k[w]===0;)w++,I++;for(var L=(B-w)*p+1>>>0,_=new Uint8Array(L);w!==B;){for(var C=k[w],P=0,O=L-1;(C!==0||P<E)&&O!==-1;O--,P++)C+=256*_[O]>>>0,_[O]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");E=P,w++}for(var U=L-E;U!==L&&_[U]===0;)U++;for(var H=u.repeat(I);U<L;++U)H+=r.charAt(_[U]);return H}function v(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return xr.alloc(0);for(var I=0,E=0,w=0;k[I]===u;)E++,I++;for(var B=(k.length-I)*l+1>>>0,L=new Uint8Array(B);I<k.length;){var _=t[k.charCodeAt(I)];if(_===255)return;for(var C=0,P=B-1;(_!==0||C<w)&&P!==-1;P--,C++)_+=o*L[P]>>>0,L[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=C,I++}for(var O=B-w;O!==B&&L[O]===0;)O++;var U=xr.allocUnsafe(E+(B-O));U.fill(0,0,E);for(var H=E;O!==B;)U[H++]=L[O++];return U}function A(k){var I=v(k);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:v,decode:A}}var hu=fu,du=hu,pu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",gu=du(pu);const be=lr(gu),mu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pn=new Uint32Array(64);class yu extends go{constructor(){super(64,32,8,!1),this.A=dn[0]|0,this.B=dn[1]|0,this.C=dn[2]|0,this.D=dn[3]|0,this.E=dn[4]|0,this.F=dn[5]|0,this.G=dn[6]|0,this.H=dn[7]|0}get(){const{A:t,B:e,C:n,D:i,E:s,F:o,G:u,H:l}=this;return[t,e,n,i,s,o,u,l]}set(t,e,n,i,s,o,u,l){this.A=t|0,this.B=e|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=u|0,this.H=l|0}process(t,e){for(let v=0;v<16;v++,e+=4)pn[v]=t.getUint32(e,!1);for(let v=16;v<64;v++){const A=pn[v-15],k=pn[v-2],I=Je(A,7)^Je(A,18)^A>>>3,E=Je(k,17)^Je(k,19)^k>>>10;pn[v]=E+pn[v-7]+I+pn[v-16]|0}let{A:n,B:i,C:s,D:o,E:u,F:l,G:p,H:g}=this;for(let v=0;v<64;v++){const A=Je(u,6)^Je(u,11)^Je(u,25),k=g+A+ic(u,l,p)+mu[v]+pn[v]|0,E=(Je(n,2)^Je(n,13)^Je(n,22))+oc(n,i,s)|0;g=p,p=l,l=u,u=o+k|0,o=s,s=i,i=n,n=k+E|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,u=u+this.E|0,l=l+this.F|0,p=p+this.G|0,g=g+this.H|0,this.set(n,i,s,o,u,l,p,g)}roundClean(){pn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ps=ho(()=>new yu);var we={},Sr=Eo.Buffer;function wu(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=r.length,u=r.charAt(0),l=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=Sr.from(k)),!Sr.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var I=0,E=0,w=0,B=k.length;w!==B&&k[w]===0;)w++,I++;for(var L=(B-w)*p+1>>>0,_=new Uint8Array(L);w!==B;){for(var C=k[w],P=0,O=L-1;(C!==0||P<E)&&O!==-1;O--,P++)C+=256*_[O]>>>0,_[O]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");E=P,w++}for(var U=L-E;U!==L&&_[U]===0;)U++;for(var H=u.repeat(I);U<L;++U)H+=r.charAt(_[U]);return H}function v(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return Sr.alloc(0);for(var I=0,E=0,w=0;k[I]===u;)E++,I++;for(var B=(k.length-I)*l+1>>>0,L=new Uint8Array(B);I<k.length;){var _=t[k.charCodeAt(I)];if(_===255)return;for(var C=0,P=B-1;(_!==0||C<w)&&P!==-1;P--,C++)_+=o*L[P]>>>0,L[P]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=C,I++}for(var O=B-w;O!==B&&L[O]===0;)O++;var U=Sr.allocUnsafe(E+(B-O));U.fill(0,0,E);for(var H=E;O!==B;)U[H++]=L[O++];return U}function A(k){var I=v(k);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:v,decode:A}}var bu=wu,vu=bu,xu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Su=vu(xu);function an(r,t,e){return t<=r&&r<=e}function $r(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function _u(r){for(var t=String(r),e=t.length,n=0,i=[];n<e;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===e-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var u=s&1023,l=o&1023;i.push(65536+(u<<10)+l),n+=1}else i.push(65533)}n+=1}return i}function ku(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Br=-1;function ei(r){this.tokens=[].slice.call(r)}ei.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Br},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var $n=-1;function Ss(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Rr="utf-8";function Lr(r,t){if(!(this instanceof Lr))return new Lr(r,t);if(r=r!==void 0?String(r).toLowerCase():Rr,r!==Rr)throw new Error("Encoding not supported. Only utf-8 is supported");t=$r(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Lr.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=$r(e),this._streaming||(this._decoder=new Eu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var i=new ei(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==$n);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===$n)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),ku(s)}};function Tr(r,t){if(!(this instanceof Tr))return new Tr(r,t);if(r=r!==void 0?String(r).toLowerCase():Rr,r!==Rr)throw new Error("Encoding not supported. Only utf-8 is supported");t=$r(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Tr.prototype={encode:function(t,e){t=t?String(t):"",e=$r(e),this._streaming||(this._encoder=new Au(this._options)),this._streaming=!!e.stream;for(var n=[],i=new ei(_u(t)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==$n);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==$n;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function Eu(r){var t=r.fatal,e=0,n=0,i=0,s=128,o=191;this.handler=function(u,l){if(l===Br&&i!==0)return i=0,Ss(t);if(l===Br)return $n;if(i===0){if(an(l,0,127))return l;if(an(l,194,223))i=1,e=l-192;else if(an(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,e=l-224;else if(an(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,e=l-240;else return Ss(t);return e=e<<6*i,null}if(!an(l,s,o))return e=i=n=0,s=128,o=191,u.prepend(l),Ss(t);if(s=128,o=191,n+=1,e+=l-128<<6*(i-n),n!==i)return null;var p=e;return e=i=n=0,p}}function Au(r){r.fatal,this.handler=function(t,e){if(e===Br)return $n;if(an(e,0,127))return e;var n,i;an(e,128,2047)?(n=1,i=192):an(e,2048,65535)?(n=2,i=224):an(e,65536,1114111)&&(n=3,i=240);for(var s=[(e>>6*n)+i];n>0;){var o=e>>6*(n-1);s.push(128|o&63),n-=1}return s}}const Iu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Lr,TextEncoder:Tr},Symbol.toStringTag,{value:"Module"})),Mu=Qs(Iu);var Bu=Ge&&Ge.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Ru=Ge&&Ge.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),en=Ge&&Ge.__decorate||function(r,t,e,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,n);else for(var u=r.length-1;u>=0;u--)(o=r[u])&&(s=(i<3?o(s):i>3?o(t,e,s):o(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s},Lu=Ge&&Ge.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Bu(t,r,e);return Ru(t,r),t},Ao=Ge&&Ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(we,"__esModule",{value:!0});var Io=we.deserializeUnchecked=Co=we.deserialize=To=we.serialize=we.BinaryReader=we.BinaryWriter=we.BorshError=we.baseDecode=we.baseEncode=void 0;const mn=Ao(ko),Mo=Ao(Su),Tu=Lu(Mu),Cu=typeof TextDecoder!="function"?Tu.TextDecoder:TextDecoder,Nu=new Cu("utf-8",{fatal:!0});function Ou(r){return typeof r=="string"&&(r=fe.from(r,"utf8")),Mo.default.encode(fe.from(r))}we.baseEncode=Ou;function Uu(r){return fe.from(Mo.default.decode(r))}we.baseDecode=Uu;const _s=1024;class Ae extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}we.BorshError=Ae;class Bo{constructor(){this.buf=fe.alloc(_s),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=fe.concat([this.buf,fe.alloc(_s)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(fe.from(new mn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(fe.from(new mn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(fe.from(new mn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(fe.from(new mn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=fe.concat([fe.from(this.buf.subarray(0,this.length)),t,fe.alloc(_s)]),this.length+=t.length}writeString(t){this.maybeResize();const e=fe.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(fe.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}we.BinaryWriter=Bo;function nn(r,t,e){const n=e.value;e.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Ae("Reached the end of buffer when deserializing")}throw s}}}class Ce{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new mn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new mn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new mn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new mn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Ae(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Nu.decode(e)}catch(n){throw new Ae(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let i=0;i<e;++i)n.push(t());return n}}en([nn],Ce.prototype,"readU8",null);en([nn],Ce.prototype,"readU16",null);en([nn],Ce.prototype,"readU32",null);en([nn],Ce.prototype,"readU64",null);en([nn],Ce.prototype,"readU128",null);en([nn],Ce.prototype,"readU256",null);en([nn],Ce.prototype,"readU512",null);en([nn],Ce.prototype,"readString",null);en([nn],Ce.prototype,"readFixedArray",null);en([nn],Ce.prototype,"readArray",null);we.BinaryReader=Ce;function Ro(r){return r.charAt(0).toUpperCase()+r.slice(1)}function xn(r,t,e,n,i){try{if(typeof n=="string")i[`write${Ro(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new Ae(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);i.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new Ae(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let s=0;s<n[1];s++)xn(r,null,e[s],n[0],i)}else i.writeArray(e,s=>{xn(r,t,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?i.writeU8(0):(i.writeU8(1),xn(r,t,e,n.type,i));break}case"map":{i.writeU32(e.size),e.forEach((s,o)=>{xn(r,t,o,n.key,i),xn(r,t,s,n.value,i)});break}default:throw new Ae(`FieldType ${n} unrecognized`)}else Lo(r,e,i)}catch(s){throw s instanceof Ae&&s.addToFieldPath(t),s}}function Lo(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new Ae(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{xn(r,i,t[i],s,e)});else if(n.kind==="enum"){const i=t[n.field];for(let s=0;s<n.values.length;++s){const[o,u]=n.values[s];if(o===i){e.writeU8(s),xn(r,o,t[o],u,e);break}}}else throw new Ae(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Pu(r,t,e=Bo){const n=new e;return Lo(r,t,n),n.toArray()}var To=we.serialize=Pu;function Sn(r,t,e,n){try{if(typeof e=="string")return n[`read${Ro(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const i=[];for(let s=0;s<e[1];s++)i.push(Sn(r,null,e[0],n));return i}else return n.readArray(()=>Sn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?Sn(r,t,e.type,n):void 0;if(e.kind==="map"){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const u=Sn(r,t,e.key,n),l=Sn(r,t,e.value,n);i.set(u,l)}return i}return ni(r,e,n)}catch(i){throw i instanceof Ae&&i.addToFieldPath(t),i}}function ni(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new Ae(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of r.get(t).fields)i[s]=Sn(r,s,o,e);return new t(i)}if(n.kind==="enum"){const i=e.readU8();if(i>=n.values.length)throw new Ae(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],u=Sn(r,s,o,e);return new t({[s]:u})}throw new Ae(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function zu(r,t,e,n=Ce){const i=new n(e),s=ni(r,t,i);if(i.offset<e.length)throw new Ae(`Unexpected ${e.length-i.offset} bytes after deserialized data`);return s}var Co=we.deserialize=zu;function Du(r,t,e,n=Ce){const i=new n(e);return ni(r,t,i)}Io=we.deserializeUnchecked=Du;var T={};Object.defineProperty(T,"__esModule",{value:!0});T.s16=T.s8=T.nu64be=T.u48be=T.u40be=T.u32be=T.u24be=T.u16be=me=T.nu64=T.u48=T.u40=J=T.u32=T.u24=Ue=T.u16=mt=T.u8=kn=T.offset=T.greedy=T.Constant=T.UTF8=T.CString=T.Blob=T.Boolean=T.BitField=T.BitStructure=T.VariantLayout=T.Union=T.UnionLayoutDiscriminator=T.UnionDiscriminator=T.Structure=T.Sequence=T.DoubleBE=T.Double=T.FloatBE=T.Float=T.NearInt64BE=T.NearInt64=T.NearUInt64BE=T.NearUInt64=T.IntBE=T.Int=T.UIntBE=T.UInt=T.OffsetLayout=T.GreedyCount=T.ExternalLayout=T.bindConstructorLayout=T.nameWithProperty=T.Layout=T.uint8ArrayToBuffer=T.checkUint8Array=void 0;T.constant=T.utf8=T.cstr=Ut=T.blob=T.unionLayoutDiscriminator=T.union=Ie=T.seq=T.bits=Z=T.struct=T.f64be=T.f64=T.f32be=T.f32=T.ns64be=T.s48be=T.s40be=T.s32be=T.s24be=T.s16be=Te=T.ns64=T.s48=T.s40=T.s32=T.s24=void 0;const ri=ti;function Vn(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}T.checkUint8Array=Vn;function dt(r){return Vn(r),ri.Buffer.from(r.buffer,r.byteOffset,r.length)}T.uint8ArrayToBuffer=dt;class yt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}T.Layout=yt;function si(r,t){return t.property?r+"["+t.property+"]":r}T.nameWithProperty=si;function qu(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof yt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}T.bindConstructorLayout=qu;class Le extends yt{isCount(){throw new Error("ExternalLayout is abstract")}}T.ExternalLayout=Le;class No extends Le{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Vn(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}T.GreedyCount=No;class ii extends Le{constructor(t,e=0,n){if(!(t instanceof yt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Fe||this.layout instanceof Ve}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}T.OffsetLayout=ii;class Fe extends yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return dt(t).readUIntLE(e,this.span)}encode(t,e,n=0){return dt(e).writeUIntLE(t,n,this.span),this.span}}T.UInt=Fe;class Ve extends yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return dt(t).readUIntBE(e,this.span)}encode(t,e,n=0){return dt(e).writeUIntBE(t,n,this.span),this.span}}T.UIntBE=Ve;class Mn extends yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return dt(t).readIntLE(e,this.span)}encode(t,e,n=0){return dt(e).writeIntLE(t,n,this.span),this.span}}T.Int=Mn;class Gn extends yt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return dt(t).readIntBE(e,this.span)}encode(t,e,n=0){return dt(e).writeIntBE(t,n,this.span),this.span}}T.IntBE=Gn;const zs=Math.pow(2,32);function Wr(r){const t=Math.floor(r/zs),e=r-t*zs;return{hi32:t,lo32:e}}function Kr(r,t){return r*zs+t}class Oo extends yt{constructor(t){super(8,t)}decode(t,e=0){const n=dt(t),i=n.readUInt32LE(e),s=n.readUInt32LE(e+4);return Kr(s,i)}encode(t,e,n=0){const i=Wr(t),s=dt(e);return s.writeUInt32LE(i.lo32,n),s.writeUInt32LE(i.hi32,n+4),8}}T.NearUInt64=Oo;class Uo extends yt{constructor(t){super(8,t)}decode(t,e=0){const n=dt(t),i=n.readUInt32BE(e),s=n.readUInt32BE(e+4);return Kr(i,s)}encode(t,e,n=0){const i=Wr(t),s=dt(e);return s.writeUInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}T.NearUInt64BE=Uo;class Po extends yt{constructor(t){super(8,t)}decode(t,e=0){const n=dt(t),i=n.readUInt32LE(e),s=n.readInt32LE(e+4);return Kr(s,i)}encode(t,e,n=0){const i=Wr(t),s=dt(e);return s.writeUInt32LE(i.lo32,n),s.writeInt32LE(i.hi32,n+4),8}}T.NearInt64=Po;class zo extends yt{constructor(t){super(8,t)}decode(t,e=0){const n=dt(t),i=n.readInt32BE(e),s=n.readUInt32BE(e+4);return Kr(i,s)}encode(t,e,n=0){const i=Wr(t),s=dt(e);return s.writeInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}T.NearInt64BE=zo;class Do extends yt{constructor(t){super(4,t)}decode(t,e=0){return dt(t).readFloatLE(e)}encode(t,e,n=0){return dt(e).writeFloatLE(t,n),4}}T.Float=Do;class qo extends yt{constructor(t){super(4,t)}decode(t,e=0){return dt(t).readFloatBE(e)}encode(t,e,n=0){return dt(e).writeFloatBE(t,n),4}}T.FloatBE=qo;class Fo extends yt{constructor(t){super(8,t)}decode(t,e=0){return dt(t).readDoubleLE(e)}encode(t,e,n=0){return dt(e).writeDoubleLE(t,n),8}}T.Double=Fo;class Ho extends yt{constructor(t){super(8,t)}decode(t,e=0){return dt(t).readDoubleBE(e)}encode(t,e,n=0){return dt(e).writeDoubleBE(t,n),8}}T.DoubleBE=Ho;class $o extends yt{constructor(t,e,n){if(!(t instanceof yt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Le&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof Le)&&0<t.span&&(i=e*t.span),super(i,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof Le&&(i=i.decode(t,e)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let s=0;for(;s<i;)n+=this.elementLayout.getSpan(t,e+n),++s}return n}decode(t,e=0){const n=[];let i=0,s=this.count;for(s instanceof Le&&(s=s.decode(t,e));i<s;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return n}encode(t,e,n=0){const i=this.elementLayout,s=t.reduce((o,u)=>o+i.encode(u,e,n+o),0);return this.count instanceof Le&&this.count.encode(t.length,e,n),s}}T.Sequence=$o;class Wo extends yt{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof yt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,s)=>{const o=s.getSpan(t,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){Vn(t);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const i=n;let s=0,o=0;for(const u of this.fields){let l=u.span;if(o=0<l?l:0,u.property!==void 0){const p=t[u.property];p!==void 0&&(o=u.encode(p,e,n),0>l&&(l=u.getSpan(e,n)))}s=n,n+=l}return s+o-i}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}T.Structure=Wo;class oi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}T.UnionDiscriminator=oi;class Cr extends oi{constructor(t,e){if(!(t instanceof Le&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}T.UnionLayoutDiscriminator=Cr;class ai extends yt{constructor(t,e,n){let i;if(t instanceof Fe||t instanceof Ve)i=new Cr(new ii(t));else if(t instanceof Le&&t.isCount())i=new Cr(t);else if(t instanceof oi)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof yt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&(t instanceof Fe||t instanceof Ve)&&(s+=i.layout.span)),super(s,n),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof Fe||t instanceof Ve,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return o(u)},this.configGetSourceVariant=function(u){o=u.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const i=this.discriminator,s=i.decode(t,e),o=this.registry[s];if(o===void 0){const u=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[u.property]=u.decode(t,e+l)}else n=o.decode(t,e);return n}encode(t,e,n=0){const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=s.layout.span),s.encode(t[s.property],e,n),u+o.encode(t[o.property],e,n+u)}return i.encode(t,e,n)}addVariant(t,e,n){const i=new Ko(this,t,e,n);return this.registry[t]=i,i}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}T.Union=ai;class Ko extends yt{constructor(t,e,n,i){if(!(t instanceof ai))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof yt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=n?n.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+n)),n+i}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,n+i),s+=this.layout.getSpan(e,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}T.VariantLayout=Ko;function Nn(r){return 0>r&&(r+=4294967296),r}class ci extends yt{constructor(t,e,n){if(!(t instanceof Fe||t instanceof Ve))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(s){return i=Nn(s),this},this._packedGetValue=function(){return i}}decode(t,e=0){const n=this.makeDestinationObject(),i=this.word.decode(t,e);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(t));return n}encode(t,e,n=0){const i=this.word.decode(e,n);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=t[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new ui(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new jo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}T.BitStructure=ci;class ui{constructor(t,e,n){if(!(t instanceof ci))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*t.span,s=t.fields.reduce((o,u)=>o+u.bits,0);if(e+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-e),this.wordMask=Nn(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return Nn(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Nn(t&this.valueMask))throw new TypeError(si("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=Nn(t<<this.start);this.container._packedSetValue(Nn(e&~this.wordMask)|n)}}T.BitField=ui;let jo=class extends ui{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};T.Boolean=jo;class Vo extends yt{constructor(t,e){if(!(t instanceof Le&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Le||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),dt(t).slice(e,e+n)}encode(t,e,n){let i=this.length;if(this.length instanceof Le&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(si("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>e.length)throw new RangeError("encoding overruns Uint8Array");const s=dt(t);return dt(e).write(s.toString("hex"),n,i,"hex"),this.length instanceof Le&&this.length.encode(i,e,n),i}}T.Blob=Vo;class Go extends yt{constructor(t){super(-1,t)}getSpan(t,e=0){Vn(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return dt(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const i=ri.Buffer.from(t,"utf8"),s=i.length;if(n+s>e.length)throw new RangeError("encoding overruns Buffer");const o=dt(e);return i.copy(o,n),o[n+s]=0,s+1}}T.CString=Go;class Zo extends yt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Vn(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return dt(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const i=ri.Buffer.from(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(dt(e),n),s}}T.UTF8=Zo;class Yo extends yt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}T.Constant=Yo;T.greedy=(r,t)=>new No(r,t);var kn=T.offset=(r,t,e)=>new ii(r,t,e),mt=T.u8=r=>new Fe(1,r),Ue=T.u16=r=>new Fe(2,r);T.u24=r=>new Fe(3,r);var J=T.u32=r=>new Fe(4,r);T.u40=r=>new Fe(5,r);T.u48=r=>new Fe(6,r);var me=T.nu64=r=>new Oo(r);T.u16be=r=>new Ve(2,r);T.u24be=r=>new Ve(3,r);T.u32be=r=>new Ve(4,r);T.u40be=r=>new Ve(5,r);T.u48be=r=>new Ve(6,r);T.nu64be=r=>new Uo(r);T.s8=r=>new Mn(1,r);T.s16=r=>new Mn(2,r);T.s24=r=>new Mn(3,r);T.s32=r=>new Mn(4,r);T.s40=r=>new Mn(5,r);T.s48=r=>new Mn(6,r);var Te=T.ns64=r=>new Po(r);T.s16be=r=>new Gn(2,r);T.s24be=r=>new Gn(3,r);T.s32be=r=>new Gn(4,r);T.s40be=r=>new Gn(5,r);T.s48be=r=>new Gn(6,r);T.ns64be=r=>new zo(r);T.f32=r=>new Do(r);T.f32be=r=>new qo(r);T.f64=r=>new Fo(r);T.f64be=r=>new Ho(r);var Z=T.struct=(r,t,e)=>new Wo(r,t,e);T.bits=(r,t,e)=>new ci(r,t,e);var Ie=T.seq=(r,t,e)=>new $o(r,t,e);T.union=(r,t,e)=>new ai(r,t,e);T.unionLayoutDiscriminator=(r,t)=>new Cr(r,t);var Ut=T.blob=(r,t)=>new Vo(r,t);T.cstr=r=>new Go(r);T.utf8=(r,t)=>new Zo(r,t);T.constant=(r,t)=>new Yo(r,t);var fr={};Object.defineProperty(fr,"__esModule",{value:!0});function Fu(r){{const t=fe.from(r);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Hu=fr.toBigIntLE=Fu;function $u(r){{const t=r.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}fr.toBigIntBE=$u;function Wu(r,t){{const e=r.toString(16),n=fe.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}}var Ku=fr.toBufferLE=Wu;function ju(r,t){{const e=r.toString(16);return fe.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}fr.toBufferBE=ju;class Vu extends TypeError{constructor(t,e){let n;const{message:i,explanation:s,...o}=t,{path:u}=t,l=u.length===0?i:`At path: ${u.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function Gu(r){return hr(r)&&typeof r[Symbol.iterator]=="function"}function hr(r){return typeof r=="object"&&r!=null}function Nr(r){return hr(r)&&!Array.isArray(r)}function Ze(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Zu(r){const{done:t,value:e}=r.next();return t?void 0:e}function Yu(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=t,{type:o}=e,{refinement:u,message:l=`Expected a value of type \`${o}\`${u?` with refinement \`${u}\``:""}, but received: \`${Ze(n)}\``}=r;return{value:n,type:o,refinement:u,key:i[i.length-1],path:i,branch:s,...r,message:l}}function*Di(r,t,e,n){Gu(r)||(r=[r]);for(const i of r){const s=Yu(i,t,e,n);s&&(yield s)}}function*li(r,t,e={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=e,u={path:n,branch:i,mask:o};s&&(r=t.coercer(r,u));let l="valid";for(const p of t.validator(r,u))p.explanation=e.message,l="not_valid",yield[p,void 0];for(let[p,g,v]of t.entries(r,u)){const A=li(g,v,{path:p===void 0?n:[...n,p],branch:p===void 0?i:[...i,g],coerce:s,mask:o,message:e.message});for(const k of A)k[0]?(l=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):s&&(g=k[1],p===void 0?r=g:r instanceof Map?r.set(p,g):r instanceof Set?r.add(g):hr(r)&&(g!==void 0||p in r)&&(r[p]=g))}if(l!=="not_valid")for(const p of t.refiner(r,u))p.explanation=e.message,l="not_refined",yield[p,void 0];l==="valid"&&(yield[void 0,r])}let rn=class{constructor(t){const{type:e,schema:n,validator:i,refiner:s,coercer:o=l=>l,entries:u=function*(){}}=t;this.type=e,this.schema=n,this.entries=u,this.coercer=o,i?this.validator=(l,p)=>{const g=i(l,p);return Di(g,p,this,l)}:this.validator=()=>[],s?this.refiner=(l,p)=>{const g=s(l,p);return Di(g,p,this,l)}:this.refiner=()=>[]}assert(t,e){return Ju(t,this,e)}create(t,e){return F(t,this,e)}is(t){return Jo(t,this)}mask(t,e){return Qu(t,this,e)}validate(t,e={}){return dr(t,this,e)}};function Ju(r,t,e){const n=dr(r,t,{message:e});if(n[0])throw n[0]}function F(r,t,e){const n=dr(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function Qu(r,t,e){const n=dr(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function Jo(r,t){return!dr(r,t)[0]}function dr(r,t,e={}){const n=li(r,t,e),i=Zu(n);return i[0]?[new Vu(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Bn(r,t){return new rn({type:r,schema:null,validator:t})}function Xu(){return Bn("any",()=>!0)}function W(r){return new rn({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ze(t)}`}})}function tn(){return Bn("boolean",r=>typeof r=="boolean")}function fi(r){return Bn("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${Ze(t)}`)}function Mt(r){const t=Ze(r),e=typeof r;return new rn({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${Ze(n)}`}})}function tl(){return Bn("never",()=>!1)}function K(r){return new rn({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function R(){return Bn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Ze(r)}`)}function X(r){return new rn({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Qo(r,t){return new rn({type:"record",schema:null,*entries(e){if(hr(e))for(const n in e){const i=e[n];yield[n,n,r],yield[n,i,t]}},validator(e){return Nr(e)||`Expected an object, but received: ${Ze(e)}`},coercer(e){return Nr(e)?{...e}:e}})}function D(){return Bn("string",r=>typeof r=="string"||`Expected a string, but received: ${Ze(r)}`)}function hi(r){const t=tl();return new rn({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let i=0;i<n;i++)yield[i,e[i],r[i]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ze(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function N(r){const t=Object.keys(r);return new rn({type:"type",schema:r,*entries(e){if(hr(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return Nr(e)||`Expected an object, but received: ${Ze(e)}`},coercer(e){return Nr(e)?{...e}:e}})}function Me(r){const t=r.map(e=>e.type).join(" | ");return new rn({type:"union",schema:null,coercer(e,n){for(const i of r){const[s,o]=i.validate(e,{coerce:!0,mask:n.mask});if(!s)return o}return e},validator(e,n){const i=[];for(const s of r){const[...o]=li(e,s,n),[u]=o;if(u[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ze(e)}`,...i]}})}function Zn(){return Bn("unknown",()=>!0)}function pr(r,t,e){return new rn({...r,coercer:(n,i)=>Jo(n,t)?r.coercer(e(n,i),i):r.coercer(n,i)})}var _r,el=new Uint8Array(16);function Xo(){if(!_r&&(_r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _r(el)}const nl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function jr(r){return typeof r=="string"&&nl.test(r)}var ge=[];for(var ks=0;ks<256;++ks)ge.push((ks+256).toString(16).substr(1));function Vr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ge[r[t+0]]+ge[r[t+1]]+ge[r[t+2]]+ge[r[t+3]]+"-"+ge[r[t+4]]+ge[r[t+5]]+"-"+ge[r[t+6]]+ge[r[t+7]]+"-"+ge[r[t+8]]+ge[r[t+9]]+"-"+ge[r[t+10]]+ge[r[t+11]]+ge[r[t+12]]+ge[r[t+13]]+ge[r[t+14]]+ge[r[t+15]]).toLowerCase();if(!jr(e))throw TypeError("Stringified UUID is invalid");return e}var qi,Es,As=0,Is=0;function rl(r,t,e){var n=t&&e||0,i=t||new Array(16);r=r||{};var s=r.node||qi,o=r.clockseq!==void 0?r.clockseq:Es;if(s==null||o==null){var u=r.random||(r.rng||Xo)();s==null&&(s=qi=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=Es=(u[6]<<8|u[7])&16383)}var l=r.msecs!==void 0?r.msecs:Date.now(),p=r.nsecs!==void 0?r.nsecs:Is+1,g=l-As+(p-Is)/1e4;if(g<0&&r.clockseq===void 0&&(o=o+1&16383),(g<0||l>As)&&r.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");As=l,Is=p,Es=o,l+=122192928e5;var v=((l&268435455)*1e4+p)%4294967296;i[n++]=v>>>24&255,i[n++]=v>>>16&255,i[n++]=v>>>8&255,i[n++]=v&255;var A=l/4294967296*1e4&268435455;i[n++]=A>>>8&255,i[n++]=A&255,i[n++]=A>>>24&15|16,i[n++]=A>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var k=0;k<6;++k)i[n+k]=s[k];return t||Vr(i)}function ta(r){if(!jr(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function sl(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var il="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ol="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ea(r,t,e){function n(i,s,o,u){if(typeof i=="string"&&(i=sl(i)),typeof s=="string"&&(s=ta(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,o){u=u||0;for(var p=0;p<16;++p)o[u+p]=l[p];return o}return Vr(l)}try{n.name=r}catch{}return n.DNS=il,n.URL=ol,n}function al(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return cl(ul(ll(r),r.length*8))}function cl(r){for(var t=[],e=r.length*32,n="0123456789abcdef",i=0;i<e;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(o)}return t}function na(r){return(r+64>>>9<<4)+14+1}function ul(r,t){r[t>>5]|=128<<t%32,r[na(t)-1]=t;for(var e=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var u=e,l=n,p=i,g=s;e=ve(e,n,i,s,r[o],7,-680876936),s=ve(s,e,n,i,r[o+1],12,-389564586),i=ve(i,s,e,n,r[o+2],17,606105819),n=ve(n,i,s,e,r[o+3],22,-1044525330),e=ve(e,n,i,s,r[o+4],7,-176418897),s=ve(s,e,n,i,r[o+5],12,1200080426),i=ve(i,s,e,n,r[o+6],17,-1473231341),n=ve(n,i,s,e,r[o+7],22,-45705983),e=ve(e,n,i,s,r[o+8],7,1770035416),s=ve(s,e,n,i,r[o+9],12,-1958414417),i=ve(i,s,e,n,r[o+10],17,-42063),n=ve(n,i,s,e,r[o+11],22,-1990404162),e=ve(e,n,i,s,r[o+12],7,1804603682),s=ve(s,e,n,i,r[o+13],12,-40341101),i=ve(i,s,e,n,r[o+14],17,-1502002290),n=ve(n,i,s,e,r[o+15],22,1236535329),e=xe(e,n,i,s,r[o+1],5,-165796510),s=xe(s,e,n,i,r[o+6],9,-1069501632),i=xe(i,s,e,n,r[o+11],14,643717713),n=xe(n,i,s,e,r[o],20,-373897302),e=xe(e,n,i,s,r[o+5],5,-701558691),s=xe(s,e,n,i,r[o+10],9,38016083),i=xe(i,s,e,n,r[o+15],14,-660478335),n=xe(n,i,s,e,r[o+4],20,-405537848),e=xe(e,n,i,s,r[o+9],5,568446438),s=xe(s,e,n,i,r[o+14],9,-1019803690),i=xe(i,s,e,n,r[o+3],14,-187363961),n=xe(n,i,s,e,r[o+8],20,1163531501),e=xe(e,n,i,s,r[o+13],5,-1444681467),s=xe(s,e,n,i,r[o+2],9,-51403784),i=xe(i,s,e,n,r[o+7],14,1735328473),n=xe(n,i,s,e,r[o+12],20,-1926607734),e=Se(e,n,i,s,r[o+5],4,-378558),s=Se(s,e,n,i,r[o+8],11,-2022574463),i=Se(i,s,e,n,r[o+11],16,1839030562),n=Se(n,i,s,e,r[o+14],23,-35309556),e=Se(e,n,i,s,r[o+1],4,-1530992060),s=Se(s,e,n,i,r[o+4],11,1272893353),i=Se(i,s,e,n,r[o+7],16,-155497632),n=Se(n,i,s,e,r[o+10],23,-1094730640),e=Se(e,n,i,s,r[o+13],4,681279174),s=Se(s,e,n,i,r[o],11,-358537222),i=Se(i,s,e,n,r[o+3],16,-722521979),n=Se(n,i,s,e,r[o+6],23,76029189),e=Se(e,n,i,s,r[o+9],4,-640364487),s=Se(s,e,n,i,r[o+12],11,-421815835),i=Se(i,s,e,n,r[o+15],16,530742520),n=Se(n,i,s,e,r[o+2],23,-995338651),e=_e(e,n,i,s,r[o],6,-198630844),s=_e(s,e,n,i,r[o+7],10,1126891415),i=_e(i,s,e,n,r[o+14],15,-1416354905),n=_e(n,i,s,e,r[o+5],21,-57434055),e=_e(e,n,i,s,r[o+12],6,1700485571),s=_e(s,e,n,i,r[o+3],10,-1894986606),i=_e(i,s,e,n,r[o+10],15,-1051523),n=_e(n,i,s,e,r[o+1],21,-2054922799),e=_e(e,n,i,s,r[o+8],6,1873313359),s=_e(s,e,n,i,r[o+15],10,-30611744),i=_e(i,s,e,n,r[o+6],15,-1560198380),n=_e(n,i,s,e,r[o+13],21,1309151649),e=_e(e,n,i,s,r[o+4],6,-145523070),s=_e(s,e,n,i,r[o+11],10,-1120210379),i=_e(i,s,e,n,r[o+2],15,718787259),n=_e(n,i,s,e,r[o+9],21,-343485551),e=yn(e,u),n=yn(n,l),i=yn(i,p),s=yn(s,g)}return[e,n,i,s]}function ll(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(na(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function yn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function fl(r,t){return r<<t|r>>>32-t}function Gr(r,t,e,n,i,s){return yn(fl(yn(yn(t,r),yn(n,s)),i),e)}function ve(r,t,e,n,i,s,o){return Gr(t&e|~t&n,r,t,i,s,o)}function xe(r,t,e,n,i,s,o){return Gr(t&n|e&~n,r,t,i,s,o)}function Se(r,t,e,n,i,s,o){return Gr(t^e^n,r,t,i,s,o)}function _e(r,t,e,n,i,s,o){return Gr(e^(t|~n),r,t,i,s,o)}var hl=ea("v3",48,al);const dl=hl;function pl(r,t,e){r=r||{};var n=r.random||(r.rng||Xo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return Vr(n)}function gl(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Ms(r,t){return r<<t|r>>>32-t}function ml(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),u=new Array(o),l=0;l<o;++l){for(var p=new Uint32Array(16),g=0;g<16;++g)p[g]=r[l*64+g*4]<<24|r[l*64+g*4+1]<<16|r[l*64+g*4+2]<<8|r[l*64+g*4+3];u[l]=p}u[o-1][14]=(r.length-1)*8/Math.pow(2,32),u[o-1][14]=Math.floor(u[o-1][14]),u[o-1][15]=(r.length-1)*8&4294967295;for(var v=0;v<o;++v){for(var A=new Uint32Array(80),k=0;k<16;++k)A[k]=u[v][k];for(var I=16;I<80;++I)A[I]=Ms(A[I-3]^A[I-8]^A[I-14]^A[I-16],1);for(var E=e[0],w=e[1],B=e[2],L=e[3],_=e[4],C=0;C<80;++C){var P=Math.floor(C/20),O=Ms(E,5)+gl(P,w,B,L)+_+t[P]+A[C]>>>0;_=L,L=B,B=Ms(w,30)>>>0,w=E,E=O}e[0]=e[0]+E>>>0,e[1]=e[1]+w>>>0,e[2]=e[2]+B>>>0,e[3]=e[3]+L>>>0,e[4]=e[4]+_>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var yl=ea("v5",80,ml);const wl=yl,bl="00000000-0000-0000-0000-000000000000";function vl(r){if(!jr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const xl=Object.freeze(Object.defineProperty({__proto__:null,NIL:bl,parse:ta,stringify:Vr,v1:rl,v3:dl,v4:pl,v5:wl,validate:jr,version:vl},Symbol.toStringTag,{value:"Module"})),ra=Qs(xl),Sl=ra.v4,_l=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:r};if(i===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return Sl()};s.id=o(s,n)}else i===2&&e===null?n.notificationIdNull&&(s.id=null):s.id=e;return s};var kl=_l;const El=ra.v4,Al=kl,ar=function(r,t){if(!(this instanceof ar))return new ar(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return El()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var Il=ar;ar.prototype.request=function(r,t,e,n){const i=this;let s=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,s=r;else{typeof e=="function"&&(n=e,e=void 0);const p=typeof n=="function";try{s=Al(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(p)return n(g);throw g}if(!p)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(p){return n(p)}return this.callServer(l,function(p,g){i._parseResponse(p,g,n)}),s};ar.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(i){return e(i)}if(e.length===3)if(Array.isArray(n)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return e(null,n.filter(i),n.filter(s))}else return e(null,n.error,n.result);e(null,n)};const Ml=lr(Il);var sa={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(l,p,g){this.fn=l,this.context=p,this.once=g||!1}function s(l,p,g,v,A){if(typeof g!="function")throw new TypeError("The listener must be a function");var k=new i(g,v||l,A),I=e?e+p:p;return l._events[I]?l._events[I].fn?l._events[I]=[l._events[I],k]:l._events[I].push(k):(l._events[I]=k,l._eventsCount++),l}function o(l,p){--l._eventsCount===0?l._events=new n:delete l._events[p]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var p=[],g,v;if(this._eventsCount===0)return p;for(v in g=this._events)t.call(g,v)&&p.push(e?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},u.prototype.listeners=function(p){var g=e?e+p:p,v=this._events[g];if(!v)return[];if(v.fn)return[v.fn];for(var A=0,k=v.length,I=new Array(k);A<k;A++)I[A]=v[A].fn;return I},u.prototype.listenerCount=function(p){var g=e?e+p:p,v=this._events[g];return v?v.fn?1:v.length:0},u.prototype.emit=function(p,g,v,A,k,I){var E=e?e+p:p;if(!this._events[E])return!1;var w=this._events[E],B=arguments.length,L,_;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),B){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,g),!0;case 3:return w.fn.call(w.context,g,v),!0;case 4:return w.fn.call(w.context,g,v,A),!0;case 5:return w.fn.call(w.context,g,v,A,k),!0;case 6:return w.fn.call(w.context,g,v,A,k,I),!0}for(_=1,L=new Array(B-1);_<B;_++)L[_-1]=arguments[_];w.fn.apply(w.context,L)}else{var C=w.length,P;for(_=0;_<C;_++)switch(w[_].once&&this.removeListener(p,w[_].fn,void 0,!0),B){case 1:w[_].fn.call(w[_].context);break;case 2:w[_].fn.call(w[_].context,g);break;case 3:w[_].fn.call(w[_].context,g,v);break;case 4:w[_].fn.call(w[_].context,g,v,A);break;default:if(!L)for(P=1,L=new Array(B-1);P<B;P++)L[P-1]=arguments[P];w[_].fn.apply(w[_].context,L)}}return!0},u.prototype.on=function(p,g,v){return s(this,p,g,v,!1)},u.prototype.once=function(p,g,v){return s(this,p,g,v,!0)},u.prototype.removeListener=function(p,g,v,A){var k=e?e+p:p;if(!this._events[k])return this;if(!g)return o(this,k),this;var I=this._events[k];if(I.fn)I.fn===g&&(!A||I.once)&&(!v||I.context===v)&&o(this,k);else{for(var E=0,w=[],B=I.length;E<B;E++)(I[E].fn!==g||A&&!I[E].once||v&&I[E].context!==v)&&w.push(I[E]);w.length?this._events[k]=w.length===1?w[0]:w:o(this,k)}return this},u.prototype.removeAllListeners=function(p){var g;return p?(g=e?e+p:p,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,r.exports=u})(sa);var Bl=sa.exports;const ia=lr(Bl);var Rl=class extends ia{constructor(t,e,n){super();le(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(t,e,n){const i=n||e;try{this.socket.send(t),i()}catch(s){i(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function Ll(r,t){return new Rl(r,t)}var Tl=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Cl=class extends ia{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...u}={},l,p){super();le(this,"address");le(this,"rpc_id");le(this,"queue");le(this,"options");le(this,"autoconnect");le(this,"ready");le(this,"reconnect");le(this,"reconnect_timer_id");le(this,"reconnect_interval");le(this,"max_reconnects");le(this,"rest_options");le(this,"current_reconnects");le(this,"generate_request_id");le(this,"socket");le(this,"webSocketFactory");le(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=u,this.current_reconnects=0,this.generate_request_id=l||(()=>++this.rpc_id),p?this.dataPack=p:this.dataPack=new Tl,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const u=this.generate_request_id(t,e),l={jsonrpc:"2.0",method:t,params:e||void 0,id:u};this.socket.send(this.dataPack.encode(l),i,p=>{if(p)return o(p);this.queue[u]={promise:[s,o]},n&&(this.queue[u].timeout=setTimeout(()=>{delete this.queue[u],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=rt.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class oa extends fo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,tc(t);const n=Ks(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Mr(this),this.iHash.update(t),this}digestInto(t){Mr(this),Dr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const aa=(r,t,e)=>new oa(r,t).update(e).digest();aa.create=(r,t)=>new oa(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fi(r){r.lowS!==void 0&&ln("lowS",r.lowS),r.prehash!==void 0&&ln("prehash",r.prehash)}function Nl(r){const t=Zs(r);jn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:i}=t;if(e){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Ol,hexToBytes:Ul}=Fc,on={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(r,t)=>{const{Err:e}=on;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,i=Un(n);if(i.length/2&128)throw new e("tlv.encode: long form length too big");const s=n>127?Un(i.length/2|128):"";return`${Un(r)}${s}${i}${t}`},decode(r,t){const{Err:e}=on;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new e("tlv.decode(long): indefinite length not supported");if(l>4)throw new e("tlv.decode(long): byte length is too big");const p=t.subarray(n,n+l);if(p.length!==l)throw new e("tlv.decode: length bytes not complete");if(p[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const g of p)o=o<<8|g;if(n+=l,o<128)throw new e("tlv.decode(long): not minimal encoding")}const u=t.subarray(n,n+o);if(u.length!==o)throw new e("tlv.decode: wrong value length");return{v:u,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=on;if(r<cn)throw new t("integer: negative integers are not allowed");let e=Un(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected assertion");return e},decode(r){const{Err:t}=on;if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return Ol(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=on,i=typeof r=="string"?Ul(r):r;ur(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("Invalid signature: left bytes after parsing");const{v:u,l}=n.decode(2,s),{v:p,l:g}=n.decode(2,l);if(g.length)throw new t("Invalid signature: left bytes after parsing");return{r:e.decode(u),s:e.decode(p)}},hexFromSig(r){const{_tlv:t,_int:e}=on,n=`${t.encode(2,e.encode(r.r))}${t.encode(2,e.encode(r.s))}`;return t.encode(48,n)}},cn=BigInt(0),he=BigInt(1);BigInt(2);const Hi=BigInt(3);BigInt(4);function Pl(r){const t=Nl(r),{Fp:e}=t,n=Hr(t.n,t.nBitLength),i=t.toBytes||((E,w,B)=>{const L=w.toAffine();return In(Uint8Array.from([4]),e.toBytes(L.x),e.toBytes(L.y))}),s=t.fromBytes||(E=>{const w=E.subarray(1),B=e.fromBytes(w.subarray(0,e.BYTES)),L=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:B,y:L}});function o(E){const{a:w,b:B}=t,L=e.sqr(E),_=e.mul(L,E);return e.add(e.add(_,e.mul(E,w)),B)}if(!e.eql(e.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function u(E){return Fr(E,he,t.n)}function l(E){const{allowedPrivateKeyLengths:w,nByteLength:B,wrapPrivateKey:L,n:_}=t;if(w&&typeof E!="bigint"){if(En(E)&&(E=An(E)),typeof E!="string"||!w.includes(E.length))throw new Error("Invalid key");E=E.padStart(B*2,"0")}let C;try{C=typeof E=="bigint"?E:_n(ce("private key",E,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof E}`)}return L&&(C=xt(C,_)),qe("private key",C,he,_),C}function p(E){if(!(E instanceof A))throw new Error("ProjectivePoint expected")}const g=or((E,w)=>{const{px:B,py:L,pz:_}=E;if(e.eql(_,e.ONE))return{x:B,y:L};const C=E.is0();w==null&&(w=C?e.ONE:e.inv(_));const P=e.mul(B,w),O=e.mul(L,w),U=e.mul(_,w);if(C)return{x:e.ZERO,y:e.ZERO};if(!e.eql(U,e.ONE))throw new Error("invZ was invalid");return{x:P,y:O}}),v=or(E=>{if(E.is0()){if(t.allowInfinityPoint&&!e.is0(E.py))return;throw new Error("bad point: ZERO")}const{x:w,y:B}=E.toAffine();if(!e.isValid(w)||!e.isValid(B))throw new Error("bad point: x or y not FE");const L=e.sqr(B),_=o(w);if(!e.eql(L,_))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class A{constructor(w,B,L){if(this.px=w,this.py=B,this.pz=L,w==null||!e.isValid(w))throw new Error("x required");if(B==null||!e.isValid(B))throw new Error("y required");if(L==null||!e.isValid(L))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:B,y:L}=w||{};if(!w||!e.isValid(B)||!e.isValid(L))throw new Error("invalid affine point");if(w instanceof A)throw new Error("projective point not allowed");const _=C=>e.eql(C,e.ZERO);return _(B)&&_(L)?A.ZERO:new A(B,L,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const B=e.invertBatch(w.map(L=>L.pz));return w.map((L,_)=>L.toAffine(B[_])).map(A.fromAffine)}static fromHex(w){const B=A.fromAffine(s(ce("pointHex",w)));return B.assertValidity(),B}static fromPrivateKey(w){return A.BASE.multiply(l(w))}static msm(w,B){return _o(A,n,w,B)}_setWindowSize(w){I.setWindowSize(this,w)}assertValidity(){v(this)}hasEvenY(){const{y:w}=this.toAffine();if(e.isOdd)return!e.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){p(w);const{px:B,py:L,pz:_}=this,{px:C,py:P,pz:O}=w,U=e.eql(e.mul(B,O),e.mul(C,_)),H=e.eql(e.mul(L,O),e.mul(P,_));return U&&H}negate(){return new A(this.px,e.neg(this.py),this.pz)}double(){const{a:w,b:B}=t,L=e.mul(B,Hi),{px:_,py:C,pz:P}=this;let O=e.ZERO,U=e.ZERO,H=e.ZERO,G=e.mul(_,_),nt=e.mul(C,C),z=e.mul(P,P),V=e.mul(_,C);return V=e.add(V,V),H=e.mul(_,P),H=e.add(H,H),O=e.mul(w,H),U=e.mul(L,z),U=e.add(O,U),O=e.sub(nt,U),U=e.add(nt,U),U=e.mul(O,U),O=e.mul(V,O),H=e.mul(L,H),z=e.mul(w,z),V=e.sub(G,z),V=e.mul(w,V),V=e.add(V,H),H=e.add(G,G),G=e.add(H,G),G=e.add(G,z),G=e.mul(G,V),U=e.add(U,G),z=e.mul(C,P),z=e.add(z,z),G=e.mul(z,V),O=e.sub(O,G),H=e.mul(z,nt),H=e.add(H,H),H=e.add(H,H),new A(O,U,H)}add(w){p(w);const{px:B,py:L,pz:_}=this,{px:C,py:P,pz:O}=w;let U=e.ZERO,H=e.ZERO,G=e.ZERO;const nt=t.a,z=e.mul(t.b,Hi);let V=e.mul(B,C),x=e.mul(L,P),a=e.mul(_,O),f=e.add(B,L),h=e.add(C,P);f=e.mul(f,h),h=e.add(V,x),f=e.sub(f,h),h=e.add(B,_);let d=e.add(C,O);return h=e.mul(h,d),d=e.add(V,a),h=e.sub(h,d),d=e.add(L,_),U=e.add(P,O),d=e.mul(d,U),U=e.add(x,a),d=e.sub(d,U),G=e.mul(nt,h),U=e.mul(z,a),G=e.add(U,G),U=e.sub(x,G),G=e.add(x,G),H=e.mul(U,G),x=e.add(V,V),x=e.add(x,V),a=e.mul(nt,a),h=e.mul(z,h),x=e.add(x,a),a=e.sub(V,a),a=e.mul(nt,a),h=e.add(h,a),V=e.mul(x,h),H=e.add(H,V),V=e.mul(d,h),U=e.mul(f,U),U=e.sub(U,V),V=e.mul(f,x),G=e.mul(d,G),G=e.add(G,V),new A(U,H,G)}subtract(w){return this.add(w.negate())}is0(){return this.equals(A.ZERO)}wNAF(w){return I.wNAFCached(this,w,A.normalizeZ)}multiplyUnsafe(w){qe("scalar",w,cn,t.n);const B=A.ZERO;if(w===cn)return B;if(w===he)return this;const{endo:L}=t;if(!L)return I.unsafeLadder(this,w);let{k1neg:_,k1:C,k2neg:P,k2:O}=L.splitScalar(w),U=B,H=B,G=this;for(;C>cn||O>cn;)C&he&&(U=U.add(G)),O&he&&(H=H.add(G)),G=G.double(),C>>=he,O>>=he;return _&&(U=U.negate()),P&&(H=H.negate()),H=new A(e.mul(H.px,L.beta),H.py,H.pz),U.add(H)}multiply(w){const{endo:B,n:L}=t;qe("scalar",w,he,L);let _,C;if(B){const{k1neg:P,k1:O,k2neg:U,k2:H}=B.splitScalar(w);let{p:G,f:nt}=this.wNAF(O),{p:z,f:V}=this.wNAF(H);G=I.constTimeNegate(P,G),z=I.constTimeNegate(U,z),z=new A(e.mul(z.px,B.beta),z.py,z.pz),_=G.add(z),C=nt.add(V)}else{const{p:P,f:O}=this.wNAF(w);_=P,C=O}return A.normalizeZ([_,C])[0]}multiplyAndAddUnsafe(w,B,L){const _=A.BASE,C=(O,U)=>U===cn||U===he||!O.equals(_)?O.multiplyUnsafe(U):O.multiply(U),P=C(this,B).add(C(w,L));return P.is0()?void 0:P}toAffine(w){return g(this,w)}isTorsionFree(){const{h:w,isTorsionFree:B}=t;if(w===he)return!0;if(B)return B(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:B}=t;return w===he?this:B?B(A,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return ln("isCompressed",w),this.assertValidity(),i(A,this,w)}toHex(w=!0){return ln("isCompressed",w),An(this.toRawBytes(w))}}A.BASE=new A(t.Gx,t.Gy,e.ONE),A.ZERO=new A(e.ZERO,e.ONE,e.ZERO);const k=t.nBitLength,I=So(A,t.endo?Math.ceil(k/2):k);return{CURVE:t,ProjectivePoint:A,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:u}}function zl(r){const t=Zs(r);return jn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Dl(r){const t=zl(r),{Fp:e,n}=t,i=e.BYTES+1,s=2*e.BYTES+1;function o(a){return xt(a,n)}function u(a){return Os(a,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:p,weierstrassEquation:g,isWithinCurveOrder:v}=Pl({...t,toBytes(a,f,h){const d=f.toAffine(),m=e.toBytes(d.x),S=In;return ln("isCompressed",h),h?S(Uint8Array.from([f.hasEvenY()?2:3]),m):S(Uint8Array.from([4]),m,e.toBytes(d.y))},fromBytes(a){const f=a.length,h=a[0],d=a.subarray(1);if(f===i&&(h===2||h===3)){const m=_n(d);if(!Fr(m,he,e.ORDER))throw new Error("Point is not on curve");const S=g(m);let M;try{M=e.sqrt(S)}catch(b){const q=b instanceof Error?": "+b.message:"";throw new Error("Point is not on curve"+q)}const y=(M&he)===he;return(h&1)===1!==y&&(M=e.neg(M)),{x:m,y:M}}else if(f===s&&h===4){const m=e.fromBytes(d.subarray(0,e.BYTES)),S=e.fromBytes(d.subarray(e.BYTES,2*e.BYTES));return{x:m,y:S}}else throw new Error(`Point of length ${f} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),A=a=>An(Hn(a,t.nByteLength));function k(a){const f=n>>he;return a>f}function I(a){return k(a)?o(-a):a}const E=(a,f,h)=>_n(a.slice(f,h));class w{constructor(f,h,d){this.r=f,this.s=h,this.recovery=d,this.assertValidity()}static fromCompact(f){const h=t.nByteLength;return f=ce("compactSignature",f,h*2),new w(E(f,0,h),E(f,h,2*h))}static fromDER(f){const{r:h,s:d}=on.toSig(ce("DER",f));return new w(h,d)}assertValidity(){qe("r",this.r,he,n),qe("s",this.s,he,n)}addRecoveryBit(f){return new w(this.r,this.s,f)}recoverPublicKey(f){const{r:h,s:d,recovery:m}=this,S=O(ce("msgHash",f));if(m==null||![0,1,2,3].includes(m))throw new Error("recovery id invalid");const M=m===2||m===3?h+t.n:h;if(M>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const y=m&1?"03":"02",c=l.fromHex(y+A(M)),b=u(M),q=o(-S*b),$=o(d*b),j=l.BASE.multiplyAndAddUnsafe(c,q,$);if(!j)throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Fn(this.toDERHex())}toDERHex(){return on.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fn(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}const B={isValidPrivateKey(a){try{return p(a),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const a=xo(t.n);return Jc(t.randomBytes(a),t.n)},precompute(a=8,f=l.BASE){return f._setWindowSize(a),f.multiply(BigInt(3)),f}};function L(a,f=!0){return l.fromPrivateKey(a).toRawBytes(f)}function _(a){const f=En(a),h=typeof a=="string",d=(f||h)&&a.length;return f?d===i||d===s:h?d===2*i||d===2*s:a instanceof l}function C(a,f,h=!0){if(_(a))throw new Error("first arg must be private key");if(!_(f))throw new Error("second arg must be public key");return l.fromHex(f).multiply(p(a)).toRawBytes(h)}const P=t.bits2int||function(a){const f=_n(a),h=a.length*8-t.nBitLength;return h>0?f>>BigInt(h):f},O=t.bits2int_modN||function(a){return o(P(a))},U=Gs(t.nBitLength);function H(a){return qe(`num < 2^${t.nBitLength}`,a,cn,U),Hn(a,t.nByteLength)}function G(a,f,h=nt){if(["recovered","canonical"].some(et=>et in h))throw new Error("sign() legacy options not supported");const{hash:d,randomBytes:m}=t;let{lowS:S,prehash:M,extraEntropy:y}=h;S==null&&(S=!0),a=ce("msgHash",a),Fi(h),M&&(a=ce("prehashed msgHash",d(a)));const c=O(a),b=p(f),q=[H(b),H(c)];if(y!=null&&y!==!1){const et=y===!0?m(e.BYTES):y;q.push(ce("extraEntropy",et))}const $=In(...q),j=c;function ht(et){const st=P(et);if(!v(st))return;const ue=u(st),ft=l.BASE.multiply(st).toAffine(),ot=o(ft.x);if(ot===cn)return;const Be=o(ue*o(j+ot*b));if(Be===cn)return;let wt=(ft.x===ot?0:2)|Number(ft.y&he),bt=Be;return S&&k(Be)&&(bt=I(Be),wt^=1),new w(ot,bt,wt)}return{seed:$,k2sig:ht}}const nt={lowS:t.lowS,prehash:!1},z={lowS:t.lowS,prehash:!1};function V(a,f,h=nt){const{seed:d,k2sig:m}=G(a,f,h),S=t;return wo(S.hash.outputLen,S.nByteLength,S.hmac)(d,m)}l.BASE._setWindowSize(8);function x(a,f,h,d=z){var ft;const m=a;if(f=ce("msgHash",f),h=ce("publicKey",h),"strict"in d)throw new Error("options.strict was renamed to lowS");Fi(d);const{lowS:S,prehash:M}=d;let y,c;try{if(typeof m=="string"||En(m))try{y=w.fromDER(m)}catch(ot){if(!(ot instanceof on.Err))throw ot;y=w.fromCompact(m)}else if(typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint"){const{r:ot,s:Be}=m;y=new w(ot,Be)}else throw new Error("PARSE");c=l.fromHex(h)}catch(ot){if(ot.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&y.hasHighS())return!1;M&&(f=t.hash(f));const{r:b,s:q}=y,$=O(f),j=u(q),ht=o($*j),et=o(b*j),st=(ft=l.BASE.multiplyAndAddUnsafe(c,ht,et))==null?void 0:ft.toAffine();return st?o(st.x)===b:!1}return{CURVE:t,getPublicKey:L,getSharedSecret:C,sign:V,verify:x,ProjectivePoint:l,Signature:w,utils:B}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ql(r){return{hash:r,hmac:(t,...e)=>aa(r,t,rc(...e)),randomBytes:po}}function Fl(r,t){const e=n=>Dl({...r,...ql(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ca=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$i=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Hl=BigInt(1),Ds=BigInt(2),Wi=(r,t)=>(r+t/Ds)/t;function $l(r){const t=ca,e=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),u=BigInt(44),l=BigInt(88),p=r*r*r%t,g=p*p*r%t,v=Ot(g,e,t)*g%t,A=Ot(v,e,t)*g%t,k=Ot(A,Ds,t)*p%t,I=Ot(k,i,t)*k%t,E=Ot(I,s,t)*I%t,w=Ot(E,u,t)*E%t,B=Ot(w,l,t)*w%t,L=Ot(B,u,t)*E%t,_=Ot(L,e,t)*g%t,C=Ot(_,o,t)*I%t,P=Ot(C,n,t)*p%t,O=Ot(P,Ds,t);if(!qs.eql(qs.sqr(O),r))throw new Error("Cannot find square root");return O}const qs=Hr(ca,void 0,void 0,{sqrt:$l}),di=Fl({a:BigInt(0),b:BigInt(7),Fp:qs,n:$i,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=$i,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Hl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,o=BigInt("0x100000000000000000000000000000000"),u=Wi(s*r,t),l=Wi(-n*r,t);let p=xt(r-u*e-l*i,t),g=xt(-u*n-l*s,t);const v=p>o,A=g>o;if(v&&(p=t-p),A&&(g=t-g),p>o||g>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:v,k1:p,k2neg:A,k2:g}}}},Ps);BigInt(0);di.ProjectivePoint;function Ki(r){try{return Js.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Wl=(r,t)=>Js.sign(r,t.slice(0,32)),Kl=Js.verify,ye=r=>rt.isBuffer(r)?r:r instanceof Uint8Array?rt.from(r.buffer,r.byteOffset,r.byteLength):rt.from(r);class jl{constructor(t){Object.assign(this,t)}encode(){return rt.from(To(Ar,this))}static decode(t){return Co(Ar,this,t)}static decodeUnchecked(t){return Io(Ar,this,t)}}const Ar=new Map;var ua;const Vl=32,wn=32;function Gl(r){return r._bn!==void 0}let ji=1;class Q extends jl{constructor(t){if(super({}),this._bn=void 0,Gl(t))this._bn=t._bn;else{if(typeof t=="string"){const e=be.decode(t);if(e.length!=wn)throw new Error("Invalid public key input");this._bn=new zi(e)}else this._bn=new zi(t);if(this._bn.byteLength()>wn)throw new Error("Invalid public key input")}}static unique(){const t=new Q(ji);return ji+=1,new Q(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return be.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(rt);if(t.length===wn)return t;const e=rt.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const i=rt.concat([t.toBuffer(),rt.from(e),n.toBuffer()]),s=Ps(i);return new Q(s)}static createProgramAddressSync(t,e){let n=rt.alloc(0);t.forEach(function(s){if(s.length>Vl)throw new TypeError("Max seed length exceeded");n=rt.concat([n,ye(s)])}),n=rt.concat([n,e.toBuffer(),rt.from("ProgramDerivedAddress")]);const i=Ps(n);if(Ki(i))throw new Error("Invalid seeds, address must fall off the curve");return new Q(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,i;for(;n!=0;){try{const s=t.concat(rt.from([n]));i=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new Q(t);return Ki(e.toBytes())}}ua=Q;Q.default=new ua("11111111111111111111111111111111");Ar.set(Q,{kind:"struct",fields:[["_bn","u256"]]});new Q("BPFLoader1111111111111111111111111111111111");const qn=1232,la=127,fa=64;class ha extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ha.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class da extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(da.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Xn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Xn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Or{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const lt=(r="publicKey")=>Ut(32,r),Pn=(r="string")=>{const t=Z([J("length"),J("lengthPadding"),Ut(kn(J(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(s,o)=>e(s,o).chars.toString(),i.encode=(s,o,u)=>{const l={chars:rt.from(s,"utf8")};return n(l,o,u)},i.alloc=s=>J().span+J().span+rt.from(s,"utf8").length,i},Zl=(r="authorized")=>Z([lt("staker"),lt("withdrawer")],r),Yl=(r="lockup")=>Z([Te("unixTimestamp"),Te("epoch"),lt("custodian")],r),Jl=(r="voteInit")=>Z([lt("nodePubkey"),lt("authorizedVoter"),lt("authorizedWithdrawer"),mt("commission")],r),Ql=(r="voteAuthorizeWithSeedArgs")=>Z([J("voteAuthorizationType"),lt("currentAuthorityDerivedKeyOwnerPubkey"),Pn("currentAuthorityDerivedKeySeed"),lt("newAuthorized")],r);function pa(r,t){const e=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){const s=t[i.property];if(Array.isArray(s))return s.length*e(i.elementLayout)}else if("fields"in i)return pa({layout:i},t[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=e(i)}),n}function Pe(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function ze(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function ae(r,t){if(!r)throw new Error(t||"Assertion failed")}class Zr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,i=o=>{const u=o.toBase58();let l=n.get(u);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,l)),l},s=i(e);s.isSigner=!0,s.isWritable=!0;for(const o of t){i(o.programId).isInvoked=!0;for(const u of o.keys){const l=i(u.pubkey);l.isSigner||(l.isSigner=u.isSigner),l.isWritable||(l.isWritable=u.isWritable)}}return new Zr(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ae(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,l])=>l.isSigner&&l.isWritable),n=t.filter(([,l])=>l.isSigner&&!l.isWritable),i=t.filter(([,l])=>!l.isSigner&&l.isWritable),s=t.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{ae(e.length>0,"Expected at least one writable signer key");const[l]=e[0];ae(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...e.map(([l])=>new Q(l)),...n.map(([l])=>new Q(l)),...i.map(([l])=>new Q(l)),...s.map(([l])=>new Q(l))];return[o,u]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(t,e){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(e(o)){const u=new Q(s),l=t.findIndex(p=>p.equals(u));l>=0&&(ae(l<256,"Max lookup table index exceeded"),n.push(l),i.push(u),this.keyMetaMap.delete(s))}return[n,i]}}const ga="Reached end of buffer unexpectedly";function un(r){if(r.length===0)throw new Error(ga);return r.shift()}function De(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(ga);return r.splice(...t)}class bn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new Q(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:be.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Or(this.staticAccountKeys)}static compile(t){const e=Zr.compile(t.instructions,t.payerKey),[n,i]=e.getMessageComponents(),o=new Or(i).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:be.encode(u.data)}));return new bn({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ze(e,t);const n=this.instructions.map(v=>{const{accounts:A,programIdIndex:k}=v,I=Array.from(be.decode(v.data));let E=[];ze(E,A.length);let w=[];return ze(w,I.length),{programIdIndex:k,keyIndicesCount:rt.from(E),keyIndices:A,dataLength:rt.from(w),data:I}});let i=[];ze(i,n.length);let s=rt.alloc(qn);rt.from(i).copy(s);let o=i.length;n.forEach(v=>{const k=Z([mt("programIdIndex"),Ut(v.keyIndicesCount.length,"keyIndicesCount"),Ie(mt("keyIndex"),v.keyIndices.length,"keyIndices"),Ut(v.dataLength.length,"dataLength"),Ie(mt("userdatum"),v.data.length,"data")]).encode(v,s,o);o+=k}),s=s.slice(0,o);const u=Z([Ut(1,"numRequiredSignatures"),Ut(1,"numReadonlySignedAccounts"),Ut(1,"numReadonlyUnsignedAccounts"),Ut(e.length,"keyCount"),Ie(lt("key"),t,"keys"),lt("recentBlockhash")]),l={numRequiredSignatures:rt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:rt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:rt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:rt.from(e),keys:this.accountKeys.map(v=>ye(v.toBytes())),recentBlockhash:be.decode(this.recentBlockhash)};let p=rt.alloc(2048);const g=u.encode(l,p);return s.copy(p,g),p.slice(0,g+s.length)}static from(t){let e=[...t];const n=un(e);if(n!==(n&la))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=un(e),s=un(e),o=Pe(e);let u=[];for(let A=0;A<o;A++){const k=De(e,0,wn);u.push(new Q(rt.from(k)))}const l=De(e,0,wn),p=Pe(e);let g=[];for(let A=0;A<p;A++){const k=un(e),I=Pe(e),E=De(e,0,I),w=Pe(e),B=De(e,0,w),L=be.encode(rt.from(B));g.push({programIdIndex:k,accounts:E,data:L})}const v={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:be.encode(rt.from(l)),accountKeys:u,instructions:g};return new bn(v)}}class Ur{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Or(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const i=t-n,s=this.addressTableLookups.reduce((o,u)=>o+u.writableIndexes.length,0);return i<s}else if(t>=this.header.numRequiredSignatures){const i=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=t.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)e.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)e.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Zr.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const g of s){const v=e.extractTableLookup(g);if(v!==void 0){const[A,{writable:k,readonly:I}]=v;n.push(A),i.writable.push(...k),i.readonly.push(...I)}}const[o,u]=e.getMessageComponents(),p=new Or(u,i).compileInstructions(t.instructions);return new Ur({header:o,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const t=Array();ze(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();ze(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();ze(s,this.addressTableLookups.length);const o=Z([mt("prefix"),Z([mt("numRequiredSignatures"),mt("numReadonlySignedAccounts"),mt("numReadonlyUnsignedAccounts")],"header"),Ut(t.length,"staticAccountKeysLength"),Ie(lt(),this.staticAccountKeys.length,"staticAccountKeys"),lt("recentBlockhash"),Ut(n.length,"instructionsLength"),Ut(e.length,"serializedInstructions"),Ut(s.length,"addressTableLookupsLength"),Ut(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(qn),p=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:be.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},u);return u.slice(0,p)}serializeInstructions(){let t=0;const e=new Uint8Array(qn);for(const n of this.compiledInstructions){const i=Array();ze(i,n.accountKeyIndexes.length);const s=Array();ze(s,n.data.length);const o=Z([mt("programIdIndex"),Ut(i.length,"encodedAccountKeyIndexesLength"),Ie(mt(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ut(s.length,"encodedDataLength"),Ut(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(qn);for(const n of this.addressTableLookups){const i=Array();ze(i,n.writableIndexes.length);const s=Array();ze(s,n.readonlyIndexes.length);const o=Z([lt("accountKey"),Ut(i.length,"encodedWritableIndexesLength"),Ie(mt(),n.writableIndexes.length,"writableIndexes"),Ut(s.length,"encodedReadonlyIndexesLength"),Ie(mt(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=un(e),i=n&la;ae(n!==i,"Expected versioned message but received legacy message");const s=i;ae(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:un(e),numReadonlySignedAccounts:un(e),numReadonlyUnsignedAccounts:un(e)},u=[],l=Pe(e);for(let I=0;I<l;I++)u.push(new Q(De(e,0,wn)));const p=be.encode(De(e,0,wn)),g=Pe(e),v=[];for(let I=0;I<g;I++){const E=un(e),w=Pe(e),B=De(e,0,w),L=Pe(e),_=new Uint8Array(De(e,0,L));v.push({programIdIndex:E,accountKeyIndexes:B,data:_})}const A=Pe(e),k=[];for(let I=0;I<A;I++){const E=new Q(De(e,0,wn)),w=Pe(e),B=De(e,0,w),L=Pe(e),_=De(e,0,L);k.push({accountKey:E,writableIndexes:B,readonlyIndexes:_})}return new Ur({header:o,staticAccountKeys:u,recentBlockhash:p,compiledInstructions:v,addressTableLookups:k})}}let gn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Xl=rt.alloc(fa).fill(0);class $e{constructor(t){this.keys=void 0,this.programId=void 0,this.data=rt.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class je{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new $e(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<e.length;E++)if(e[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);const i=[],s=[];e.forEach(E=>{E.keys.forEach(B=>{s.push({...B})});const w=E.programId.toString();i.includes(w)||i.push(w)}),i.forEach(E=>{s.push({pubkey:new Q(E),isSigner:!1,isWritable:!1})});const o=[];s.forEach(E=>{const w=E.pubkey.toString(),B=o.findIndex(L=>L.pubkey.toString()===w);B>-1?(o[B].isWritable=o[B].isWritable||E.isWritable,o[B].isSigner=o[B].isSigner||E.isSigner):o.push(E)}),o.sort(function(E,w){if(E.isSigner!==w.isSigner)return E.isSigner?-1:1;if(E.isWritable!==w.isWritable)return E.isWritable?-1:1;const B={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return E.pubkey.toBase58().localeCompare(w.pubkey.toBase58(),"en",B)});const u=o.findIndex(E=>E.pubkey.equals(n));if(u>-1){const[E]=o.splice(u,1);E.isSigner=!0,E.isWritable=!0,o.unshift(E)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const E of this.signatures){const w=o.findIndex(B=>B.pubkey.equals(E.publicKey));if(w>-1)o[w].isSigner||(o[w].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let l=0,p=0,g=0;const v=[],A=[];o.forEach(({pubkey:E,isSigner:w,isWritable:B})=>{w?(v.push(E.toString()),l+=1,B||(p+=1)):(A.push(E.toString()),B||(g+=1))});const k=v.concat(A),I=e.map(E=>{const{data:w,programId:B}=E;return{programIdIndex:k.indexOf(B.toString()),accounts:E.keys.map(L=>k.indexOf(L.pubkey.toString())),data:be.encode(w)}});return I.forEach(E=>{ae(E.programIdIndex>=0),E.accounts.forEach(w=>ae(w>=0))}),new bn({header:{numRequiredSignatures:l,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:g},accountKeys:k,recentBlockhash:t,instructions:I})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((i,s)=>e[s].equals(i.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const i=n.toString();return e.has(i)?!1:(e.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(i=>{const s=Wl(n,i.secretKey);this._addSignature(i.publicKey,ye(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ae(e.length===64);const n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=rt.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?e&&(n.missing||(n.missing=[])).push(s):Kl(i,t,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,e);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(t){const{signatures:e}=this,n=[];ze(n,e.length);const i=n.length+e.length*64+t.length,s=rt.alloc(i);return ae(e.length<256),rt.from(n).copy(s,0),e.forEach(({signature:o},u)=>{o!==null&&(ae(o.length===64,"signature has invalid length"),rt.from(o).copy(s,n.length+u*64))}),t.copy(s,n.length+e.length*64),ae(s.length<=qn,`Transaction too large: ${s.length} > ${qn}`),s}get keys(){return ae(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ae(this.instructions.length===1),this.instructions[0].programId}get data(){return ae(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Pe(e);let i=[];for(let s=0;s<n;s++){const o=De(e,0,fa);i.push(be.encode(rt.from(o)))}return je.populate(bn.from(e),i)}static populate(t,e=[]){const n=new je;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((i,s)=>{const o={signature:i==be.encode(Xl)?null:be.decode(i),publicKey:t.accountKeys[s]};n.signatures.push(o)}),t.instructions.forEach(i=>{const s=i.accounts.map(o=>{const u=t.accountKeys[o];return{pubkey:u,isSigner:n.signatures.some(l=>l.publicKey.toString()===u.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new $e({keys:s,programId:t.accountKeys[i.programIdIndex],data:be.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}}const tf=160,ef=64,nf=tf/ef,rf=1e3/nf;new Q("SysvarC1ock11111111111111111111111111111111");new Q("SysvarEpochSchedu1e111111111111111111111111");new Q("Sysvar1nstructions1111111111111111111111111");const Bs=new Q("SysvarRecentB1ockHashes11111111111111111111"),Vi=new Q("SysvarRent111111111111111111111111111111111");new Q("SysvarRewards111111111111111111111111111111");new Q("SysvarS1otHashes111111111111111111111111111");new Q("SysvarS1otHistory11111111111111111111111111");new Q("SysvarStakeHistory1111111111111111111111111");class Gi extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(t){case"send":u=`Transaction ${e} resulted in an error. 
${n}. `+s+o;break;case"simulate":u=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:u=`Unknown action '${(l=>l)(t)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,e(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class Y extends Error{constructor({code:t,message:e,data:n},i){super(i!=null?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function On(r){return new Promise(t=>setTimeout(t,r))}function Ne(r,t){const e=r.layout.span>=0?r.layout.span:pa(r,t),n=rt.alloc(e),i=Object.assign({instruction:r.index},t);return r.layout.encode(i,n),n}const sf=me("lamportsPerSignature"),ma=Z([J("version"),J("state"),lt("authorizedPubkey"),lt("nonce"),Z([sf],"feeCalculator")]),Zi=ma.span;class pi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=ma.decode(ye(t),0);return new pi({authorizedPubkey:new Q(e.authorizedPubkey),nonce:new Q(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const of=r=>{const t=r.decode.bind(r),e=r.encode.bind(r);return{decode:t,encode:e}},af=r=>t=>{const e=Ut(r,t),{encode:n,decode:i}=of(e),s=e;return s.decode=(o,u)=>{const l=i(o,u);return Hu(rt.from(l))},s.encode=(o,u,l)=>{const p=Ku(o,r);return n(p,u,l)},s},Wn=af(8),Oe=Object.freeze({Create:{index:0,layout:Z([J("instruction"),Te("lamports"),Te("space"),lt("programId")])},Assign:{index:1,layout:Z([J("instruction"),lt("programId")])},Transfer:{index:2,layout:Z([J("instruction"),Wn("lamports")])},CreateWithSeed:{index:3,layout:Z([J("instruction"),lt("base"),Pn("seed"),Te("lamports"),Te("space"),lt("programId")])},AdvanceNonceAccount:{index:4,layout:Z([J("instruction")])},WithdrawNonceAccount:{index:5,layout:Z([J("instruction"),Te("lamports")])},InitializeNonceAccount:{index:6,layout:Z([J("instruction"),lt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Z([J("instruction"),lt("authorized")])},Allocate:{index:8,layout:Z([J("instruction"),Te("space")])},AllocateWithSeed:{index:9,layout:Z([J("instruction"),lt("base"),Pn("seed"),Te("space"),lt("programId")])},AssignWithSeed:{index:10,layout:Z([J("instruction"),lt("base"),Pn("seed"),lt("programId")])},TransferWithSeed:{index:11,layout:Z([J("instruction"),Wn("lamports"),Pn("seed"),lt("programId")])},UpgradeNonceAccount:{index:12,layout:Z([J("instruction")])}});class Kn{constructor(){}static createAccount(t){const e=Oe.Create,n=Ne(e,{lamports:t.lamports,space:t.space,programId:ye(t.programId.toBuffer())});return new $e({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const i=Oe.TransferWithSeed;e=Ne(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:ye(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Oe.Transfer;e=Ne(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new $e({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const i=Oe.AssignWithSeed;e=Ne(i,{base:ye(t.basePubkey.toBuffer()),seed:t.seed,programId:ye(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Oe.Assign;e=Ne(i,{programId:ye(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $e({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Oe.CreateWithSeed,n=Ne(e,{base:ye(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ye(t.programId.toBuffer())});let i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new $e({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){const e=new je;"basePubkey"in t&&"seed"in t?e.add(Kn.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Zi,programId:this.programId})):e.add(Kn.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Zi,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Oe.InitializeNonceAccount,n=Ne(e,{authorized:ye(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Bs,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new $e(i)}static nonceAdvance(t){const e=Oe.AdvanceNonceAccount,n=Ne(e),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Bs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new $e(i)}static nonceWithdraw(t){const e=Oe.WithdrawNonceAccount,n=Ne(e,{lamports:t.lamports});return new $e({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Bs,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Oe.AuthorizeNonceAccount,n=Ne(e,{authorized:ye(t.newAuthorizedPubkey.toBuffer())});return new $e({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const i=Oe.AllocateWithSeed;e=Ne(i,{base:ye(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ye(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Oe.Allocate;e=Ne(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $e({keys:n,programId:this.programId,data:e})}}Kn.programId=new Q("11111111111111111111111111111111");new Q("BPFLoader2111111111111111111111111111111111");function cf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var uf=Object.prototype.toString,lf=Object.keys||function(r){var t=[];for(var e in r)t.push(e);return t};function tr(r,t){var e,n,i,s,o,u,l;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return tr(r.toJSON(),t);if(l=uf.call(r),l==="[object Array]"){for(i="[",n=r.length-1,e=0;e<n;e++)i+=tr(r[e],!0)+",";return n>-1&&(i+=tr(r[e],!0)),i+"]"}else if(l==="[object Object]"){for(s=lf(r).sort(),n=s.length,i="",e=0;e<n;)o=s[e],u=tr(r[o],!1),u!==void 0&&(i&&(i+=","),i+=JSON.stringify(o)+":"+u),e++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var ff=function(r){var t=tr(r,!1);if(t!==void 0)return""+t},Yi=cf(ff);const Qn=32;function Rs(r){let t=0;for(;r>1;)r/=2,t++;return t}function hf(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class df{constructor(t,e,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Rs(hf(t+Qn+1))-Rs(Qn)-1,n=this.getSlotsInEpoch(e),i=t-(n-Qn);return[e,i]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=e%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Qn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Rs(Qn)):this.slotsPerEpoch}}var pf=globalThis.fetch;class gf extends Cl{constructor(t,e,n){const i=s=>{const o=Ll(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function mf(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Ji=56;class Qi{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=mf(yf,t),n=t.length-Ji;ae(n>=0,"lookup table is invalid"),ae(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Z([Ie(lt(),i,"addresses")]).decode(t.slice(Ji));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new Q(e.authority[0]):void 0,addresses:s.map(o=>new Q(o))}}}const yf={index:1,layout:Z([J("typeIndex"),Wn("deactivationSlot"),me("lastExtendedSlot"),mt("lastExtendedStartIndex"),mt(),Ie(lt(),kn(mt(),-1),"authority")])},wf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function bf(r){const t=r.match(wf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,i,s]=t,o=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),l=u==null?"":`:${u+1}`;return`${o}//${n}${l}${s}`}const Rt=pr(fi(Q),D(),r=>new Q(r)),ya=hi([D(),Mt("base64")]),gi=pr(fi(rt),ya,r=>rt.from(r[0],"base64")),vf=30*1e3;function xf(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function vt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...i}=r;t=n,e=i}return{commitment:t,config:e}}function Xi(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function wa(r){return Me([N({jsonrpc:Mt("2.0"),id:D(),result:r}),N({jsonrpc:Mt("2.0"),id:D(),error:N({code:Zn(),message:D(),data:X(Xu())})})])}const Sf=wa(Zn());function ct(r){return pr(wa(r),Sf,t=>"error"in t?t:{...t,result:F(t.result,r)})}function Pt(r){return ct(N({context:N({slot:R()}),value:r}))}function Yr(r){return N({context:N({slot:R()}),value:r})}function Ls(r,t){return r===0?new Ur({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new Q(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:be.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new bn(t)}const _f=N({foundation:R(),foundationTerm:R(),initial:R(),taper:R(),terminal:R()}),kf=ct(W(K(N({epoch:R(),effectiveSlot:R(),amount:R(),postBalance:R(),commission:X(K(R()))})))),Ef=W(N({slot:R(),prioritizationFee:R()})),Af=N({total:R(),validator:R(),foundation:R(),epoch:R()}),If=N({epoch:R(),slotIndex:R(),slotsInEpoch:R(),absoluteSlot:R(),blockHeight:X(R()),transactionCount:X(R())}),Mf=N({slotsPerEpoch:R(),leaderScheduleSlotOffset:R(),warmup:tn(),firstNormalEpoch:R(),firstNormalSlot:R()}),Bf=Qo(D(),W(R())),Rn=K(Me([N({}),D()])),Rf=N({err:Rn}),Lf=Mt("receivedSignature"),Tf=N({"solana-core":D(),"feature-set":X(R())}),Cf=N({program:D(),programId:Rt,parsed:Zn()}),Nf=N({programId:Rt,accounts:W(Rt),data:D()}),to=Pt(N({err:K(Me([N({}),D()])),logs:K(W(D())),accounts:X(K(W(K(N({executable:tn(),owner:D(),lamports:R(),data:W(D()),rentEpoch:X(R())}))))),unitsConsumed:X(R()),returnData:X(K(N({programId:D(),data:hi([D(),Mt("base64")])}))),innerInstructions:X(K(W(N({index:R(),instructions:W(Me([Cf,Nf]))}))))})),Of=Pt(N({byIdentity:Qo(D(),W(R())),range:N({firstSlot:R(),lastSlot:R()})}));function Uf(r,t,e,n,i,s){const o=e||pf;let u;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return n&&(l=async(g,v)=>{const A=await new Promise((k,I)=>{try{n(g,v,(E,w)=>k([E,w]))}catch(E){I(E)}});return await o(...A)}),new Ml(async(g,v)=>{const A={method:"POST",body:g,agent:u,headers:Object.assign({"Content-Type":"application/json"},t||{},Ph)};try{let k=5,I,E=500;for(;l?I=await l(r,A):I=await o(r,A),!(I.status!==429||i===!0||(k-=1,k===0));)console.error(`Server responded with ${I.status} ${I.statusText}.  Retrying after ${E}ms delay...`),await On(E),E*=2;const w=await I.text();I.ok?v(null,w):v(new Error(`${I.status} ${I.statusText}: ${w}`))}catch(k){k instanceof Error&&v(k)}},{})}function Pf(r){return(t,e)=>new Promise((n,i)=>{r.request(t,e,(s,o)=>{if(s){i(s);return}n(o)})})}function zf(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const i=t.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}e(o)})})}const Df=ct(_f),qf=ct(Af),Ff=ct(Ef),Hf=ct(If),$f=ct(Mf),Wf=ct(Bf),Kf=ct(R()),jf=Pt(N({total:R(),circulating:R(),nonCirculating:R(),nonCirculatingAccounts:W(Rt)})),Fs=N({amount:D(),uiAmount:K(R()),decimals:R(),uiAmountString:X(D())}),Vf=Pt(W(N({address:Rt,amount:D(),uiAmount:K(R()),decimals:R(),uiAmountString:X(D())}))),Gf=Pt(W(N({pubkey:Rt,account:N({executable:tn(),owner:Rt,lamports:R(),data:gi,rentEpoch:R()})}))),Hs=N({program:D(),parsed:Zn(),space:R()}),Zf=Pt(W(N({pubkey:Rt,account:N({executable:tn(),owner:Rt,lamports:R(),data:Hs,rentEpoch:R()})}))),Yf=Pt(W(N({lamports:R(),address:Rt}))),cr=N({executable:tn(),owner:Rt,lamports:R(),data:gi,rentEpoch:R()}),Jf=N({pubkey:Rt,account:cr}),Qf=pr(Me([fi(rt),Hs]),Me([ya,Hs]),r=>Array.isArray(r)?F(r,gi):r),$s=N({executable:tn(),owner:Rt,lamports:R(),data:Qf,rentEpoch:R()}),Xf=N({pubkey:Rt,account:$s}),th=N({state:Me([Mt("active"),Mt("inactive"),Mt("activating"),Mt("deactivating")]),active:R(),inactive:R()}),eh=ct(W(N({signature:D(),slot:R(),err:Rn,memo:K(D()),blockTime:X(K(R()))}))),nh=ct(W(N({signature:D(),slot:R(),err:Rn,memo:K(D()),blockTime:X(K(R()))}))),rh=N({subscription:R(),result:Yr(cr)}),sh=N({pubkey:Rt,account:cr}),ih=N({subscription:R(),result:Yr(sh)}),oh=N({parent:R(),slot:R(),root:R()}),ah=N({subscription:R(),result:oh}),ch=Me([N({type:Me([Mt("firstShredReceived"),Mt("completed"),Mt("optimisticConfirmation"),Mt("root")]),slot:R(),timestamp:R()}),N({type:Mt("createdBank"),parent:R(),slot:R(),timestamp:R()}),N({type:Mt("frozen"),slot:R(),timestamp:R(),stats:N({numTransactionEntries:R(),numSuccessfulTransactions:R(),numFailedTransactions:R(),maxTransactionsPerEntry:R()})}),N({type:Mt("dead"),slot:R(),timestamp:R(),err:D()})]),uh=N({subscription:R(),result:ch}),lh=N({subscription:R(),result:Yr(Me([Rf,Lf]))}),fh=N({subscription:R(),result:R()}),hh=N({pubkey:D(),gossip:K(D()),tpu:K(D()),rpc:K(D()),version:K(D())}),eo=N({votePubkey:D(),nodePubkey:D(),activatedStake:R(),epochVoteAccount:tn(),epochCredits:W(hi([R(),R(),R()])),commission:R(),lastVote:R(),rootSlot:K(R())}),dh=ct(N({current:W(eo),delinquent:W(eo)})),ph=Me([Mt("processed"),Mt("confirmed"),Mt("finalized")]),gh=N({slot:R(),confirmations:K(R()),err:Rn,confirmationStatus:X(ph)}),mh=Pt(W(K(gh))),yh=ct(R()),ba=N({accountKey:Rt,writableIndexes:W(R()),readonlyIndexes:W(R())}),mi=N({signatures:W(D()),message:N({accountKeys:W(D()),header:N({numRequiredSignatures:R(),numReadonlySignedAccounts:R(),numReadonlyUnsignedAccounts:R()}),instructions:W(N({accounts:W(R()),data:D(),programIdIndex:R()})),recentBlockhash:D(),addressTableLookups:X(W(ba))})}),va=N({pubkey:Rt,signer:tn(),writable:tn(),source:X(Me([Mt("transaction"),Mt("lookupTable")]))}),xa=N({accountKeys:W(va),signatures:W(D())}),Sa=N({parsed:Zn(),program:D(),programId:Rt}),_a=N({accounts:W(Rt),data:D(),programId:Rt}),wh=Me([_a,Sa]),bh=Me([N({parsed:Zn(),program:D(),programId:D()}),N({accounts:W(D()),data:D(),programId:D()})]),ka=pr(wh,bh,r=>"accounts"in r?F(r,_a):F(r,Sa)),Ea=N({signatures:W(D()),message:N({accountKeys:W(va),instructions:W(ka),recentBlockhash:D(),addressTableLookups:X(K(W(ba)))})}),Pr=N({accountIndex:R(),mint:D(),owner:X(D()),uiTokenAmount:Fs}),Aa=N({writable:W(Rt),readonly:W(Rt)}),Jr=N({err:Rn,fee:R(),innerInstructions:X(K(W(N({index:R(),instructions:W(N({accounts:W(R()),data:D(),programIdIndex:R()}))})))),preBalances:W(R()),postBalances:W(R()),logMessages:X(K(W(D()))),preTokenBalances:X(K(W(Pr))),postTokenBalances:X(K(W(Pr))),loadedAddresses:X(Aa),computeUnitsConsumed:X(R())}),yi=N({err:Rn,fee:R(),innerInstructions:X(K(W(N({index:R(),instructions:W(ka)})))),preBalances:W(R()),postBalances:W(R()),logMessages:X(K(W(D()))),preTokenBalances:X(K(W(Pr))),postTokenBalances:X(K(W(Pr))),loadedAddresses:X(Aa),computeUnitsConsumed:X(R())}),Yn=Me([Mt(0),Mt("legacy")]),Ln=N({pubkey:D(),lamports:R(),postBalance:K(R()),rewardType:K(D()),commission:X(K(R()))}),vh=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),transactions:W(N({transaction:mi,meta:K(Jr),version:X(Yn)})),rewards:X(W(Ln)),blockTime:K(R()),blockHeight:K(R())}))),xh=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),rewards:X(W(Ln)),blockTime:K(R()),blockHeight:K(R())}))),Sh=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),transactions:W(N({transaction:xa,meta:K(Jr),version:X(Yn)})),rewards:X(W(Ln)),blockTime:K(R()),blockHeight:K(R())}))),_h=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),transactions:W(N({transaction:Ea,meta:K(yi),version:X(Yn)})),rewards:X(W(Ln)),blockTime:K(R()),blockHeight:K(R())}))),kh=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),transactions:W(N({transaction:xa,meta:K(yi),version:X(Yn)})),rewards:X(W(Ln)),blockTime:K(R()),blockHeight:K(R())}))),Eh=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),rewards:X(W(Ln)),blockTime:K(R()),blockHeight:K(R())}))),Ah=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),transactions:W(N({transaction:mi,meta:K(Jr)})),rewards:X(W(Ln)),blockTime:K(R())}))),no=ct(K(N({blockhash:D(),previousBlockhash:D(),parentSlot:R(),signatures:W(D()),blockTime:K(R())}))),Ts=ct(K(N({slot:R(),meta:K(Jr),blockTime:X(K(R())),transaction:mi,version:X(Yn)}))),kr=ct(K(N({slot:R(),transaction:Ea,meta:K(yi),blockTime:X(K(R())),version:X(Yn)}))),Ih=Pt(N({blockhash:D(),feeCalculator:N({lamportsPerSignature:R()})})),Mh=Pt(N({blockhash:D(),lastValidBlockHeight:R()})),Bh=Pt(tn()),Rh=N({slot:R(),numTransactions:R(),numSlots:R(),samplePeriodSecs:R()}),Lh=ct(W(Rh)),Th=Pt(K(N({feeCalculator:N({lamportsPerSignature:R()})}))),Ch=ct(D()),Nh=ct(D()),Oh=N({err:Rn,logs:W(D()),signature:D()}),Uh=N({result:Yr(Oh),subscription:R()}),Ph={"solana-client":"js/1.0.0-maintenance"};class zh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async g=>{const{commitment:v,config:A}=vt(g),k=this._buildArgs([],v,void 0,A),I=Yi(k);return p[I]=p[I]??(async()=>{try{const E=await this._rpcRequest("getBlockHeight",k),w=F(E,ct(R()));if("error"in w)throw new Y(w.error,"failed to get block height information");return w.result}finally{delete p[I]}})(),await p[I]}})();let n,i,s,o,u,l;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,i=e.httpHeaders,s=e.fetch,o=e.fetchMiddleware,u=e.disableRetryOnRateLimit,l=e.httpAgent),this._rpcEndpoint=xf(t),this._rpcWsEndpoint=n||bf(t),this._rpcClient=Uf(t,i,s,o,u,l),this._rpcRequest=Pf(this._rpcClient),this._rpcBatchRequest=zf(this._rpcClient),this._rpcWebSocket=new gf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgs([t.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),u=F(o,Pt(R()));if("error"in u)throw new Y(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=F(e,ct(K(R())));if("error"in n)throw new Y(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=F(t,ct(R()));if("error"in e)throw new Y(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=F(t,Kf);if("error"in e)throw new Y(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),i=F(n,jf);if("error"in i)throw new Y(i.error,"failed to get supply");return i.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenSupply",n),s=F(i,Pt(Fs));if("error"in s)throw new Y(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenAccountBalance",n),s=F(i,Pt(Fs));if("error"in s)throw new Y(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,n){const{commitment:i,config:s}=vt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const u=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",u),p=F(l,Gf);if("error"in p)throw new Y(p.error,`failed to get token accounts owned by account ${t.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(t,e,n){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),u=F(o,Zf);if("error"in u)throw new Y(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],i=await this._rpcRequest("getLargestAccounts",n),s=F(i,Yf);if("error"in s)throw new Y(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenLargestAccounts",n),s=F(i,Vf);if("error"in s)throw new Y(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgs([t.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),u=F(o,Pt(K(cr)));if("error"in u)throw new Y(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),u=F(o,Pt(K($s)));if("error"in u)throw new Y(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:i}=vt(e),s=t.map(p=>p.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",o),l=F(u,Pt(W(K($s))));if("error"in l)throw new Y(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:i}=vt(e),s=t.map(p=>p.toBase58()),o=this._buildArgs([s],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",o),l=F(u,Pt(W(K(cr))));if("error"in l)throw new Y(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:i,config:s}=vt(e),o=this._buildArgs([t.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getStakeActivation",o),l=F(u,ct(th));if("error"in l)throw new Y(l.error,`failed to get Stake Activation ${t.toBase58()}`);return l.result}async getProgramAccounts(t,e){const{commitment:n,config:i}=vt(e),{encoding:s,...o}=i||{},u=this._buildArgs([t.toBase58()],n,s||"base64",{...o,...o.filters?{filters:Xi(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",u),p=W(Jf),g=o.withContext===!0?F(l,Pt(p)):F(l,ct(p));if("error"in g)throw new Y(g.error,`failed to get accounts owned by program ${t.toBase58()}`);return g.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),u=F(o,ct(W(Xf)));if("error"in u)throw new Y(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){var s;let n;if(typeof t=="string")n=t;else{const o=t;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=be.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return ae(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,i,s=!1;const o=new Promise((l,p)=>{try{n=this.onSignature(e,(v,A)=>{n=void 0;const k={context:A,value:v};l({__type:gn.PROCESSED,response:k})},t);const g=new Promise(v=>{n==null?v():i=this._onSubscriptionStateChange(n,A=>{A==="subscribed"&&v()})});(async()=>{if(await g,s)return;const v=await this.getSignatureStatus(e);if(s||v==null)return;const{context:A,value:k}=v;if(k!=null)if(k!=null&&k.err)p(k.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(k.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(k.confirmationStatus==="processed"||k.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:gn.PROCESSED,response:{context:A,value:k}})}})()}catch(g){p(g)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(v=>{const A=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let k=await A();if(!s){for(;k<=n;)if(await On(1e3),s||(k=await A(),s))return;v({__type:gn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),p=this.getCancellationPromise(e);let g;try{const v=await Promise.race([p,l,o]);if(v.__type===gn.PROCESSED)g=v.response;else throw new ha(i)}finally{s=!0,u()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let u=!1;const l=new Promise(k=>{let I=s,E=null;const w=async()=>{try{const{context:B,value:L}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return E=B.slot,L==null?void 0:L.nonce}catch{return I}};(async()=>{if(I=await w(),!u)for(;;){if(s!==I){k({__type:gn.NONCE_INVALID,slotInWhichNonceDidAdvance:E});return}if(await On(2e3),u||(I=await w(),u))return}})()}),{abortConfirmation:p,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),v=this.getCancellationPromise(e);let A;try{const k=await Promise.race([v,g,l]);if(k.__type===gn.PROCESSED)A=k.response;else{let I;for(;;){const E=await this.getSignatureStatus(o);if(E==null)break;if(E.context.slot<(k.slotInWhichNonceDidAdvance??n)){await On(400);continue}I=E;break}if(I!=null&&I.value){const E=t||"finalized",{confirmationStatus:w}=I.value;switch(E){case"processed":case"recent":if(w!=="processed"&&w!=="confirmed"&&w!=="finalized")throw new Xn(o);break;case"confirmed":case"single":case"singleGossip":if(w!=="confirmed"&&w!=="finalized")throw new Xn(o);break;case"finalized":case"max":case"root":if(w!=="finalized")throw new Xn(o);break;default:}A={context:I.context,value:{err:I.value.err}}}else throw new Xn(o)}}finally{u=!0,p()}return A}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const i=new Promise(l=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>l({__type:gn.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let u;try{const l=await Promise.race([o,i]);if(l.__type===gn.PROCESSED)u=l.response;else throw new da(e,l.timeoutMs/1e3)}finally{clearTimeout(n),s()}return u}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=F(t,ct(W(hh)));if("error"in e)throw new Y(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),i=F(n,dh);if("error"in i)throw new Y(i.error,"failed to get vote accounts");return i.result}async getSlot(t){const{commitment:e,config:n}=vt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlot",i),o=F(s,ct(R()));if("error"in o)throw new Y(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=vt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=F(s,ct(D()));if("error"in o)throw new Y(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],i=await this._rpcRequest("getSlotLeaders",n),s=F(i,ct(W(Rt)));if("error"in s)throw new Y(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:n,value:i}=await this.getSignatureStatuses([t],e);ae(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const i=await this._rpcRequest("getSignatureStatuses",n),s=F(i,mh);if("error"in s)throw new Y(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:n}=vt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=F(s,ct(R()));if("error"in o)throw new Y(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),i=F(n,Df);if("error"in i)throw new Y(i.error,"failed to get inflation");return i.result}async getInflationReward(t,e,n){const{commitment:i,config:s}=vt(n),o=this._buildArgs([t.map(p=>p.toBase58())],i,void 0,{...s,epoch:e??(s==null?void 0:s.epoch)}),u=await this._rpcRequest("getInflationReward",o),l=F(u,kf);if("error"in l)throw new Y(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=F(t,qf);if("error"in e)throw new Y(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=vt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=F(s,Hf);if("error"in o)throw new Y(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=F(t,$f);if("error"in e)throw new Y(e.error,"failed to get epoch schedule");const n=e.result;return new df(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=F(t,Wf);if("error"in e)throw new Y(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=F(i,yh);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",e),i=F(n,Ih);if("error"in i)throw new Y(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=F(e,Lh);if("error"in n)throw new Y(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=F(i,Th);if("error"in s)throw new Y(s.error,"failed to get fee calculator");const{context:o,value:u}=s.result;return{context:o,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){const n=ye(t.serialize()).toString("base64"),i=this._buildArgs([n],e),s=await this._rpcRequest("getFeeForMessage",i),o=F(s,Pt(K(R())));if("error"in o)throw new Y(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(u=>u.toBase58()),n=e!=null&&e.length?[e]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=F(i,Ff);if("error"in s)throw new Y(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=vt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=F(s,Mh);if("error"in o)throw new Y(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgs([t],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),u=F(o,Bh);if("error"in u)throw new Y(u.error,"failed to determine if the blockhash `"+t+"`is valid");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=F(t,ct(Tf));if("error"in e)throw new Y(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=F(t,ct(D()));if("error"in e)throw new Y(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=F(o,Sh);if("error"in u)throw u.error;return u.result}case"none":{const u=F(o,xh);if("error"in u)throw u.error;return u.result}default:{const u=F(o,vh);if("error"in u)throw u.error;const{result:l}=u;return l?{...l,transactions:l.transactions.map(({transaction:p,meta:g,version:v})=>({meta:g,transaction:{...p,message:Ls(v,p.message)},version:v}))}:null}}}catch(u){throw new Y(u,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const u=F(o,kh);if("error"in u)throw u.error;return u.result}case"none":{const u=F(o,Eh);if("error"in u)throw u.error;return u.result}default:{const u=F(o,_h);if("error"in u)throw u.error;return u.result}}}catch(u){throw new Y(u,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:u,...l}=t;n=u,e=l}const i=this._buildArgs([],n,"base64",e),s=await this._rpcRequest("getBlockProduction",i),o=F(s,Of);if("error"in o)throw new Y(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),o=await this._rpcRequest("getTransaction",s),u=F(o,Ts);if("error"in u)throw new Y(u.error,"failed to get transaction");const l=u.result;return l&&{...l,transaction:{...l.transaction,message:Ls(l.version,l.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:i}=vt(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),u=F(o,kr);if("error"in u)throw new Y(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){const{commitment:n,config:i}=vt(e),s=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const p=F(l,kr);if("error"in p)throw new Y(p.error,"failed to get transactions");return p.result})}async getTransactions(t,e){const{commitment:n,config:i}=vt(e),s=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const p=F(l,Ts);if("error"in p)throw new Y(p.error,"failed to get transactions");const g=p.result;return g&&{...g,transaction:{...g.transaction,message:Ls(g.version,g.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getConfirmedBlock",n),s=F(i,Ah);if("error"in s)throw new Y(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");const u={...o,transactions:o.transactions.map(({transaction:l,meta:p})=>{const g=new bn(l.message);return{meta:p,transaction:{...l,message:g}}})};return{...u,transactions:u.transactions.map(({transaction:l,meta:p})=>({meta:p,transaction:je.populate(l.message,l.signatures)}))}}async getBlocks(t,e,n){const i=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),s=await this._rpcRequest("getBlocks",i),o=F(s,ct(W(R())));if("error"in o)throw new Y(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=F(i,no);if("error"in s)throw new Y(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=F(i,no);if("error"in s)throw new Y(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getConfirmedTransaction",n),s=F(i,Ts);if("error"in s)throw new Y(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const u=new bn(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:je.populate(u,l)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=F(i,kr);if("error"in s)throw new Y(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const u=F(o,kr);if("error"in u)throw new Y(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(e--,!(e<=0||e<s));)try{const l=await this.getConfirmedBlockSignatures(e,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const l=await this.getConfirmedBlockSignatures(n);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=F(s,eh);if("error"in o)throw new Y(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",i),o=F(s,nh);if("error"in o)throw new Y(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=new Qi({key:t,state:Qi.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=pi.fromAccountData(i.data)),{context:n,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),i=F(n,Ch);if("error"in i)throw new Y(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await On(100);const n=Date.now()-this._blockhashInfo.lastFetch>=vf;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await On(rf/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=vt(t),i=this._buildArgs([],e,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=F(s,Pt(R()));if("error"in o)throw new Y(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const E=t.serialize(),w=rt.from(E).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const B=e||{};B.encoding="base64","commitment"in B||(B.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(B.innerInstructions=e.innerInstructions);const L=[w,B],_=await this._rpcRequest("simulateTransaction",L),C=F(_,to);if("error"in C)throw new Error("failed to simulate transaction: "+C.error.message);return C.result}let i;if(t instanceof je){let I=t;i=new je,i.feePayer=I.feePayer,i.instructions=t.instructions,i.nonceInfo=I.nonceInfo,i.signatures=I.signatures}else i=je.populate(t),i._message=i._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let I=this._disableBlockhashCaching;for(;;){const E=await this._blockhashWithExpiryBlockHeight(I);if(i.lastValidBlockHeight=E.lastValidBlockHeight,i.recentBlockhash=E.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const w=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(w)&&!this._blockhashInfo.transactionSignatures.includes(w)){this._blockhashInfo.simulatedSignatures.push(w);break}else I=!0}}const o=i._compile(),u=o.serialize(),p=i._serialize(u).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(n){const I=(Array.isArray(n)?n:o.nonProgramIds()).map(E=>E.toBase58());g.accounts={encoding:"base64",addresses:I}}s&&(g.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(g.innerInstructions=e.innerInstructions);const v=[p,g],A=await this._rpcRequest("simulateTransaction",v),k=F(A,to);if("error"in k){let I;if("data"in k.error&&(I=k.error.data.logs,I&&Array.isArray(I))){const E=`
    `,w=E+I.join(E);console.error(k.error.message,w)}throw new Gi({action:"simulate",signature:"",transactionMessage:k.error.message,logs:I})}return k.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(t.nonceInfo)t.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");const l=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=t.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(t,e){const n=ye(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},i=e&&e.skipPreflight,s=i===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[t,n],u=await this._rpcRequest("sendTransaction",o),l=F(u,Nh);if("error"in l){let p;throw"data"in l.error&&(p=l.error.data.logs),new Gi({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:p})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var i;const n=(i=this._subscriptionsByHash[t])==null?void 0:i.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var s;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const u=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(u instanceof Error&&console.error(`${o} error for argument`,s,u.message),!e())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(u){if(u instanceof Error&&console.error(`${o} error:`,u.message),!e())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=F(t,rh);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,i=Yi([t.method,e]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];ae(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:i,config:s}=vt(n),o=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=F(t,ih);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,i){const{commitment:s,config:o}=vt(n),u=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:Xi(i)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=F(t,Uh);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=F(t,ah);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=F(t,uh);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,i){const s=e||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,i){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,i)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=F(t,lh);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const i=this._buildArgs([t],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,u)=>{if(o.type==="status"){e(o.result,u);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(t,e,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],i,void 0,s),u=this._makeSubscription({callback:(l,p)=>{e(l,p);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=F(t,fh);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Z([J("instruction"),Wn("recentSlot"),mt("bumpSeed")])},FreezeLookupTable:{index:1,layout:Z([J("instruction")])},ExtendLookupTable:{index:2,layout:Z([J("instruction"),Wn(),Ie(lt(),kn(J(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Z([J("instruction")])},CloseLookupTable:{index:4,layout:Z([J("instruction")])}});new Q("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Z([mt("instruction"),J("units"),J("additionalFee")])},RequestHeapFrame:{index:1,layout:Z([mt("instruction"),J("bytes")])},SetComputeUnitLimit:{index:2,layout:Z([mt("instruction"),J("units")])},SetComputeUnitPrice:{index:3,layout:Z([mt("instruction"),Wn("microLamports")])}});new Q("ComputeBudget111111111111111111111111111111");Z([mt("numSignatures"),mt("padding"),Ue("signatureOffset"),Ue("signatureInstructionIndex"),Ue("publicKeyOffset"),Ue("publicKeyInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),Ue("messageInstructionIndex")]);new Q("Ed25519SigVerify111111111111111111111111111");di.utils.isValidPrivateKey;di.getPublicKey;Z([mt("numSignatures"),Ue("signatureOffset"),mt("signatureInstructionIndex"),Ue("ethAddressOffset"),mt("ethAddressInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),mt("messageInstructionIndex"),Ut(20,"ethAddress"),Ut(64,"signature"),mt("recoveryId")]);new Q("KeccakSecp256k11111111111111111111111111111");var Ia;new Q("StakeConfig11111111111111111111111111111111");class Ma{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Ia=Ma;Ma.default=new Ia(0,0,Q.default);Object.freeze({Initialize:{index:0,layout:Z([J("instruction"),Zl(),Yl()])},Authorize:{index:1,layout:Z([J("instruction"),lt("newAuthorized"),J("stakeAuthorizationType")])},Delegate:{index:2,layout:Z([J("instruction")])},Split:{index:3,layout:Z([J("instruction"),Te("lamports")])},Withdraw:{index:4,layout:Z([J("instruction"),Te("lamports")])},Deactivate:{index:5,layout:Z([J("instruction")])},Merge:{index:7,layout:Z([J("instruction")])},AuthorizeWithSeed:{index:8,layout:Z([J("instruction"),lt("newAuthorized"),J("stakeAuthorizationType"),Pn("authoritySeed"),lt("authorityOwner")])}});new Q("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Z([J("instruction"),Jl()])},Authorize:{index:1,layout:Z([J("instruction"),lt("newAuthorized"),J("voteAuthorizationType")])},Withdraw:{index:3,layout:Z([J("instruction"),Te("lamports")])},UpdateValidatorIdentity:{index:4,layout:Z([J("instruction")])},AuthorizeWithSeed:{index:10,layout:Z([J("instruction"),Ql()])}});new Q("Vote111111111111111111111111111111111111111");new Q("Va1idator1nfo111111111111111111111111111111");N({name:D(),website:X(D()),details:X(D()),iconUrl:X(D()),keybaseUsername:X(D())});new Q("Vote111111111111111111111111111111111111111");Z([lt("nodePubkey"),lt("authorizedWithdrawer"),mt("commission"),me(),Ie(Z([me("slot"),J("confirmationCount")]),kn(J(),-8),"votes"),mt("rootSlotValid"),me("rootSlot"),me(),Ie(Z([me("epoch"),lt("authorizedVoter")]),kn(J(),-8),"authorizedVoters"),Z([Ie(Z([lt("authorizedPubkey"),me("epochOfLastAuthorizedSwitch"),me("targetEpoch")]),32,"buf"),me("idx"),mt("isEmpty")],"priorVoters"),me(),Ie(Z([me("epoch"),me("credits"),me("prevCredits")]),kn(J(),-8),"epochCredits"),Z([me("slot"),me("timestamp")],"lastTimestamp")]);const ro={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Dh(r,t){const e="https";if(!r)return ro[e].devnet;const n=ro[e][r];if(!n)throw new Error(`Unknown ${e} cluster: ${r}`);return n}const qh=1e9;var Ba={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(l,p,g){this.fn=l,this.context=p,this.once=g||!1}function s(l,p,g,v,A){if(typeof g!="function")throw new TypeError("The listener must be a function");var k=new i(g,v||l,A),I=e?e+p:p;return l._events[I]?l._events[I].fn?l._events[I]=[l._events[I],k]:l._events[I].push(k):(l._events[I]=k,l._eventsCount++),l}function o(l,p){--l._eventsCount===0?l._events=new n:delete l._events[p]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var p=[],g,v;if(this._eventsCount===0)return p;for(v in g=this._events)t.call(g,v)&&p.push(e?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},u.prototype.listeners=function(p){var g=e?e+p:p,v=this._events[g];if(!v)return[];if(v.fn)return[v.fn];for(var A=0,k=v.length,I=new Array(k);A<k;A++)I[A]=v[A].fn;return I},u.prototype.listenerCount=function(p){var g=e?e+p:p,v=this._events[g];return v?v.fn?1:v.length:0},u.prototype.emit=function(p,g,v,A,k,I){var E=e?e+p:p;if(!this._events[E])return!1;var w=this._events[E],B=arguments.length,L,_;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),B){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,g),!0;case 3:return w.fn.call(w.context,g,v),!0;case 4:return w.fn.call(w.context,g,v,A),!0;case 5:return w.fn.call(w.context,g,v,A,k),!0;case 6:return w.fn.call(w.context,g,v,A,k,I),!0}for(_=1,L=new Array(B-1);_<B;_++)L[_-1]=arguments[_];w.fn.apply(w.context,L)}else{var C=w.length,P;for(_=0;_<C;_++)switch(w[_].once&&this.removeListener(p,w[_].fn,void 0,!0),B){case 1:w[_].fn.call(w[_].context);break;case 2:w[_].fn.call(w[_].context,g);break;case 3:w[_].fn.call(w[_].context,g,v);break;case 4:w[_].fn.call(w[_].context,g,v,A);break;default:if(!L)for(P=1,L=new Array(B-1);P<B;P++)L[P-1]=arguments[P];w[_].fn.apply(w[_].context,L)}}return!0},u.prototype.on=function(p,g,v){return s(this,p,g,v,!1)},u.prototype.once=function(p,g,v){return s(this,p,g,v,!0)},u.prototype.removeListener=function(p,g,v,A){var k=e?e+p:p;if(!this._events[k])return this;if(!g)return o(this,k),this;var I=this._events[k];if(I.fn)I.fn===g&&(!A||I.once)&&(!v||I.context===v)&&o(this,k);else{for(var E=0,w=[],B=I.length;E<B;E++)(I[E].fn!==g||A&&!I[E].once||v&&I[E].context!==v)&&w.push(I[E]);w.length?this._events[k]=w.length===1?w[0]:w:o(this,k)}return this},u.prototype.removeAllListeners=function(p){var g;return p?(g=e?e+p:p,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,r.exports=u})(Ba);var Fh=Ba.exports;const Hh=lr(Fh);class Ye extends Error{constructor(t,e){super(t),this.error=e}}class $h extends Ye{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Wh extends Ye{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Kh extends Ye{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class jh extends Ye{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Vh extends Ye{constructor(){super(...arguments),this.name="WalletAccountError"}}class so extends Ye{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class er extends Ye{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class nr extends Ye{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class zn extends Ye{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Gh extends Ye{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var Qe;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Qe||(Qe={}));class Zh extends Hh{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const i=this.publicKey;if(!i)throw new er;return t.feePayer=t.feePayer||i,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function Yh(r){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(r())for(const s of t)s()}const n=setInterval(e,1e3);t.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function Jh(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),t=r.includes("iphone")||r.includes("ipad"),e=r.includes("safari");return t&&e}function Ws(r){return"version"in r}class Qh extends Zh{async sendTransaction(t,e,n={}){let i=!0;try{if(Ws(t)){if(!this.supportedTransactionVersions)throw new nr("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new nr(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const s=t.serialize();return await e.sendRawTransaction(s,n)}catch(s){throw s instanceof zn?(i=!1,s):new nr(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;t=await this.prepareTransaction(t,e,o),s!=null&&s.length&&t.partialSign(...s),t=await this.signTransaction(t);const u=t.serialize();return await e.sendRawTransaction(u,o)}catch(s){throw s instanceof zn?(i=!1,s):new nr(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(t){for(const n of t)if(Ws(n)){if(!this.supportedTransactionVersions)throw new zn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new zn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class Xh extends Qh{}const td="Phantom";class ed extends Xh{constructor(t={}){super(),this.name=td,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Qe.Unsupported:Qe.NotDetected,this._disconnected=()=>{const e=this._wallet;e&&(e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new Kh),this.emit("disconnect"))},this._accountChanged=e=>{const n=this._publicKey;if(n){try{e=new Q(e.toBytes())}catch(i){this.emit("error",new so(i==null?void 0:i.message,i));return}n.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Qe.Unsupported&&(Jh()?(this._readyState=Qe.Loadable,this.emit("readyStateChange",this._readyState)):Yh(()=>{var e,n,i;return(n=(e=window.phantom)==null?void 0:e.solana)!=null&&n.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=Qe.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Qe.Installed&&await this.connect()}async connect(){var t;try{if(this.connected||this.connecting)return;if(this.readyState===Qe.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==Qe.Installed)throw new $h;this._connecting=!0;const e=((t=window.phantom)==null?void 0:t.solana)||window.solana;if(!e.isConnected)try{await e.connect()}catch(i){throw new Wh(i==null?void 0:i.message,i)}if(!e.publicKey)throw new Vh;let n;try{n=new Q(e.publicKey.toBytes())}catch(i){throw new so(i==null?void 0:i.message,i)}e.on("disconnect",this._disconnected),e.on("accountChanged",this._accountChanged),this._wallet=e,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new jh(e==null?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,n={}){try{const i=this._wallet;if(!i)throw new er;try{const{signers:s,...o}=n;Ws(t)?s!=null&&s.length&&t.sign(s):(t=await this.prepareTransaction(t,e,o),s!=null&&s.length&&t.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||e.commitment;const{signature:u}=await i.signAndSendTransaction(t,o);return u}catch(s){throw s instanceof Ye?s:new nr(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(t){try{const e=this._wallet;if(!e)throw new er;try{return await e.signTransaction(t)||t}catch(n){throw new zn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const e=this._wallet;if(!e)throw new er;try{return await e.signAllTransactions(t)||t}catch(n){throw new zn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const e=this._wallet;if(!e)throw new er;try{const{signature:n}=await e.signMessage(t);return n}catch(n){throw new Gh(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}}function io(r,t,e){const n=r.slice();return n[15]=t[e],n}function nd(r){let t,e,n,i="Hamstrump Presidential Campaign Funding",s,o,u,l=`<img src="${sr}/fundingraiser.jpg" alt="Campaign fundraiser" class="feature-image svelte-1ximrgh" width="600" height="400"/> <p class="highlight svelte-1ximrgh">&quot;Together, we&#39;re going to make the future great again! Your investment today is a vote for progress, power, and prosperity. Let&#39;s build something incredible, one SOL at a time. Join the movement, and let&#39;s win big!&quot;</p>`,p,g,v,A;function k(_,C){return _[1]?sd:rd}let I=k(r),E=I(r);function w(_,C){return!_[1]&&_[5]?od:id}let B=w(r),L=B(r);return{c(){t=pt("section"),e=pt("div"),n=pt("h1"),n.textContent=i,s=ke(),o=pt("div"),u=pt("div"),u.innerHTML=l,p=ke(),g=pt("div"),v=pt("div"),E.c(),A=ke(),L.c(),this.h()},l(_){t=gt(_,"SECTION",{id:!0,class:!0});var C=de(t);e=gt(C,"DIV",{class:!0});var P=de(e);n=gt(P,"H1",{class:!0,"data-svelte-h":!0}),Xe(n)!=="svelte-1geromt"&&(n.textContent=i),s=Ee(P),o=gt(P,"DIV",{class:!0});var O=de(o);u=gt(O,"DIV",{class:!0,"data-svelte-h":!0}),Xe(u)!=="svelte-rn7qmi"&&(u.innerHTML=l),p=Ee(O),g=gt(O,"DIV",{class:!0});var U=de(g);v=gt(U,"DIV",{class:!0});var H=de(v);E.l(H),H.forEach(it),A=Ee(U),L.l(U),U.forEach(it),O.forEach(it),P.forEach(it),C.forEach(it),this.h()},h(){tt(n,"class","main-title svelte-1ximrgh"),tt(u,"class","funding-info svelte-1ximrgh"),tt(v,"class","wallet-interaction svelte-1ximrgh"),tt(g,"class","qr-code-section svelte-1ximrgh"),tt(o,"class","funding-grid svelte-1ximrgh"),tt(e,"class","container svelte-1ximrgh"),tt(t,"id","features"),tt(t,"class","funding-section svelte-1ximrgh")},m(_,C){zt(_,t,C),ut(t,e),ut(e,n),ut(e,s),ut(e,o),ut(o,u),ut(o,p),ut(o,g),ut(g,v),E.m(v,null),ut(g,A),L.m(g,null)},p(_,C){I===(I=k(_))&&E?E.p(_,C):(E.d(1),E=I(_),E&&(E.c(),E.m(v,null))),B!==(B=w(_))&&(L.d(1),L=B(_),L&&(L.c(),L.m(g,null)))},d(_){_&&it(t),E.d(),L.d()}}}function rd(r){let t,e="Want to participate in the presale?",n,i,s="Connect Wallet",o,u;return{c(){t=pt("p"),t.textContent=e,n=ke(),i=pt("button"),i.textContent=s,this.h()},l(l){t=gt(l,"P",{class:!0,"data-svelte-h":!0}),Xe(t)!=="svelte-ecceet"&&(t.textContent=e),n=Ee(l),i=gt(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(i)!=="svelte-1csc2as"&&(i.textContent=s),this.h()},h(){tt(t,"class","instruction svelte-1ximrgh"),tt(i,"class","action-button connect-button svelte-1ximrgh")},m(l,p){zt(l,t,p),zt(l,n,p),zt(l,i,p),o||(u=Er(i,"click",r[9]),o=!0)},p:Ua,d(l){l&&(it(t),it(n),it(i)),o=!1,u()}}}function sd(r){let t,e,n=r[2].slice(0,4)+"",i,s,o=r[2].slice(-4)+"",u,l,p,g="Disconnect",v,A,k,I,E,w,B,L,_,C=r[4]?"Processing...":"Make Investment",P,O,U,H,G,nt=r[6].length>0&&oo(r);return{c(){t=pt("p"),e=We("Connected: "),i=We(n),s=We("..."),u=We(o),l=ke(),p=pt("button"),p.textContent=g,v=ke(),A=pt("form"),k=pt("label"),I=We("Amount (Max "),E=We(zr),w=We(` SOL):\r
                `),B=pt("input"),L=ke(),_=pt("button"),P=We(C),O=ke(),nt&&nt.c(),U=Ir(),this.h()},l(z){t=gt(z,"P",{class:!0});var V=de(t);e=Ke(V,"Connected: "),i=Ke(V,n),s=Ke(V,"..."),u=Ke(V,o),V.forEach(it),l=Ee(z),p=gt(z,"BUTTON",{class:!0,"data-svelte-h":!0}),Xe(p)!=="svelte-rcz4bv"&&(p.textContent=g),v=Ee(z),A=gt(z,"FORM",{class:!0});var x=de(A);k=gt(x,"LABEL",{for:!0});var a=de(k);I=Ke(a,"Amount (Max "),E=Ke(a,zr),w=Ke(a,` SOL):\r
                `),B=gt(a,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),a.forEach(it),L=Ee(x),_=gt(x,"BUTTON",{type:!0,class:!0});var f=de(_);P=Ke(f,C),f.forEach(it),x.forEach(it),O=Ee(z),nt&&nt.l(z),U=Ir(),this.h()},h(){tt(t,"class","connection-status svelte-1ximrgh"),tt(p,"class","action-button disconnect-button svelte-1ximrgh"),tt(B,"type","text"),tt(B,"id","amount"),tt(B,"placeholder","0.0"),B.disabled=r[4],tt(B,"class","svelte-1ximrgh"),tt(k,"for","amount"),tt(_,"type","submit"),tt(_,"class","action-button invest-button svelte-1ximrgh"),_.disabled=r[4],tt(A,"class","svelte-1ximrgh")},m(z,V){zt(z,t,V),ut(t,e),ut(t,i),ut(t,s),ut(t,u),zt(z,l,V),zt(z,p,V),zt(z,v,V),zt(z,A,V),ut(A,k),ut(k,I),ut(k,E),ut(k,w),ut(k,B),Mi(B,r[3]),ut(A,L),ut(A,_),ut(_,P),zt(z,O,V),nt&&nt.m(z,V),zt(z,U,V),H||(G=[Er(p,"click",r[10]),Er(B,"input",r[11]),Er(A,"submit",Ga(r[8]))],H=!0)},p(z,V){V&4&&n!==(n=z[2].slice(0,4)+"")&&rr(i,n),V&4&&o!==(o=z[2].slice(-4)+"")&&rr(u,o),V&16&&(B.disabled=z[4]),V&8&&B.value!==z[3]&&Mi(B,z[3]),V&16&&C!==(C=z[4]?"Processing...":"Make Investment")&&rr(P,C),V&16&&(_.disabled=z[4]),z[6].length>0?nt?nt.p(z,V):(nt=oo(z),nt.c(),nt.m(U.parentNode,U)):nt&&(nt.d(1),nt=null)},d(z){z&&(it(t),it(l),it(p),it(v),it(A),it(O),it(U)),nt&&nt.d(z),H=!1,Pa(G)}}}function oo(r){let t,e,n="Recent Transactions",i,s,o=Bi(r[6]),u=[];for(let l=0;l<o.length;l+=1)u[l]=ao(io(r,o,l));return{c(){t=pt("div"),e=pt("h3"),e.textContent=n,i=ke(),s=pt("ul");for(let l=0;l<u.length;l+=1)u[l].c();this.h()},l(l){t=gt(l,"DIV",{class:!0});var p=de(t);e=gt(p,"H3",{class:!0,"data-svelte-h":!0}),Xe(e)!=="svelte-xsu26y"&&(e.textContent=n),i=Ee(p),s=gt(p,"UL",{class:!0});var g=de(s);for(let v=0;v<u.length;v+=1)u[v].l(g);g.forEach(it),p.forEach(it),this.h()},h(){tt(e,"class","svelte-1ximrgh"),tt(s,"class","svelte-1ximrgh"),tt(t,"class","recent-transactions svelte-1ximrgh")},m(l,p){zt(l,t,p),ut(t,e),ut(t,i),ut(t,s);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(s,null)},p(l,p){if(p&64){o=Bi(l[6]);let g;for(g=0;g<o.length;g+=1){const v=io(l,o,g);u[g]?u[g].p(v,p):(u[g]=ao(v),u[g].c(),u[g].m(s,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=o.length}},d(l){l&&it(t),Za(u,l)}}}function ao(r){let t,e,n=r[15].amount+"",i,s,o=lo(r[15].timestamp)+"",u,l,p;return{c(){t=pt("li"),e=pt("a"),i=We(n),s=We(" SOL - "),u=We(o),p=ke(),this.h()},l(g){t=gt(g,"LI",{class:!0});var v=de(t);e=gt(v,"A",{href:!0,target:!0,rel:!0,class:!0});var A=de(e);i=Ke(A,n),s=Ke(A," SOL - "),u=Ke(A,o),A.forEach(it),p=Ee(v),v.forEach(it),this.h()},h(){tt(e,"href",l=uo(r[15].signature)),tt(e,"target","_blank"),tt(e,"rel","noopener noreferrer"),tt(e,"class","svelte-1ximrgh"),tt(t,"class","svelte-1ximrgh")},m(g,v){zt(g,t,v),ut(t,e),ut(e,i),ut(e,s),ut(e,u),ut(t,p)},p(g,v){v&64&&n!==(n=g[15].amount+"")&&rr(i,n),v&64&&o!==(o=lo(g[15].timestamp)+"")&&rr(u,o),v&64&&l!==(l=uo(g[15].signature))&&tt(e,"href",l)},d(g){g&&it(t)}}}function id(r){let t,e='<p>Want to finance the campaign before public presale?</p> <a href="mailto:campaignfund@hamstrump.biz" class="highlight svelte-1ximrgh">campaignfund@hamstrump.biz</a>';return{c(){t=pt("div"),t.innerHTML=e,this.h()},l(n){t=gt(n,"DIV",{class:!0,"data-svelte-h":!0}),Xe(t)!=="svelte-1sx1mcs"&&(t.innerHTML=e),this.h()},h(){tt(t,"class","campaign-info svelte-1ximrgh")},m(n,i){zt(n,t,i)},d(n){n&&it(t)}}}function od(r){let t,e="Or scan the QR code to invest:",n,i,s;return{c(){t=pt("p"),t.textContent=e,n=ke(),i=pt("img"),this.h()},l(o){t=gt(o,"P",{class:!0,"data-svelte-h":!0}),Xe(t)!=="svelte-h126ks"&&(t.textContent=e),n=Ee(o),i=gt(o,"IMG",{src:!0,alt:!0,class:!0,width:!0,height:!0}),this.h()},h(){tt(t,"class","instruction svelte-1ximrgh"),za(i.src,s=sr+"/investWallet.jpg")||tt(i,"src",s),tt(i,"alt","Invest Wallet QR Code"),tt(i,"class","qr-code svelte-1ximrgh"),tt(i,"width","250"),tt(i,"height","250")},m(o,u){zt(o,t,u),zt(o,n,u),zt(o,i,u)},d(o){o&&(it(t),it(n),it(i))}}}function ad(r){let t,e,n,i,s,o,u=`<li class="svelte-1ximrgh"><a href="${sr}/"><img src="${sr}/coinhamstr.png" alt="Hamstrup" width="40" height="40" style="border-radius: 50%;"/></a></li>`,l,p,g=`<li class="svelte-1ximrgh"><a href="${sr}/">Home</a></li>`,v,A,k,I,E,w,B;I=new Ja({});let L=nd(r);return{c(){t=pt("meta"),e=ke(),n=pt("header"),i=pt("nav"),s=pt("div"),o=pt("ul"),o.innerHTML=u,l=ke(),p=pt("ul"),p.innerHTML=g,v=ke(),A=pt("ul"),k=pt("li"),Fa(I.$$.fragment),E=ke(),L&&L.c(),w=Ir(),this.h()},l(_){const C=Ha("svelte-1utyp6r",document.head);t=gt(C,"META",{name:!0,content:!0}),C.forEach(it),e=Ee(_),n=gt(_,"HEADER",{class:!0});var P=de(n);i=gt(P,"NAV",{class:!0});var O=de(i);s=gt(O,"DIV",{class:!0});var U=de(s);o=gt(U,"UL",{class:!0,"data-svelte-h":!0}),Xe(o)!=="svelte-12w1rc4"&&(o.innerHTML=u),l=Ee(U),p=gt(U,"UL",{class:!0,"data-svelte-h":!0}),Xe(p)!=="svelte-m5l6j3"&&(p.innerHTML=g),v=Ee(U),A=gt(U,"UL",{class:!0});var H=de(A);k=gt(H,"LI",{class:!0});var G=de(k);$a(I.$$.fragment,G),G.forEach(it),H.forEach(it),U.forEach(it),O.forEach(it),P.forEach(it),E=Ee(_),L&&L.l(_),w=Ir(),this.h()},h(){document.title="Hamstrump Presidential Campaign Funding",tt(t,"name","description"),tt(t,"content","Support the Hamstrump Presidential Campaign by investing in SOL."),tt(o,"class","svelte-1ximrgh"),tt(p,"class","svelte-1ximrgh"),tt(k,"class","svelte-1ximrgh"),tt(A,"class","svelte-1ximrgh"),tt(s,"class","container svelte-1ximrgh"),tt(i,"class","svelte-1ximrgh"),tt(n,"class","header svelte-1ximrgh")},m(_,C){ut(document.head,t),zt(_,e,C),zt(_,n,C),ut(n,i),ut(i,s),ut(s,o),ut(s,l),ut(s,p),ut(s,v),ut(s,A),ut(A,k),Wa(I,k,null),zt(_,E,C),L&&L.m(_,C),zt(_,w,C),B=!0},p(_,[C]){L.p(_,C)},i(_){B||(Ka(I.$$.fragment,_),B=!0)},o(_){ja(I.$$.fragment,_),B=!1},d(_){_&&(it(e),it(n),it(E),it(w)),it(t),Va(I),L&&L.d(_)}}}const zr=200,co="ETinePFs813UmRUqTMt5AE6uFGNt4ozqrM6LDgjduDb1",Ra="mainnet-beta";function cd(r){return parseFloat(r.replace(",","."))}function uo(r){return`https://explorer.solana.com/tx/${r}?cluster=${Ra}`}function lo(r){return new Date(r).toLocaleString()}function ud(r,t,e){let n;const i=Qa([]);Na(r,i,L=>e(6,n=L));let s,o,u=!1,l="",p="",g=!1,v=!0;typeof window<"u"&&(window.Buffer=rt),Oa(async()=>{{o=new zh(Dh(Ra),"confirmed"),e(0,s=new ed),s.on("connect",A),s.on("disconnect",k);const L=localStorage.getItem("recentTransactions");L&&i.set(JSON.parse(L))}});function A(){e(1,u=!0),e(2,l=s.publicKey.toBase58()),e(5,v=!1)}function k(){e(1,u=!1),e(2,l=""),i.set([]),localStorage.removeItem("recentTransactions"),e(5,v=!0)}async function I(){if(!u||g)return;const L=cd(p);if(isNaN(L)||L<=0||L>zr){alert(`Amount must be between 0 and ${zr} SOL.`);return}e(4,g=!0);try{const _=Math.round(L*qh),C=new je;C.add(Kn.transfer({fromPubkey:s.publicKey,toPubkey:new Q(co),lamports:_}));const{blockhash:P,lastValidBlockHeight:O}=await o.getLatestBlockhash();C.recentBlockhash=P,C.feePayer=s.publicKey;const{value:U}=await o.getFeeForMessage(C.compileMessage(),"confirmed"),H=_-U,G=new je().add(Kn.transfer({fromPubkey:s.publicKey,toPubkey:new Q(co),lamports:H}));G.recentBlockhash=P,G.feePayer=s.publicKey;const nt=await s.signTransaction(G),z=await o.sendRawTransaction(nt.serialize());if((await o.confirmTransaction({signature:z,blockhash:P,lastValidBlockHeight:O})).value.err)throw new Error("Transaction failed to confirm");const x={signature:z,amount:L,timestamp:new Date().toISOString()};i.update(a=>{const f=[x,...a].slice(0,5);return localStorage.setItem("recentTransactions",JSON.stringify(f)),f}),e(3,p="")}catch(_){console.error("Payment error:",_),alert(`An error occurred during payment: ${_.message}`)}finally{e(4,g=!1)}}function E(){s.connected||s.connect()}const w=()=>s.disconnect();function B(){p=this.value,e(3,p)}return[s,u,l,p,g,v,n,i,I,E,w,B]}class xd extends Da{constructor(t){super(),qa(this,t,ud,ad,Ca,{})}}export{xd as component};
